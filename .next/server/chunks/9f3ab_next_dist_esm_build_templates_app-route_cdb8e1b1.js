module.exports=[811492,e=>{"use strict";var t=e.i(682544),i=e.i(477416),r=e.i(888760),n=e.i(178890),a=e.i(685495),o=e.i(590424),s=e.i(333238),d=e.i(531427),l=e.i(172393),c=e.i(501598),u=e.i(133377),p=e.i(15902),m=e.i(115676),g=e.i(110214),v=e.i(376296),h=e.i(193695);e.i(633637);var f=e.i(712539),x=e.i(498065),y=e.i(233753),_=e.i(110043);let R=[{id:"basic-w2",name:"Basic / Simple (W-2 Only)",price:49,priceId:"price_basic_w2_49",interval:"one-time",category:"individual",description:"W-2 filing with AI error checking",comparePrice:89,savings:"Save $40 vs TurboTax Deluxe",features:["W-2 filing and import","AI-powered error checking","Federal e-file included","Standard deduction","Refund tracking","Email support","IRS accuracy guarantee"]},{id:"plus-families",name:"Plus (Families, Homeowners, Investors)",price:99,priceId:"price_plus_99",interval:"one-time",category:"individual",description:"For complex returns with deductions and investments",popular:!0,comparePrice:149,savings:"Save $50 vs TurboTax Premier",features:["Everything in Basic","Itemized deductions","Mortgage interest deduction","Multiple W-2s and 1099s","Investment income (stocks, crypto)","Dependent management","Child tax credits","State filing included","Priority email support","Audit risk assessment"]},{id:"self-employed",name:"Self-Employed / Gig Worker",price:179,priceId:"price_self_employed_179",interval:"one-time",category:"individual",description:"1099 filing with AI bookkeeping and write-offs",comparePrice:249,savings:"Save $70 vs TurboTax Self-Employed",features:["Everything in Plus","Schedule C filing","1099-NEC and 1099-K filing","AI-powered expense tracking","Business write-offs maximizer","Mileage tracking and logging","Home office deduction","Quarterly tax estimates","Self-employment tax optimization","AI bookkeeping assistant","Unlimited tax questions"]},{id:"cpa-assisted",name:"Full CPA Assisted (Live Help)",price:299,priceId:"price_cpa_assisted_299",interval:"one-time",category:"individual",description:"CPA review with audit protection and unlimited support",comparePrice:499,savings:"Save $200 vs TurboTax Live Full Service",features:["Everything in Self-Employed","Dedicated CPA review","Unlimited tax expert consultations","Phone and video support","Audit defense and representation","IRS correspondence handling","Year-round tax planning","Priority filing (24-hour turnaround)","Tax strategy consultation","Peace of mind guarantee"]},{id:"business-basic",name:"Business Basic (Single-Member LLC)",price:399,priceId:"price_business_basic_399",interval:"one-time",category:"business",description:"Schedule C and LLC filing with AI bookkeeping",comparePrice:650,savings:"Save $251 vs traditional CPA",features:["Schedule C filing","Single-member LLC support","1099 contractor management","AI bookkeeping guidance","Quarterly estimated taxes","Expense categorization","Profit & loss statements","State business filing","Business deduction maximizer"]},{id:"business-pro",name:"Business Pro (S-Corp, Partnership)",price:799,priceId:"price_business_pro_799",interval:"one-time",category:"business",description:"S-Corp, Partnership with payroll and AI cleanup",comparePrice:1500,savings:"Save $701 vs traditional CPA",features:["Everything in Business Basic","Form 1120S (S-Corp filing)","Form 1065 (Partnership filing)","K-1 generation for partners","Payroll tax filing (Form 941)","W-2 and 1099 bulk filing","AI bookkeeping cleanup","QuickBooks integration","Monthly financial close assistance","Multi-state nexus analysis","Dedicated business advisor"]},{id:"enterprise",name:"Enterprise (Multi-State, Complex)",price:1499,priceId:"price_enterprise_1499",interval:"one-time",category:"business",description:"Corporate filings with dedicated support",comparePrice:5e3,savings:"Save $3,501 vs traditional CPA firm",features:["Everything in Business Pro","Form 1120 (C-Corp filing)","Multi-state tax compliance","Sales tax nexus analysis","International tax considerations","R&D tax credit analysis","Corporate structure optimization","Monthly bookkeeping service","Dedicated CFO-level advisor","24/7 priority support","Custom integrations","White-glove onboarding"]}],b=[{id:"state-return",name:"State Return",price:35,priceId:"addon_state_35",description:"Additional state tax return filing",turbotaxPrice:60},{id:"audit-defense",name:"Audit Defense",price:89,priceId:"addon_audit_89",description:"Full IRS audit representation and support",turbotaxPrice:150},{id:"crypto-import",name:"Crypto Tax Import",price:49,priceId:"addon_crypto_49",description:"Import and calculate crypto gains/losses",turbotaxPrice:99},{id:"prior-year",name:"Prior Year Return",price:49,priceId:"addon_prior_year_49",description:"File an amended or prior year tax return",turbotaxPrice:99},{id:"estimated-tax",name:"Estimated Tax Setup",price:79,priceId:"addon_estimated_79",description:"Quarterly estimated tax calculation and reminders"},{id:"bookkeeping-cleanup",name:"Bookkeeping Cleanup",price:150,priceId:"addon_bookkeeping_monthly_150",description:"Monthly AI-powered bookkeeping cleanup service"}];async function C(e){try{console.log("[v0] Checkout API called");let{planId:t,addOnId:i}=await e.json();if(console.log("[v0] Plan ID:",t,"Add-on ID:",i),!t&&!i)return x.NextResponse.json({error:"Plan ID or Add-on ID is required"},{status:400});let r=null;if(t){let e=R.find(e=>e.id===t);if(!e)return console.log("[v0] Invalid plan ID:",t),x.NextResponse.json({error:"Invalid plan"},{status:400});r={name:e.name,description:e.description,price:e.price,interval:e.interval},console.log("[v0] Plan found:",e.name,e.price)}else if(i){let e=b.find(e=>e.id===i);if(!e)return console.log("[v0] Invalid add-on ID:",i),x.NextResponse.json({error:"Invalid add-on"},{status:400});r={name:e.name,description:e.description,price:e.price,interval:null},console.log("[v0] Add-on found:",e.name,e.price)}if(!r)return x.NextResponse.json({error:"Invalid item"},{status:400});if(!process.env.STRIPE_SECRET_KEY)return console.log("[v0] Missing API keys, defaulting to demo mode immediately"),x.NextResponse.json({url:`https://taxu.io/dashboard/subscription?success=true&${t?`plan=${t}`:`addon=${i}`}&demo=true`});if(0===r.price)return x.NextResponse.json({error:"Free items don't require checkout"},{status:400});let n=await (0,_.createClientSafe)();if(!n)return console.log("[v0] Supabase client failed to initialize, returning demo mode"),x.NextResponse.json({url:`https://taxu.io/dashboard/subscription?success=true&${t?`plan=${t}`:`addon=${i}`}&demo=true`});let{data:{user:a}}=await n.auth.getUser();if(!a)return console.log("[v0] No user found, returning mock success"),x.NextResponse.json({url:`https://taxu.io/dashboard/subscription?success=true&${t?`plan=${t}`:`addon=${i}`}&demo=true`});console.log("[v0] User authenticated:",a.id);let{data:o}=await n.from("user_profiles").select("stripe_customer_id, email, full_name").eq("id",a.id).single();console.log("[v0] User profile:",o);let s=o?.stripe_customer_id;s||(console.log("[v0] Creating new Stripe customer"),s=(await y.stripe.customers.create({email:o?.email||a.email,name:o?.full_name,metadata:{supabase_user_id:a.id}})).id,console.log("[v0] Created customer:",s),await n.from("user_profiles").update({stripe_customer_id:s}).eq("id",a.id));let d=r.interval&&"one-time"!==r.interval;console.log("[v0] Creating checkout session, mode:",d?"subscription":"payment");let l=await y.stripe.checkout.sessions.create({customer:s,mode:d?"subscription":"payment",line_items:[{price_data:{currency:"usd",product_data:{name:r.name,description:r.description},unit_amount:Math.round(100*r.price),...d?{recurring:{interval:r.interval}}:{}},quantity:1}],success_url:`https://taxu.io/dashboard/subscription?success=true&${t?`plan=${t}`:`addon=${i}`}`,cancel_url:"https://taxu.io/dashboard/subscription?canceled=true",metadata:{supabase_user_id:a.id,...t?{plan_id:t,planId:t}:{},...i?{addon_id:i,addOnId:i}:{}}});return console.log("[v0] Checkout session created:",l.id),x.NextResponse.json({url:l.url})}catch(e){return console.error("[v0] Checkout error:",e),x.NextResponse.json({error:"Failed to create checkout session",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}e.s(["POST",0,C],156863);var I=e.i(156863);let w=new t.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/checkout/route",pathname:"/api/checkout",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/taxu-platform/v0-taxu-landing-page/app/api/checkout/route.ts",nextConfigOutput:"",userland:I}),{workAsyncStorage:P,workUnitAsyncStorage:E,serverHooks:k}=w;async function S(e,t,r){w.isDev&&(0,n.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let x="/api/checkout/route";x=x.replace(/\/index$/,"")||"/";let y=await w.prepare(e,t,{srcPage:x,multiZoneDraftMode:!1});if(!y)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:_,params:R,nextConfig:b,parsedUrl:C,isDraftMode:I,prerenderManifest:P,routerServerContext:E,isOnDemandRevalidate:k,revalidateOnlyGenerated:S,resolvedPathname:A,clientReferenceManifest:T,serverActionsManifest:N}=y,$=(0,s.normalizeAppPath)(x),D=!!(P.dynamicRoutes[$]||P.routes[A]),O=async()=>((null==E?void 0:E.render404)?await E.render404(e,t,C,!1):t.end("This page could not be found"),null);if(D&&!I){let e=!!P.routes[A],t=P.dynamicRoutes[$];if(t&&!1===t.fallback&&!e){if(b.experimental.adapterPath)return await O();throw new h.NoFallbackError}}let M=null;!D||w.isDev||I||(M="/index"===(M=A)?"/":M);let F=!0===w.isDev||!D,U=D&&!F;N&&T&&(0,o.setManifestsSingleton)({page:x,clientReferenceManifest:T,serverActionsManifest:N});let q=e.method||"GET",H=(0,a.getTracer)(),j=H.getActiveScopeSpan(),B={params:R,prerenderManifest:P,renderOpts:{experimental:{authInterrupts:!!b.experimental.authInterrupts},cacheComponents:!!b.cacheComponents,supportsDynamicResponse:F,incrementalCache:(0,n.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:b.cacheLife,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,i,r,n)=>w.onRequestError(e,t,r,n,E)},sharedContext:{buildId:_}},L=new d.NodeNextRequest(e),K=new d.NodeNextResponse(t),W=l.NextRequestAdapter.fromNodeNextRequest(L,(0,l.signalFromNodeResponse)(t));try{let o=async e=>w.handle(W,B).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let i=H.getRootSpanAttributes();if(!i)return;if(i.get("next.span_type")!==c.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${i.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let r=i.get("next.route");if(r){let t=`${q} ${r}`;e.setAttributes({"next.route":r,"http.route":r,"next.span_name":t}),e.updateName(t)}else e.updateName(`${q} ${x}`)}),s=!!(0,n.getRequestMeta)(e,"minimalMode"),d=async n=>{var a,d;let l=async({previousCacheEntry:i})=>{try{if(!s&&k&&S&&!i)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let a=await o(n);e.fetchMetrics=B.renderOpts.fetchMetrics;let d=B.renderOpts.pendingWaitUntil;d&&r.waitUntil&&(r.waitUntil(d),d=void 0);let l=B.renderOpts.collectedTags;if(!D)return await (0,p.sendResponse)(L,K,a,B.renderOpts.pendingWaitUntil),null;{let e=await a.blob(),t=(0,m.toNodeOutgoingHttpHeaders)(a.headers);l&&(t[v.NEXT_CACHE_TAGS_HEADER]=l),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let i=void 0!==B.renderOpts.collectedRevalidate&&!(B.renderOpts.collectedRevalidate>=v.INFINITE_CACHE)&&B.renderOpts.collectedRevalidate,r=void 0===B.renderOpts.collectedExpire||B.renderOpts.collectedExpire>=v.INFINITE_CACHE?void 0:B.renderOpts.collectedExpire;return{value:{kind:f.CachedRouteKind.APP_ROUTE,status:a.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:i,expire:r}}}}catch(t){throw(null==i?void 0:i.isStale)&&await w.onRequestError(e,t,{routerKind:"App Router",routePath:x,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:U,isOnDemandRevalidate:k})},!1,E),t}},c=await w.handleResponse({req:e,nextConfig:b,cacheKey:M,routeKind:i.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:P,isRoutePPREnabled:!1,isOnDemandRevalidate:k,revalidateOnlyGenerated:S,responseGenerator:l,waitUntil:r.waitUntil,isMinimalMode:s});if(!D)return null;if((null==c||null==(a=c.value)?void 0:a.kind)!==f.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==c||null==(d=c.value)?void 0:d.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});s||t.setHeader("x-nextjs-cache",k?"REVALIDATED":c.isMiss?"MISS":c.isStale?"STALE":"HIT"),I&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let h=(0,m.fromNodeOutgoingHttpHeaders)(c.value.headers);return s&&D||h.delete(v.NEXT_CACHE_TAGS_HEADER),!c.cacheControl||t.getHeader("Cache-Control")||h.get("Cache-Control")||h.set("Cache-Control",(0,g.getCacheControlHeader)(c.cacheControl)),await (0,p.sendResponse)(L,K,new Response(c.value.body,{headers:h,status:c.value.status||200})),null};j?await d(j):await H.withPropagatedContext(e.headers,()=>H.trace(c.BaseServerSpan.handleRequest,{spanName:`${q} ${x}`,kind:a.SpanKind.SERVER,attributes:{"http.method":q,"http.target":e.url}},d))}catch(t){if(t instanceof h.NoFallbackError||await w.onRequestError(e,t,{routerKind:"App Router",routePath:$,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:U,isOnDemandRevalidate:k})},!1,E),D)throw t;return await (0,p.sendResponse)(L,K,new Response(null,{status:500})),null}}e.s(["handler",0,S,"patchFetch",0,function(){return(0,r.patchFetch)({workAsyncStorage:P,workUnitAsyncStorage:E})},"routeModule",0,w,"serverHooks",0,k,"workAsyncStorage",0,P,"workUnitAsyncStorage",0,E],811492)}];

//# sourceMappingURL=9f3ab_next_dist_esm_build_templates_app-route_cdb8e1b1.js.map