module.exports=[81111,(e,r,t)=>{r.exports=e.x("node:stream",()=>require("node:stream"))},575130,(e,r,t)=>{"use strict";var n=function(e){var r,t,n;return!!(r=e)&&"object"==typeof r&&(t=e,"[object RegExp]"!==(n=Object.prototype.toString.call(t))&&"[object Date]"!==n&&t.$$typeof!==i)},i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function a(e,r){return!1!==r.clone&&r.isMergeableObject(e)?d(Array.isArray(e)?[]:{},e,r):e}function s(e,r,t){return e.concat(r).map(function(e){return a(e,t)})}function o(e){return Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(r){return Object.propertyIsEnumerable.call(e,r)}):[])}function c(e,r){try{return r in e}catch(e){return!1}}function d(e,r,t){(t=t||{}).arrayMerge=t.arrayMerge||s,t.isMergeableObject=t.isMergeableObject||n,t.cloneUnlessOtherwiseSpecified=a;var i,l,p=Array.isArray(r);return p!==Array.isArray(e)?a(r,t):p?t.arrayMerge(e,r,t):(l={},(i=t).isMergeableObject(e)&&o(e).forEach(function(r){l[r]=a(e[r],i)}),o(r).forEach(function(t){c(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))||(c(e,t)&&i.isMergeableObject(r[t])?l[t]=(function(e,r){if(!r.customMerge)return d;var t=r.customMerge(e);return"function"==typeof t?t:d})(t,i)(e[t],r[t],i):l[t]=a(r[t],i))}),l)}d.all=function(e,r){if(!Array.isArray(e))throw Error("first argument should be an array");return e.reduce(function(e,t){return d(e,t,r)},{})},r.exports=d},386584,e=>{"use strict";var r=e.i(652864);e.s(["FilingStatusEmail",0,function({userName:e,filingType:t,status:n,submissionId:i,refundAmount:a,rejectionReasons:s,dashboardUrl:o}){return(0,r.jsxs)("html",{children:[(0,r.jsx)("head",{children:(0,r.jsx)("style",{children:`
          body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 0; padding: 0; background: #f3f4f6; }
          .container { max-width: 600px; margin: 40px auto; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
          .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 40px 30px; text-align: center; }
          .header h1 { color: white; margin: 0; font-size: 28px; }
          .content { padding: 40px 30px; }
          .status-badge { display: inline-block; padding: 12px 24px; border-radius: 8px; font-weight: 600; margin: 20px 0; }
          .button { display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 14px 32px; border-radius: 8px; text-decoration: none; font-weight: 600; margin: 20px 0; }
          .footer { background: #f9fafb; padding: 30px; text-align: center; color: #6b7280; font-size: 14px; }
          .rejection-list { background: #fef2f2; border-left: 4px solid #ef4444; padding: 16px; margin: 20px 0; border-radius: 4px; }
        `})}),(0,r.jsx)("body",{children:(0,r.jsxs)("div",{className:"container",children:[(0,r.jsx)("div",{className:"header",children:(0,r.jsx)("h1",{children:"Taxu"})}),(0,r.jsxs)("div",{className:"content",children:[(0,r.jsxs)("h2",{children:["Hi ",e,","]}),(0,r.jsx)("p",{style:{fontSize:"16px",lineHeight:"1.6",color:"#374151"},children:{accepted:"Your tax return has been accepted by the IRS! ðŸŽ‰",rejected:"Your tax return was rejected and needs attention.",pending:"Your tax return is being processed."}[n]}),(0,r.jsxs)("div",{className:"status-badge",style:{background:{accepted:"#10b981",rejected:"#ef4444",pending:"#f59e0b"}[n],color:"white"},children:[n.toUpperCase()," - ",t]}),(0,r.jsxs)("p",{style:{color:"#6b7280",fontSize:"14px"},children:["Submission ID: ",i]}),"accepted"===n&&a&&a>0&&(0,r.jsxs)("div",{style:{background:"#f0fdf4",padding:"20px",borderRadius:"8px",margin:"20px 0"},children:[(0,r.jsx)("p",{style:{margin:0,fontSize:"14px",color:"#166534"},children:"Expected Refund"}),(0,r.jsxs)("p",{style:{margin:"8px 0 0 0",fontSize:"32px",fontWeight:"bold",color:"#15803d"},children:["$",a.toLocaleString()]})]}),"rejected"===n&&s&&s.length>0&&(0,r.jsxs)("div",{className:"rejection-list",children:[(0,r.jsx)("p",{style:{fontWeight:"600",color:"#991b1b",margin:"0 0 12px 0"},children:"Rejection Reasons:"}),(0,r.jsx)("ul",{style:{margin:0,paddingLeft:"20px",color:"#7f1d1d"},children:s.map((e,t)=>(0,r.jsx)("li",{style:{marginBottom:"8px"},children:e},t))})]}),(0,r.jsx)("a",{href:o,className:"button",children:"View in Dashboard"}),(0,r.jsxs)("p",{style:{fontSize:"14px",color:"#6b7280",marginTop:"30px"},children:["accepted"===n&&"Your refund will be processed by the IRS within 21 days.","rejected"===n&&"Please review the rejection reasons and resubmit your corrected return.","pending"===n&&"We'll notify you as soon as the IRS processes your return."]})]}),(0,r.jsxs)("div",{className:"footer",children:[(0,r.jsx)("p",{children:"Â© 2025 Taxu. All rights reserved."}),(0,r.jsx)("p",{children:(0,r.jsx)("a",{href:`${o}/settings/notifications`,style:{color:"#667eea"},children:"Manage email preferences"})})]})]})})]})}])},106171,e=>{"use strict";var r=e.i(652864);e.s(["DocumentProcessedEmail",0,function({userName:e,documentName:t,documentType:n,extractedData:i,dashboardUrl:a}){return(0,r.jsxs)("html",{children:[(0,r.jsx)("head",{children:(0,r.jsx)("style",{children:`
          body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 0; padding: 0; background: #f3f4f6; }
          .container { max-width: 600px; margin: 40px auto; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
          .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 40px 30px; text-align: center; }
          .header h1 { color: white; margin: 0; font-size: 28px; }
          .content { padding: 40px 30px; }
          .data-card { background: #f9fafb; border-radius: 8px; padding: 20px; margin: 20px 0; }
          .button { display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 14px 32px; border-radius: 8px; text-decoration: none; font-weight: 600; margin: 20px 0; }
          .footer { background: #f9fafb; padding: 30px; text-align: center; color: #6b7280; font-size: 14px; }
        `})}),(0,r.jsx)("body",{children:(0,r.jsxs)("div",{className:"container",children:[(0,r.jsx)("div",{className:"header",children:(0,r.jsx)("h1",{children:"Taxu"})}),(0,r.jsxs)("div",{className:"content",children:[(0,r.jsxs)("h2",{children:["Hi ",e,","]}),(0,r.jsx)("p",{style:{fontSize:"16px",lineHeight:"1.6",color:"#374151"},children:"Your document has been processed successfully! âœ¨"}),(0,r.jsxs)("div",{className:"data-card",children:[(0,r.jsx)("p",{style:{fontWeight:"600",margin:"0 0 12px 0",color:"#111827"},children:"Document Details"}),(0,r.jsxs)("p",{style:{margin:"8px 0",color:"#6b7280"},children:[(0,r.jsx)("strong",{children:"Name:"})," ",t]}),(0,r.jsxs)("p",{style:{margin:"8px 0",color:"#6b7280"},children:[(0,r.jsx)("strong",{children:"Type:"})," ",n]})]}),Object.keys(i).length>0&&(0,r.jsxs)("div",{className:"data-card",children:[(0,r.jsx)("p",{style:{fontWeight:"600",margin:"0 0 12px 0",color:"#111827"},children:"Extracted Information"}),Object.entries(i).map(([e,t])=>(0,r.jsxs)("p",{style:{margin:"8px 0",color:"#6b7280"},children:[(0,r.jsxs)("strong",{children:[e,":"]})," ",String(t)]},e))]}),(0,r.jsx)("a",{href:a,className:"button",children:"View Document"}),(0,r.jsx)("p",{style:{fontSize:"14px",color:"#6b7280",marginTop:"30px"},children:"Review the extracted data and use it to file your taxes or add it to your accounting records."})]}),(0,r.jsxs)("div",{className:"footer",children:[(0,r.jsx)("p",{children:"Â© 2025 Taxu. All rights reserved."}),(0,r.jsx)("p",{children:(0,r.jsx)("a",{href:`${a}/settings/notifications`,style:{color:"#667eea"},children:"Manage email preferences"})})]})]})})]})}])},171592,e=>e.a(async(r,t)=>{try{var n=e.i(110043),i=e.i(2917),a=e.i(386584),s=e.i(106171),o=r([i]);[i]=o.then?(await o)():o;let p=process.env.RESEND_API_KEY;async function c({to:e,subject:r,html:t,userId:i,emailType:a}){try{let s=await fetch("https://api.resend.com/emails",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify({from:"Taxu <notifications@taxu.io>",to:e,subject:r,html:t})}),o=await s.json();if(!s.ok)throw Error(o.message||"Failed to send email");let c=await (0,n.createClient)();return await c.from("email_logs").insert({user_id:i,email_to:e,email_type:a,subject:r,status:"sent",provider_id:o.id}),console.log("[v0] âœ… Email sent successfully:",o.id),{success:!0,id:o.id}}catch(t){if(console.error("[v0] âŒ Failed to send email:",t),i){let s=await (0,n.createClient)();await s.from("email_logs").insert({user_id:i,email_to:e,email_type:a,subject:r,status:"failed",error_message:t instanceof Error?t.message:"Unknown error"})}return{success:!1,error:t}}}async function d(e,r,t,s){let o=await (0,n.createClient)(),{data:d}=await o.from("email_preferences").select("*").eq("user_id",e).single();if(d&&!d.filing_updates)return void console.log("[v0] User has disabled filing update emails");let l=(0,i.render)((0,a.FilingStatusEmail)({userName:t,filingType:s.form_type,status:s.filing_status,submissionId:s.submission_id,refundAmount:s.refund_amount,rejectionReasons:s.rejection_reasons,dashboardUrl:`https://taxu.io/dashboard/filing/${s.id}`})),p="accepted"===s.filing_status?"Accepted":"rejected"===s.filing_status?"Rejected":"Updated";await c({to:r,subject:`Your ${s.form_type} Filing Has Been ${p}`,html:l,userId:e,emailType:"filing_status"})}async function l(e,r,t,a){let o=await (0,n.createClient)(),{data:d}=await o.from("email_preferences").select("*").eq("user_id",e).single();if(d&&!d.document_processing)return void console.log("[v0] User has disabled document processing emails");let l=(0,i.render)((0,s.DocumentProcessedEmail)({userName:t,documentName:a.file_name,documentType:a.document_type,extractedData:a.extracted_data||{},dashboardUrl:`https://taxu.io/dashboard/documents/${a.id}`}));await c({to:r,subject:`Your ${a.document_type} Has Been Processed`,html:l,userId:e,emailType:"document_processed"})}e.s(["sendDocumentProcessedEmail",0,l,"sendEmail",0,c,"sendFilingStatusEmail",0,d]),t()}catch(e){t(e)}},!1),200763,e=>{e.v(r=>Promise.all(["server/chunks/[externals]__b0bdb7db._.js","server/chunks/[root-of-the-server]__ca1fbb6d._.js"].map(r=>e.l(r))).then(()=>r(231811)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__59cc7dc5._.js.map