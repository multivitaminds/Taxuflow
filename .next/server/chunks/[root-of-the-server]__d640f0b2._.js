module.exports=[918622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},556704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},832319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},324725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},193695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},577779,(e,t,r)=>{"use strict";t.exports=e.r(918622)},958492,(e,t,r)=>{"use strict";t.exports=e.r(577779).vendored["react-rsc"].React},464811,(e,t,r)=>{"use strict";var n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,o={},l={RequestCookies:()=>h,ResponseCookies:()=>f,parseCookie:()=>u,parseSetCookie:()=>p,stringifyCookie:()=>d};for(var c in l)n(o,c,{get:l[c],enumerable:!0});function d(e){var t;let r=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`,"partitioned"in e&&e.partitioned&&"Partitioned","priority"in e&&e.priority&&`Priority=${e.priority}`].filter(Boolean),n=`${e.name}=${encodeURIComponent(null!=(t=e.value)?t:"")}`;return 0===r.length?n:`${n}; ${r.join("; ")}`}function u(e){let t=new Map;for(let r of e.split(/; */)){if(!r)continue;let e=r.indexOf("=");if(-1===e){t.set(r,"true");continue}let[n,i]=[r.slice(0,e),r.slice(e+1)];try{t.set(n,decodeURIComponent(null!=i?i:"true"))}catch{}}return t}function p(e){if(!e)return;let[[t,r],...n]=u(e),{domain:i,expires:a,httponly:s,maxage:o,path:l,samesite:c,secure:d,partitioned:p,priority:h}=Object.fromEntries(n.map(([e,t])=>[e.toLowerCase().replace(/-/g,""),t]));{var f,y,_={name:t,value:decodeURIComponent(r),domain:i,...a&&{expires:new Date(a)},...s&&{httpOnly:!0},..."string"==typeof o&&{maxAge:Number(o)},path:l,...c&&{sameSite:m.includes(f=(f=c).toLowerCase())?f:void 0},...d&&{secure:!0},...h&&{priority:g.includes(y=(y=h).toLowerCase())?y:void 0},...p&&{partitioned:!0}};let e={};for(let t in _)_[t]&&(e[t]=_[t]);return e}}t.exports=((e,t,r,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))s.call(e,r)||void 0===r||n(e,r,{get:()=>t[r],enumerable:!(o=i(t,r))||o.enumerable});return e})(n({},"__esModule",{value:!0}),o);var m=["strict","lax","none"],g=["low","medium","high"],h=class{constructor(e){this._parsed=new Map,this._headers=e;const t=e.get("cookie");if(t)for(const[e,r]of u(t))this._parsed.set(e,{name:e,value:r})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed);if(!e.length)return r.map(([e,t])=>t);let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(([e])=>e===n).map(([e,t])=>t)}has(e){return this._parsed.has(e)}set(...e){let[t,r]=1===e.length?[e[0].name,e[0].value]:e,n=this._parsed;return n.set(t,{name:t,value:r}),this._headers.set("cookie",Array.from(n).map(([e,t])=>d(t)).join("; ")),this}delete(e){let t=this._parsed,r=Array.isArray(e)?e.map(e=>t.delete(e)):t.delete(e);return this._headers.set("cookie",Array.from(t).map(([e,t])=>d(t)).join("; ")),r}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(e=>`${e.name}=${encodeURIComponent(e.value)}`).join("; ")}},f=class{constructor(e){var t,r,n;this._parsed=new Map,this._headers=e;const i=null!=(n=null!=(r=null==(t=e.getSetCookie)?void 0:t.call(e))?r:e.get("set-cookie"))?n:[];for(const e of Array.isArray(i)?i:function(e){if(!e)return[];var t,r,n,i,a,s=[],o=0;function l(){for(;o<e.length&&/\s/.test(e.charAt(o));)o+=1;return o<e.length}for(;o<e.length;){for(t=o,a=!1;l();)if(","===(r=e.charAt(o))){for(n=o,o+=1,l(),i=o;o<e.length&&"="!==(r=e.charAt(o))&&";"!==r&&","!==r;)o+=1;o<e.length&&"="===e.charAt(o)?(a=!0,o=i,s.push(e.substring(t,n)),t=o):o=n+1}else o+=1;(!a||o>=e.length)&&s.push(e.substring(t,e.length))}return s}(i)){const t=p(e);t&&this._parsed.set(t.name,t)}}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed.values());if(!e.length)return r;let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(e=>e.name===n)}has(e){return this._parsed.has(e)}set(...e){let[t,r,n]=1===e.length?[e[0].name,e[0].value,e[0]]:e,i=this._parsed;return i.set(t,function(e={name:"",value:""}){return"number"==typeof e.expires&&(e.expires=new Date(e.expires)),e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),(null===e.path||void 0===e.path)&&(e.path="/"),e}({name:t,value:r,...n})),function(e,t){for(let[,r]of(t.delete("set-cookie"),e)){let e=d(r);t.append("set-cookie",e)}}(i,this._headers),this}delete(...e){let[t,r]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0]];return this.set({...r,name:t,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(d).join("; ")}}},456699,e=>{"use strict";e.i(929961);var t=e.i(771884),r=e.i(666753);async function n(){let e=await (0,r.cookies)(),n=process.env.NEXT_PUBLIC_SUPABASE_URL||process.env.SUPABASE_URL,i=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||process.env.SUPABASE_ANON_KEY;return n&&i?(0,t.createServerClient)(n,i,{cookies:{getAll:()=>e.getAll(),setAll(t){try{t.forEach(({name:t,value:r,options:n})=>e.set(t,r,n))}catch{}}}}):(console.log("[v0] Running in preview mode without Supabase configuration"),null)}async function i(){return n()}async function a(){try{return await n()}catch(e){return console.error("[v0] Failed to create Supabase client:",e),null}}e.s(["createClient",0,n,"createClientSafe",0,a,"getSupabaseServerClient",0,i])},773939,(e,t,r)=>{"use strict";var n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,o={},l={VercelOidcTokenError:()=>d};for(var c in l)n(o,c,{get:l[c],enumerable:!0});t.exports=((e,t,r,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))s.call(e,r)||void 0===r||n(e,r,{get:()=>t[r],enumerable:!(o=i(t,r))||o.enumerable});return e})(n({},"__esModule",{value:!0}),o);class d extends Error{constructor(e,t){super(e),this.name="VercelOidcTokenError",this.cause=t}toString(){return this.cause?`${this.name}: ${this.message}: ${this.cause}`:`${this.name}: ${this.message}`}}},700469,e=>{"use strict";e.s([],172340),e.i(172340);var t=e.i(913297),r=e.i(768667);e.s(["defaultErrorMap",()=>r.default,"getErrorMap",()=>t.getErrorMap,"setErrorMap",()=>t.setErrorMap],330523),e.i(330523);var n=e.i(506686);e.s([],924389),e.i(924389);var i=e.i(116013),a=e.i(291478),s=e.i(332218);e.s(["BRAND",()=>a.BRAND,"DIRTY",()=>n.DIRTY,"EMPTY_PATH",()=>n.EMPTY_PATH,"INVALID",()=>n.INVALID,"NEVER",()=>a.NEVER,"OK",()=>n.OK,"ParseStatus",()=>n.ParseStatus,"Schema",()=>a.Schema,"ZodAny",()=>a.ZodAny,"ZodArray",()=>a.ZodArray,"ZodBigInt",()=>a.ZodBigInt,"ZodBoolean",()=>a.ZodBoolean,"ZodBranded",()=>a.ZodBranded,"ZodCatch",()=>a.ZodCatch,"ZodDate",()=>a.ZodDate,"ZodDefault",()=>a.ZodDefault,"ZodDiscriminatedUnion",()=>a.ZodDiscriminatedUnion,"ZodEffects",()=>a.ZodEffects,"ZodEnum",()=>a.ZodEnum,"ZodError",()=>s.ZodError,"ZodFirstPartyTypeKind",()=>a.ZodFirstPartyTypeKind,"ZodFunction",()=>a.ZodFunction,"ZodIntersection",()=>a.ZodIntersection,"ZodIssueCode",()=>s.ZodIssueCode,"ZodLazy",()=>a.ZodLazy,"ZodLiteral",()=>a.ZodLiteral,"ZodMap",()=>a.ZodMap,"ZodNaN",()=>a.ZodNaN,"ZodNativeEnum",()=>a.ZodNativeEnum,"ZodNever",()=>a.ZodNever,"ZodNull",()=>a.ZodNull,"ZodNullable",()=>a.ZodNullable,"ZodNumber",()=>a.ZodNumber,"ZodObject",()=>a.ZodObject,"ZodOptional",()=>a.ZodOptional,"ZodParsedType",()=>i.ZodParsedType,"ZodPipeline",()=>a.ZodPipeline,"ZodPromise",()=>a.ZodPromise,"ZodReadonly",()=>a.ZodReadonly,"ZodRecord",()=>a.ZodRecord,"ZodSchema",()=>a.ZodSchema,"ZodSet",()=>a.ZodSet,"ZodString",()=>a.ZodString,"ZodSymbol",()=>a.ZodSymbol,"ZodTransformer",()=>a.ZodTransformer,"ZodTuple",()=>a.ZodTuple,"ZodType",()=>a.ZodType,"ZodUndefined",()=>a.ZodUndefined,"ZodUnion",()=>a.ZodUnion,"ZodUnknown",()=>a.ZodUnknown,"ZodVoid",()=>a.ZodVoid,"addIssueToContext",()=>n.addIssueToContext,"any",()=>a.any,"array",()=>a.array,"bigint",()=>a.bigint,"boolean",()=>a.boolean,"coerce",()=>a.coerce,"custom",()=>a.custom,"date",()=>a.date,"datetimeRegex",()=>a.datetimeRegex,"defaultErrorMap",()=>r.default,"discriminatedUnion",()=>a.discriminatedUnion,"effect",()=>a.effect,"enum",()=>a.enum,"function",()=>a.function,"getErrorMap",()=>t.getErrorMap,"getParsedType",()=>i.getParsedType,"instanceof",()=>a.instanceof,"intersection",()=>a.intersection,"isAborted",()=>n.isAborted,"isAsync",()=>n.isAsync,"isDirty",()=>n.isDirty,"isValid",()=>n.isValid,"late",()=>a.late,"lazy",()=>a.lazy,"literal",()=>a.literal,"makeIssue",()=>n.makeIssue,"map",()=>a.map,"nan",()=>a.nan,"nativeEnum",()=>a.nativeEnum,"never",()=>a.never,"null",()=>a.null,"nullable",()=>a.nullable,"number",()=>a.number,"object",()=>a.object,"objectUtil",()=>i.objectUtil,"oboolean",()=>a.oboolean,"onumber",()=>a.onumber,"optional",()=>a.optional,"ostring",()=>a.ostring,"pipeline",()=>a.pipeline,"preprocess",()=>a.preprocess,"promise",()=>a.promise,"quotelessJson",()=>s.quotelessJson,"record",()=>a.record,"set",()=>a.set,"setErrorMap",()=>t.setErrorMap,"strictObject",()=>a.strictObject,"string",()=>a.string,"symbol",()=>a.symbol,"transformer",()=>a.transformer,"tuple",()=>a.tuple,"undefined",()=>a.undefined,"union",()=>a.union,"unknown",()=>a.unknown,"util",()=>i.util,"void",()=>a.void],747981);var o=e.i(747981);e.s(["z",0,o],700469)},271928,e=>{"use strict";var t=e.i(573703),r=e.i(700469);let n={Sam:{name:"Sam",role:"Lead Tax Strategist",personality:"Calm, intelligent, authoritative. Acts as the central brain, coordinating other agents and seeing the big picture.",expertise:["Tax strategy","Risk management","Deduction optimization","IRS compliance"],communication_style:"Professional, clear, and structured",decision_making:"Holistic and strategic"},Sophie:{name:"Sophie",role:"Filing Assistant",personality:"Friendly, patient, organized. Focuses on helping the user complete tasks and feel supported.",expertise:["Tax forms","Document requirements","Filing checklists","Progress tracking"],communication_style:"Warm, encouraging, and simple",decision_making:"Process-oriented and helpful"},Miles:{name:"Miles",role:"Audit Risk Monitor",personality:"Analytical, cautious, alert. Constantly scanning for risks and anomalies.",expertise:["Audit prevention","Risk analysis","IRS compliance","Pattern recognition"],communication_style:"Direct, serious, and precise",decision_making:"Risk-averse and protective"},Nia:{name:"Nia",role:"Document Intelligence Agent",personality:"Efficient, fast, sharp. Obsessed with data accuracy and extraction speed.",expertise:["OCR processing","Data extraction","Form recognition","Field validation"],communication_style:"Brief, factual, and data-centric",decision_making:"Data-driven and binary (valid/invalid)"},Remy:{name:"Remy",role:"Smart Reminder Agent",personality:"Helpful, timely, upbeat. Focused on keeping the user on schedule.",expertise:["Deadline management","Task scheduling","Progress tracking","Notification timing"],communication_style:"Cheerful, urgent (when needed), and clear",decision_making:"Time-sensitive and action-oriented"},Lex:{name:"Lex",role:"Legal & Compliance Watchdog",personality:"Precise, serious, protective. The final check for legality and compliance.",expertise:["Tax law","IRS regulations","Legal compliance","Disclaimer management"],communication_style:"Formal, cited, and authoritative",decision_making:"Compliance-driven and rigid"}};e.s(["AGENT_PERSONALITIES",0,n,"AgentCollaboration",0,class{supabase;userId;constructor(e,t){this.supabase=e,this.userId=t}async initiateCollaboration(e,i,a,s){console.log(`[Collaboration] Initiating ${e} with agents:`,i.join(", "));let o=i.map(e=>{let t=n[e];return`${t.name} (${t.role}): ${t.personality}`}),l=`You are facilitating a collaboration between multiple AI tax agents. Each agent has unique expertise and personality.

Participating Agents:
${o.join("\n")}

Collaboration Type: ${e}
Trigger Event: ${a}
Context: ${JSON.stringify(s,null,2)}

Simulate a brief but insightful discussion between these agents. Each agent should:
1. Contribute their unique perspective based on their expertise
2. Build on others' insights
3. Identify potential conflicts or risks
4. Reach a consensus recommendation

Return a JSON object with:
{
  "discussion_summary": "Brief summary of the key points discussed",
  "consensus_reached": true/false,
  "recommendations": [
    {
      "agent": "agent_name",
      "recommendation": "specific recommendation",
      "reasoning": "why this is recommended",
      "priority": "high/medium/low"
    }
  ],
  "impact_score": 0-100,
  "next_steps": ["action 1", "action 2"]
}

Make the discussion realistic, insightful, and actionable.`;try{let{object:n}=await (0,t.generateObject)({model:"openai/gpt-4o",schema:r.z.object({discussion_summary:r.z.string(),consensus_reached:r.z.boolean(),recommendations:r.z.array(r.z.object({agent:r.z.string(),recommendation:r.z.string(),reasoning:r.z.string(),priority:r.z.enum(["high","medium","low"])})),impact_score:r.z.number().min(0).max(100),next_steps:r.z.array(r.z.string())}),prompt:l}),{data:s,error:o}=await this.supabase.from("agent_collaborations").insert({user_id:this.userId,collaboration_type:e,participating_agents:i,trigger_event:a,discussion_summary:n.discussion_summary,consensus_reached:n.consensus_reached,recommendations:n.recommendations,impact_score:n.impact_score,completed_at:new Date().toISOString()}).select().single();return{success:!0,collaboration:s,result:n}}catch(e){return console.error("[Collaboration] Error:",e),{success:!1,error:e}}}},"AgentMemory",0,class{supabase;userId;agentName;constructor(e,t,r){this.supabase=e,this.userId=t,this.agentName=r}async remember(e,t,r=[]){let{data:n,error:i}=await this.supabase.from("agent_memory").insert({user_id:this.userId,agent_name:this.agentName,memory_type:e,memory_content:t,tags:r,confidence_score:100,relevance_score:100}).select().single();return i?(console.error(`[${this.agentName}] Error storing memory:`,i),null):n}async recall(e,t,r=10){let n=this.supabase.from("agent_memory").select("*").eq("user_id",this.userId).eq("agent_name",this.agentName).order("relevance_score",{ascending:!1}).order("last_accessed_at",{ascending:!1}).limit(r);e&&(n=n.eq("memory_type",e)),t&&t.length>0&&(n=n.contains("tags",t));let{data:i,error:a}=await n;if(a)return console.error(`[${this.agentName}] Error recalling memory:`,a),[];if(i&&i.length>0){let e=i.map(e=>e.id);await this.supabase.from("agent_memory").update({last_accessed_at:new Date().toISOString(),access_count:this.supabase.rpc("increment",{row_id:e})}).in("id",e)}return i||[]}async learn(e,t,r){await this.supabase.from("agent_learning_events").insert({user_id:this.userId,agent_name:this.agentName,learning_type:e,context:t,lesson_learned:r,confidence_before:70,confidence_after:90,applied_to_future:!0})}},"InsightGenerator",0,class{supabase;userId;constructor(e,t){this.supabase=e,this.userId=t}async generateInsights(e){console.log("[Insights] Generating intelligent insights...");let r=`You are an advanced AI tax intelligence system analyzing a user's complete tax situation.

Context:
${JSON.stringify(e,null,2)}

Generate 3-5 intelligent insights that go beyond basic analysis. Look for:
1. Hidden opportunities the user might not know about
2. Potential risks or red flags
3. Trends or patterns in their tax situation
4. Predictions about future tax implications
5. Anomalies that need attention

Return a JSON array of insights:
[
  {
    "insight_type": "opportunity|risk|trend|anomaly|prediction",
    "title": "Brief, compelling title",
    "description": "Detailed explanation of the insight",
    "supporting_data": {"key": "value"},
    "confidence_level": 0-100,
    "impact_level": "low|medium|high|critical",
    "actionable": true/false,
    "suggested_actions": ["action 1", "action 2"],
    "generated_by": "agent_name"
  }
]

Be specific, actionable, and insightful. These insights should make the user say "Wow, I didn't know that!"`;try{let{text:e}=await (0,t.generateText)({model:"openai/gpt-4o",prompt:r,maxTokens:2e3}),n=e.trim();n.startsWith("```")&&(n=(n=(n=n.replace(/^```(?:json)?\n?/,"")).replace(/\n?```$/,"")).trim());let i=JSON.parse(n);for(let e of i)await this.supabase.from("intelligent_insights").insert({user_id:this.userId,...e});return i}catch(e){return console.error("[Insights] Error generating insights:",e),[]}}},"PredictiveTaxModel",0,class{supabase;userId;constructor(e,t){this.supabase=e,this.userId=t}async predictRefund(e,r){console.log("[Prediction] Generating refund prediction model...");let n=`You are a predictive AI model analyzing tax data to forecast future refunds.

Historical Data:
${JSON.stringify(e,null,2)}

Current Data:
${JSON.stringify(r,null,2)}

Generate a sophisticated prediction model that considers:
1. Historical trends
2. Income changes
3. Deduction patterns
4. Tax law changes
5. Life events
6. Economic factors

Return a JSON object:
{
  "predicted_refund": 0.00,
  "confidence_interval": {
    "low": 0.00,
    "high": 0.00,
    "confidence_level": 95
  },
  "factors_considered": ["factor 1", "factor 2"],
  "key_assumptions": ["assumption 1", "assumption 2"],
  "sensitivity_analysis": {
    "income_change_10_percent": {"refund_impact": 0.00},
    "additional_deduction_5000": {"refund_impact": 0.00}
  },
  "recommendations": ["recommendation 1", "recommendation 2"]
}

Be data-driven, realistic, and provide actionable insights.`;try{let{text:e}=await (0,t.generateText)({model:"openai/gpt-4o",prompt:n,maxTokens:2e3}),r=e.trim();r.startsWith("```")&&(r=(r=(r=r.replace(/^```(?:json)?\n?/,"")).replace(/\n?```$/,"")).trim());let i=JSON.parse(r);return await this.supabase.from("predictive_tax_models").insert({user_id:this.userId,model_type:"refund_prediction",prediction_data:i,confidence_interval:i.confidence_interval,factors_considered:i.factors_considered,created_by:"Leo",valid_until:new Date(Date.now()+7776e6).toISOString()}),i}catch(e){return console.error("[Prediction] Error generating prediction:",e),null}}},"TaxOptimizationEngine",0,class{supabase;userId;constructor(e,t){this.supabase=e,this.userId=t}async findOptimizations(e){console.log("[Optimization] Finding advanced tax optimization strategies...");let r=`You are an expert tax optimization AI analyzing a user's complete tax situation to find sophisticated strategies.

Tax Data:
${JSON.stringify(e,null,2)}

Identify 5-10 advanced tax optimization strategies. Consider:
1. Timing strategies (when to recognize income/deductions)
2. Structural strategies (business entity optimization)
3. Investment strategies (tax-loss harvesting, qualified dividends)
4. Retirement strategies (401k, IRA, HSA optimization)
5. Charitable giving strategies
6. Real estate strategies
7. Multi-year planning strategies

Return a JSON array:
[
  {
    "strategy_name": "Name of strategy",
    "strategy_type": "deduction|credit|timing|structure|investment",
    "description": "Detailed explanation",
    "potential_savings": 0.00,
    "implementation_difficulty": "easy|moderate|complex",
    "time_horizon": "immediate|this_year|multi_year",
    "requirements": {"requirement": "details"},
    "steps": [{"step": 1, "action": "what to do"}],
    "risks": [{"risk": "potential downside"}],
    "recommended_by": "Riley",
    "priority_score": 0-100
  }
]

Be creative, sophisticated, and practical. These should be strategies that most people don't know about.`;try{let{text:e}=await (0,t.generateText)({model:"openai/gpt-4o",prompt:r,maxTokens:3e3}),n=e.trim();n.startsWith("```")&&(n=(n=(n=n.replace(/^```(?:json)?\n?/,"")).replace(/\n?```$/,"")).trim());let i=JSON.parse(n);for(let e of i)await this.supabase.from("tax_optimization_strategies").insert({user_id:this.userId,...e,status:"suggested"});return i}catch(e){return console.error("[Optimization] Error finding strategies:",e),[]}}}])},36e3,e=>{"use strict";var t=e.i(516850),r=e.i(371100),n=e.i(397035),i=e.i(873968),a=e.i(649549),s=e.i(961840),o=e.i(153224),l=e.i(307998),c=e.i(529137),d=e.i(399762),u=e.i(650651),p=e.i(909836),m=e.i(518468),g=e.i(381254),h=e.i(808862),f=e.i(193695);e.i(164196);var y=e.i(534815),_=e.i(456699),v=e.i(861874),b=e.i(271928);async function x(e){try{let t=await (0,_.createClient)(),{data:{user:r},error:n}=await t.auth.getUser();if(n||!r)return v.NextResponse.json({error:"Unauthorized"},{status:401});let{action:i,data:a}=await e.json();switch(i){case"generate_insights":{let e=new b.InsightGenerator(t,r.id),n=await e.generateInsights(a.context);return v.NextResponse.json({success:!0,insights:n})}case"find_optimizations":{let e=new b.TaxOptimizationEngine(t,r.id),n=await e.findOptimizations(a.taxData);return v.NextResponse.json({success:!0,strategies:n})}case"predict_refund":{let e=new b.PredictiveTaxModel(t,r.id),n=await e.predictRefund(a.historicalData,a.currentData);return v.NextResponse.json({success:!0,prediction:n})}case"agent_collaboration":{let e=new b.AgentCollaboration(t,r.id),n=await e.initiateCollaboration(a.collaborationType,a.participatingAgents,a.triggerEvent,a.context);return v.NextResponse.json(n)}case"agent_memory":{let e=new b.AgentMemory(t,r.id,a.agentName);if("remember"===a.operation){let t=await e.remember(a.memoryType,a.content,a.tags);return v.NextResponse.json({success:!0,memory:t})}if("recall"===a.operation){let t=await e.recall(a.memoryType,a.tags,a.limit);return v.NextResponse.json({success:!0,memories:t})}if("learn"===a.operation)return await e.learn(a.learningType,a.context,a.lesson),v.NextResponse.json({success:!0});return v.NextResponse.json({error:"Invalid memory operation"},{status:400})}default:return v.NextResponse.json({error:"Invalid action"},{status:400})}}catch(e){return console.error("[Agent Intelligence] Error:",e),v.NextResponse.json({error:"Failed to process request",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}e.s(["POST",0,x],506411);var w=e.i(506411);let R=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/agent-intelligence/route",pathname:"/api/agent-intelligence",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/agent-intelligence/route.ts",nextConfigOutput:"",userland:w}),{workAsyncStorage:E,workUnitAsyncStorage:A,serverHooks:S}=R;async function N(e,t,n){R.isDev&&(0,i.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let _="/api/agent-intelligence/route";_=_.replace(/\/index$/,"")||"/";let v=await R.prepare(e,t,{srcPage:_,multiZoneDraftMode:!1});if(!v)return t.statusCode=400,t.end("Bad Request"),null==n.waitUntil||n.waitUntil.call(n,Promise.resolve()),null;let{buildId:b,params:x,nextConfig:w,parsedUrl:E,isDraftMode:A,prerenderManifest:S,routerServerContext:N,isOnDemandRevalidate:Z,revalidateOnlyGenerated:k,resolvedPathname:C,clientReferenceManifest:I,serverActionsManifest:O}=v,T=(0,o.normalizeAppPath)(_),P=!!(S.dynamicRoutes[T]||S.routes[C]),j=async()=>((null==N?void 0:N.render404)?await N.render404(e,t,E,!1):t.end("This page could not be found"),null);if(P&&!A){let e=!!S.routes[C],t=S.dynamicRoutes[T];if(t&&!1===t.fallback&&!e){if(w.experimental.adapterPath)return await j();throw new f.NoFallbackError}}let D=null;!P||R.isDev||A||(D="/index"===(D=C)?"/":D);let $=!0===R.isDev||!P,U=P&&!$;O&&I&&(0,s.setManifestsSingleton)({page:_,clientReferenceManifest:I,serverActionsManifest:O});let z=e.method||"GET",M=(0,a.getTracer)(),q=M.getActiveScopeSpan(),B={params:x,prerenderManifest:S,renderOpts:{experimental:{authInterrupts:!!w.experimental.authInterrupts},cacheComponents:!!w.cacheComponents,supportsDynamicResponse:$,incrementalCache:(0,i.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:w.cacheLife,waitUntil:n.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,n,i)=>R.onRequestError(e,t,n,i,N)},sharedContext:{buildId:b}},L=new l.NodeNextRequest(e),H=new l.NodeNextResponse(t),F=c.NextRequestAdapter.fromNodeNextRequest(L,(0,c.signalFromNodeResponse)(t));try{let s=async e=>R.handle(F,B).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=M.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==d.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=r.get("next.route");if(n){let t=`${z} ${n}`;e.setAttributes({"next.route":n,"http.route":n,"next.span_name":t}),e.updateName(t)}else e.updateName(`${z} ${_}`)}),o=!!(0,i.getRequestMeta)(e,"minimalMode"),l=async i=>{var a,l;let c=async({previousCacheEntry:r})=>{try{if(!o&&Z&&k&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let a=await s(i);e.fetchMetrics=B.renderOpts.fetchMetrics;let l=B.renderOpts.pendingWaitUntil;l&&n.waitUntil&&(n.waitUntil(l),l=void 0);let c=B.renderOpts.collectedTags;if(!P)return await (0,p.sendResponse)(L,H,a,B.renderOpts.pendingWaitUntil),null;{let e=await a.blob(),t=(0,m.toNodeOutgoingHttpHeaders)(a.headers);c&&(t[h.NEXT_CACHE_TAGS_HEADER]=c),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==B.renderOpts.collectedRevalidate&&!(B.renderOpts.collectedRevalidate>=h.INFINITE_CACHE)&&B.renderOpts.collectedRevalidate,n=void 0===B.renderOpts.collectedExpire||B.renderOpts.collectedExpire>=h.INFINITE_CACHE?void 0:B.renderOpts.collectedExpire;return{value:{kind:y.CachedRouteKind.APP_ROUTE,status:a.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:n}}}}catch(t){throw(null==r?void 0:r.isStale)&&await R.onRequestError(e,t,{routerKind:"App Router",routePath:_,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:U,isOnDemandRevalidate:Z})},!1,N),t}},d=await R.handleResponse({req:e,nextConfig:w,cacheKey:D,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:S,isRoutePPREnabled:!1,isOnDemandRevalidate:Z,revalidateOnlyGenerated:k,responseGenerator:c,waitUntil:n.waitUntil,isMinimalMode:o});if(!P)return null;if((null==d||null==(a=d.value)?void 0:a.kind)!==y.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==d||null==(l=d.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});o||t.setHeader("x-nextjs-cache",Z?"REVALIDATED":d.isMiss?"MISS":d.isStale?"STALE":"HIT"),A&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let f=(0,m.fromNodeOutgoingHttpHeaders)(d.value.headers);return o&&P||f.delete(h.NEXT_CACHE_TAGS_HEADER),!d.cacheControl||t.getHeader("Cache-Control")||f.get("Cache-Control")||f.set("Cache-Control",(0,g.getCacheControlHeader)(d.cacheControl)),await (0,p.sendResponse)(L,H,new Response(d.value.body,{headers:f,status:d.value.status||200})),null};q?await l(q):await M.withPropagatedContext(e.headers,()=>M.trace(d.BaseServerSpan.handleRequest,{spanName:`${z} ${_}`,kind:a.SpanKind.SERVER,attributes:{"http.method":z,"http.target":e.url}},l))}catch(t){if(t instanceof f.NoFallbackError||await R.onRequestError(e,t,{routerKind:"App Router",routePath:T,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:U,isOnDemandRevalidate:Z})},!1,N),P)throw t;return await (0,p.sendResponse)(L,H,new Response(null,{status:500})),null}}e.s(["handler",0,N,"patchFetch",0,function(){return(0,n.patchFetch)({workAsyncStorage:E,workUnitAsyncStorage:A})},"routeModule",0,R,"serverHooks",0,S,"workAsyncStorage",0,E,"workUnitAsyncStorage",0,A],36e3)},216653,e=>{e.v(t=>Promise.all(["server/chunks/[root-of-the-server]__560e8385._.js"].map(t=>e.l(t))).then(()=>t(439609)))},792892,e=>{e.v(t=>Promise.all(["server/chunks/[root-of-the-server]__628a6cf5._.js"].map(t=>e.l(t))).then(()=>t(927791)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__d640f0b2._.js.map