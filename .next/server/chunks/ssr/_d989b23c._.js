module.exports=[764140,a=>{"use strict";var b=a.i(161100),c=a.i(31351),d=a.i(953134);async function e(a){let b=await (0,c.createClient)(),{data:{user:d}}=await b.auth.getUser();if(!d)return{data:null,error:"Not authenticated"};let{data:e,error:f}=await b.from("neobank_transactions").insert([{account_id:a.accountId,amount:a.amount,description:a.description,transaction_type:a.transactionType,merchant_name:a.merchantName||a.description,merchant_category_code:a.merchantCategoryCode||"general",currency:a.currency||"USD",status:"completed",transaction_date:new Date().toISOString(),posted_date:new Date().toISOString(),metadata:a.memo?{memo:a.memo}:{}}]).select().single();if(f)return console.error("[v0] Error creating transaction:",f),{data:null,error:f.message};let g="credit"===a.transactionType?a.amount:-a.amount;return await b.rpc("update_account_balance",{account_id:a.accountId,amount_change:g}),console.log("[v0] Created transaction:",e.id,a.amount),{data:e,error:null}}async function f(a){let b=await (0,c.createClient)(),{data:{user:d}}=await b.auth.getUser();if(!d)return{data:null,error:"Not authenticated"};let{data:f,error:g}=await b.from("neobank_transfers").insert([{user_id:d.id,from_account_id:a.fromAccountId,to_account_id:a.toAccountId,external_account_id:a.externalAccountId,amount:a.amount,transfer_type:a.transferType,status:a.scheduledDate?"scheduled":"completed",scheduled_date:a.scheduledDate||new Date,completed_date:a.scheduledDate?null:new Date().toISOString(),currency:"USD",memo:a.memo,reference_number:`TXF${Date.now()}${Math.floor(1e3*Math.random())}`}]).select().single();return g?(console.error("[v0] Error creating transfer:",g),{data:null,error:g.message}):(!a.scheduledDate&&a.fromAccountId&&(await e({accountId:a.fromAccountId,amount:a.amount,description:`Transfer to ${a.toAccountId?"account":"external"}`,transactionType:"debit",merchantName:"Internal Transfer",memo:a.memo}),a.toAccountId&&await e({accountId:a.toAccountId,amount:a.amount,description:"Transfer received",transactionType:"credit",merchantName:"Internal Transfer",memo:a.memo})),console.log("[v0] Created transfer:",f.id,a.amount),{data:f,error:null})}(0,d.ensureServerEntryExports)([e]),(0,b.registerServerReference)(e,"4008636dda5666dc8d049f7d184ae001b53483dec3",null),(0,d.ensureServerEntryExports)([f]),(0,b.registerServerReference)(f,"4090f52813cb329dd4176f7de7aee0d6c4488b0fe5",null),a.s(["createNeobankTransfer",0,f],764140)},730530,a=>{"use strict";var b=a.i(820507),c=a.i(975e3),d=a.i(764140);a.s([],789167),a.i(789167),a.s(["00b4e5982374ff027d3c9db80af0059fe8abad476a",()=>c.getUser,"4090f52813cb329dd4176f7de7aee0d6c4488b0fe5",()=>d.createNeobankTransfer,"40d983bdc873a2f33f08198e581ae6b3a6175ca29e",()=>b.getUserProfile],730530)}];

//# sourceMappingURL=_d989b23c._.js.map