{"version":3,"sources":["../../../../../../taxu-platform/v0-taxu-landing-page/lib/supabase/books-server.ts","../../../../../../taxu-platform/v0-taxu-landing-page/components/accounting-dashboard-client.tsx/__nextjs-internal-proxy.mjs","../../../../../../taxu-platform/v0-taxu-landing-page/app/accounting/page.tsx"],"sourcesContent":["import { createServerClient as createSupabaseServerClient } from \"@supabase/ssr\"\nimport { cookies } from \"next/headers\"\n\nexport async function createBooksServerClient() {\n  const cookieStore = await cookies()\n\n  const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\n  const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\n\n  if (!supabaseUrl || !supabaseAnonKey) {\n    console.error(\"[v0] Books server: Missing Supabase environment variables\")\n    return null as any\n  }\n\n  return createSupabaseServerClient(supabaseUrl, supabaseAnonKey, {\n    cookies: {\n      getAll() {\n        return cookieStore.getAll()\n      },\n      setAll(cookiesToSet) {\n        try {\n          cookiesToSet.forEach(({ name, value, options }) => cookieStore.set(name, value, options))\n        } catch {\n          // Handle cookie setting errors\n        }\n      },\n    },\n  })\n}\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AccountingDashboardClient = registerClientReference(\n    function() { throw new Error(\"Attempted to call AccountingDashboardClient() from the server but AccountingDashboardClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/taxu-platform/v0-taxu-landing-page/components/accounting-dashboard-client.tsx\",\n    \"AccountingDashboardClient\",\n);\n","import { createBooksServerClient } from \"@/lib/supabase/books-server\"\nimport { createClient } from \"@/lib/supabase/server\"\nimport { AccountingDashboardClient } from \"@/components/accounting-dashboard-client\"\nimport { redirect } from \"next/navigation\"\n\nexport default async function AccountingPage() {\n  const supabase = await createClient()\n  const {\n    data: { user },\n    error: userError,\n  } = await supabase.auth.getUser()\n\n  if (userError || !user) {\n    redirect(\"/login\")\n  }\n\n  try {\n    const booksClient = await createBooksServerClient()\n\n    const [invoicesRes, expensesRes, customersRes, revenueRes] = await Promise.all([\n      booksClient\n        .from(\"invoices\")\n        .select(\"*\")\n        .eq(\"user_id\", user.id)\n        .order(\"created_at\", { ascending: false })\n        .limit(10),\n      booksClient\n        .from(\"journal_entries\")\n        .select(\"*\")\n        .eq(\"user_id\", user.id)\n        .eq(\"entry_type\", \"expense\")\n        .order(\"entry_date\", { ascending: false })\n        .limit(10),\n      booksClient.from(\"contacts\").select(\"*\").eq(\"user_id\", user.id).eq(\"contact_type\", \"customer\").limit(10),\n      booksClient.from(\"invoices\").select(\"total_amount, status, created_at\").eq(\"user_id\", user.id),\n    ])\n\n    return (\n      <AccountingDashboardClient\n        user={user}\n        invoices={invoicesRes.data || []}\n        expenses={expensesRes.data || []}\n        customers={customersRes.data || []}\n        allInvoices={revenueRes.data || []}\n      />\n    )\n  } catch (error) {\n    console.error(\"Error fetching accounting data:\", error)\n    // Return empty dashboard instead of crashing\n    return <AccountingDashboardClient user={user} invoices={[]} expenses={[]} customers={[]} allInvoices={[]} />\n  }\n}\n"],"names":[],"mappings":"0YAAA,EAAA,CAAA,CAAA,QAAA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,OAEO,eAAe,IACpB,IAAM,EAAc,MAAM,CAAA,EAAA,EAAA,OAAA,AAAO,IAUjC,MAAO,CAAA,EAAA,EAAA,kBAAA,AAA0B,EAAC,AAR5B,aAQyC,UAPzC,mNAO0D,CAC9D,QAAS,QACP,IACS,EAAY,MAAM,GAE3B,OAAO,CAAY,EACjB,GAAI,CACF,EAAa,OAAO,CAAC,CAAC,CAAE,MAAI,OAAE,CAAK,SAAE,CAAO,CAAE,GAAK,EAAY,GAAG,CAAC,EAAM,EAAO,GAClF,CAAE,KAAM,CAER,CACF,CACF,CACF,EACF,wGC1BO,IAAM,EAA4B,CAAA,EADzC,AACyC,EADzC,CAAA,CAAA,QACyC,uBAAuB,AAAvB,EACrC,WAAa,MAAM,AAAI,MAAM,gQAAkQ,EAC/R,8GACA,+FAHG,IAAM,EAA4B,CAAA,EADzC,AACyC,EADzC,CAAA,CAAA,QACyC,uBAAA,AAAuB,EAC5D,WAAa,MAAM,AAAI,MAAM,gQAAkQ,EAC/R,0FACA,sICLJ,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,CAAA,CAAA,QAAA,IAAA,EAAA,EAAA,CAAA,CAAA,QAEe,eAAe,IAC5B,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,YAAA,AAAY,IAC7B,CACJ,KAAM,MAAE,CAAI,CAAE,CACd,MAAO,CAAS,CACjB,CAAG,MAAM,EAAS,IAAI,CAAC,OAAO,IAE3B,GAAa,CAAC,CAAA,GAAM,AACtB,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,UAGX,GAAI,CACF,IAAM,EAAc,MAAM,CAAA,EAAA,EAAA,uBAAA,AAAuB,IAE3C,CAAC,EAAa,EAAa,EAAc,EAAW,CAAG,MAAM,QAAQ,GAAG,CAAC,CAC7E,EACG,IAAI,CAAC,YACL,MAAM,CAAC,KACP,EAAE,CAAC,UAAW,EAAK,EAAE,EACrB,KAAK,CAAC,aAAc,CAAE,WAAW,CAAM,GACvC,KAAK,CAAC,IACT,EACG,IAAI,CAAC,mBACL,MAAM,CAAC,KACP,EAAE,CAAC,UAAW,EAAK,EAAE,EACrB,EAAE,CAAC,aAAc,WACjB,KAAK,CAAC,aAAc,CAAE,WAAW,CAAM,GACvC,KAAK,CAAC,IACT,EAAY,IAAI,CAAC,YAAY,MAAM,CAAC,KAAK,EAAE,CAAC,UAAW,EAAK,EAAE,EAAE,EAAE,CAAC,eAAgB,YAAY,KAAK,CAAC,IACrG,EAAY,IAAI,CAAC,YAAY,MAAM,CAAC,oCAAoC,EAAE,CAAC,UAAW,EAAK,EAAE,EAC9F,EAED,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,yBAAyB,CAAA,CACxB,KAAM,EACN,SAAU,EAAY,IAAI,EAAI,EAAE,CAChC,SAAU,EAAY,IAAI,EAAI,EAAE,CAChC,UAAW,EAAa,IAAI,EAAI,EAAE,CAClC,YAAa,EAAW,IAAI,EAAI,EAAE,EAGxC,CAAE,MAAO,EAAO,CAGd,OAFA,QAAQ,KAAK,CAAC,kCAAmC,GAE1C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,yBAAyB,CAAA,CAAC,KAAM,EAAM,SAAU,EAAE,CAAE,SAAU,EAAE,CAAE,UAAW,EAAE,CAAE,YAAa,EAAE,EAC1G,CACF","ignoreList":[1]}