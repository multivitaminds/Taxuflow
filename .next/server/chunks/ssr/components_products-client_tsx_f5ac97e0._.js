module.exports=[566250,a=>{"use strict";var b=a.i(108446),c=a.i(117462),d=a.i(340695),e=a.i(205522),f=a.i(703130),g=a.i(271386),h=a.i(100715),i=a.i(674864),j=a.i(396860),k=a.i(844654),l=a.i(748923),m=a.i(666929),n=a.i(738611),o=a.i(583958),p=a.i(17498),q=a.i(965733),r=a.i(917171),s=a.i(887682),t=a.i(676504),u=a.i(899482);function v({onClose:a,initialProduct:f}){let[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)({name:f?.name||"",type:f?.type||"service",sku:f?.sku||"",price:f?.price?.toString()||"",cost:f?.cost?.toString()||"",description:f?.description||"",category:f?.category||"",is_taxable:f?.is_taxable||!1,quantity_on_hand:f?.quantity_on_hand?.toString()||""}),k=async b=>{b.preventDefault(),h(!0);try{let b=(0,u.getSupabaseBooksClient)();if(!b)throw Error("Supabase not available");let c={name:i.name,type:i.type,sku:i.sku,price:Number.parseFloat(i.price),cost:Number.parseFloat(i.cost||"0"),description:i.description,category:i.category,is_taxable:i.is_taxable,quantity_on_hand:"product"===i.type?Number.parseInt(i.quantity_on_hand||"0"):null};if(f){let{error:a}=await b.from("products").update(c).eq("id",f.id);if(a)throw a}else{let{error:a}=await b.from("products").insert(c);if(a)throw a}a()}catch(a){console.error("Error saving product:",a),alert("Failed to save product")}finally{h(!1)}};return(0,b.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(r.Label,{htmlFor:"name",children:"Name *"}),(0,b.jsx)(e.Input,{id:"name",value:i.name,onChange:a=>j({...i,name:a.target.value}),required:!0,className:"w-full"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(r.Label,{htmlFor:"type",children:"Type *"}),(0,b.jsxs)(s.Select,{value:i.type,onValueChange:a=>j({...i,type:a}),children:[(0,b.jsx)(s.SelectTrigger,{children:(0,b.jsx)(s.SelectValue,{})}),(0,b.jsxs)(s.SelectContent,{children:[(0,b.jsx)(s.SelectItem,{value:"service",children:"Service"}),(0,b.jsx)(s.SelectItem,{value:"product",children:"Product"})]})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(r.Label,{htmlFor:"sku",children:"SKU"}),(0,b.jsx)(e.Input,{id:"sku",value:i.sku,onChange:a=>j({...i,sku:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(r.Label,{htmlFor:"category",children:"Category"}),(0,b.jsx)(e.Input,{id:"category",value:i.category,onChange:a=>j({...i,category:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(r.Label,{htmlFor:"price",children:"Price *"}),(0,b.jsx)(e.Input,{id:"price",type:"number",step:"0.01",value:i.price,onChange:a=>j({...i,price:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(r.Label,{htmlFor:"cost",children:"Cost"}),(0,b.jsx)(e.Input,{id:"cost",type:"number",step:"0.01",value:i.cost,onChange:a=>j({...i,cost:a.target.value})})]}),"product"===i.type&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(r.Label,{htmlFor:"quantity",children:"Quantity"}),(0,b.jsx)(e.Input,{id:"quantity",type:"number",value:i.quantity_on_hand,onChange:a=>j({...i,quantity_on_hand:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(r.Label,{htmlFor:"description",children:"Description"}),(0,b.jsx)(e.Input,{id:"description",value:i.description,onChange:a=>j({...i,description:a.target.value})})]}),(0,b.jsxs)("div",{className:"flex gap-2 justify-end pt-4",children:[(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:a,children:"Cancel"}),(0,b.jsx)(d.Button,{type:"submit",disabled:g,children:g?"Saving...":f?"Update Product":"Create Product"})]})]})}a.s(["ProductsClient",0,function(){let[a,r]=(0,c.useState)([]),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)("all"),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(!0),[E,F]=(0,c.useState)(null);async function G(){try{console.log("[v0] Loading products from database");let a=(0,u.getSupabaseBooksClient)();if(!a)return void console.error("[v0] Supabase client not available");let{data:b,error:c}=await a.from("products").select("*").order("created_at",{ascending:!1});if(c)throw console.error("[v0] Error loading products:",c),c;console.log("[v0] Products loaded successfully:",b?.length||0),r(b||[])}catch(a){console.error("Error loading products:",a)}finally{D(!1)}}(0,c.useEffect)(()=>{G()},[]);let H=async b=>{if(confirm("Are you sure you want to delete this product?"))try{let c=(0,u.getSupabaseBooksClient)();if(!c)throw Error("Supabase not available");let{error:d}=await c.from("products").delete().eq("id",b);if(d)throw d;r(a.filter(a=>a.id!==b))}catch(a){console.error("Error deleting product:",a),alert("Failed to delete product")}},I=a.filter(a=>{let b=a.name.toLowerCase().includes(w.toLowerCase())||a.sku.toLowerCase().includes(w.toLowerCase()),c="all"===y||a.type===y;return b&&c}),J={totalProducts:a.length,services:a.filter(a=>"service"===a.type).length,physicalProducts:a.filter(a=>"product"===a.type).length,totalValue:a.reduce((a,b)=>a+b.price*(b.quantity_on_hand||1),0)};return(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)("div",{className:"border-b border-border bg-card",children:(0,b.jsxs)("div",{className:"container mx-auto px-6 py-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Products & Services"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage your product catalog and service offerings"})]}),(0,b.jsxs)(q.Dialog,{open:A,onOpenChange:B,children:[(0,b.jsx)(q.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{size:"lg",className:"gap-2",children:[(0,b.jsx)(h.Plus,{className:"h-5 w-5"}),"Add Product/Service"]})}),(0,b.jsxs)(q.DialogContent,{className:"max-w-2xl",children:[(0,b.jsx)(q.DialogHeader,{children:(0,b.jsxs)(q.DialogTitle,{children:[E?"Edit":"Add New"," Product or Service"]})}),(0,b.jsx)(v,{onClose:()=>{B(!1),F(null),G()},initialProduct:E})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsx)(f.Card,{className:"p-4 border-border",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Total Items"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-foreground",children:J.totalProducts})]}),(0,b.jsx)(g.Package,{className:"h-8 w-8 text-blue-500"})]})}),(0,b.jsx)(f.Card,{className:"p-4 border-border",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Services"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-foreground",children:J.services})]}),(0,b.jsx)(o.TrendingUp,{className:"h-8 w-8 text-green-500"})]})}),(0,b.jsx)(f.Card,{className:"p-4 border-border",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Products"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-foreground",children:J.physicalProducts})]}),(0,b.jsx)(g.Package,{className:"h-8 w-8 text-purple-500"})]})}),(0,b.jsx)(f.Card,{className:"p-4 border-border",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Catalog Value"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-foreground",children:["$",J.totalValue.toLocaleString()]})]}),(0,b.jsx)(n.DollarSign,{className:"h-8 w-8 text-orange-500"})]})})]})]})}),(0,b.jsxs)("div",{className:"container mx-auto px-6 py-6",children:[(0,b.jsx)(f.Card,{className:"p-4 mb-6",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(i.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(e.Input,{placeholder:"Search products and services...",value:w,onChange:a=>x(a.target.value),className:"pl-10"})]}),(0,b.jsxs)(s.Select,{value:y,onValueChange:z,children:[(0,b.jsxs)(s.SelectTrigger,{className:"w-full sm:w-[180px]",children:[(0,b.jsx)(j.Filter,{className:"mr-2 h-4 w-4"}),(0,b.jsx)(s.SelectValue,{placeholder:"Filter by type"})]}),(0,b.jsxs)(s.SelectContent,{children:[(0,b.jsx)(s.SelectItem,{value:"all",children:"All Types"}),(0,b.jsx)(s.SelectItem,{value:"product",children:"Products"}),(0,b.jsx)(s.SelectItem,{value:"service",children:"Services"})]})]})]})}),C?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)(p.Loader,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===I.length?(0,b.jsxs)(f.Card,{className:"p-12 text-center border-border",children:[(0,b.jsx)(g.Package,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No products found"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-6",children:"Get started by adding your first product or service"}),(0,b.jsxs)(q.Dialog,{open:A,onOpenChange:B,children:[(0,b.jsx)(q.DialogTrigger,{asChild:!0,children:(0,b.jsx)(d.Button,{children:"Add Product"})}),(0,b.jsxs)(q.DialogContent,{className:"max-w-2xl",children:[(0,b.jsx)(q.DialogHeader,{children:(0,b.jsx)(q.DialogTitle,{children:"Add New Product or Service"})}),(0,b.jsx)(v,{onClose:()=>{B(!1),G()}})]})]})]}):(0,b.jsx)(f.Card,{children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"border-b border-border bg-muted/50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"p-4 text-left text-sm font-medium text-muted-foreground",children:"Product/Service"}),(0,b.jsx)("th",{className:"p-4 text-left text-sm font-medium text-muted-foreground",children:"Type"}),(0,b.jsx)("th",{className:"p-4 text-left text-sm font-medium text-muted-foreground",children:"SKU"}),(0,b.jsx)("th",{className:"p-4 text-right text-sm font-medium text-muted-foreground",children:"Price"}),(0,b.jsx)("th",{className:"p-4 text-right text-sm font-medium text-muted-foreground",children:"Cost"}),(0,b.jsx)("th",{className:"p-4 text-right text-sm font-medium text-muted-foreground",children:"Stock"}),(0,b.jsx)("th",{className:"p-4 text-right text-sm font-medium text-muted-foreground",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-border",children:I.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-muted/50 transition-colors",children:[(0,b.jsx)("td",{className:"p-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-foreground",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.description})]})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-medium ${"service"===a.type?"bg-blue-500/10 text-blue-600":"bg-green-500/10 text-green-600"}`,children:a.type})}),(0,b.jsx)("td",{className:"p-4 text-sm text-muted-foreground",children:a.sku}),(0,b.jsxs)("td",{className:"p-4 text-right font-medium text-foreground",children:["$",a.price.toFixed(2)]}),(0,b.jsxs)("td",{className:"p-4 text-right text-sm text-muted-foreground",children:["$",a.cost.toFixed(2)]}),(0,b.jsx)("td",{className:"p-4 text-right text-sm text-muted-foreground",children:null!==a.quantity_on_hand?a.quantity_on_hand:"N/A"}),(0,b.jsx)("td",{className:"p-4 text-right",children:(0,b.jsxs)(t.DropdownMenu,{children:[(0,b.jsx)(t.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(k.MoreVertical,{className:"h-4 w-4"})})}),(0,b.jsxs)(t.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(t.DropdownMenuItem,{onClick:()=>{F(a),B(!0)},children:[(0,b.jsx)(l.Edit,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,b.jsxs)(t.DropdownMenuItem,{className:"text-destructive",onClick:()=>H(a.id),children:[(0,b.jsx)(m.Trash2,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},a.id))})]})})})]})]})}])}];

//# sourceMappingURL=components_products-client_tsx_f5ac97e0._.js.map