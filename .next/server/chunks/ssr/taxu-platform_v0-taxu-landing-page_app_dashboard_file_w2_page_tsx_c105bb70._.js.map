{"version":3,"sources":["../../../../../../taxu-platform/v0-taxu-landing-page/components/forms/form-w2.tsx","../../../../../../taxu-platform/v0-taxu-landing-page/app/dashboard/file/w2/page.tsx","../../../../../../taxu-platform/v0-taxu-landing-page/node_modules/%40radix-ui/react-radio-group/node_modules/%40radix-ui/react-collection/dist/index.mjs","../../../../../../taxu-platform/v0-taxu-landing-page/node_modules/%40radix-ui/react-radio-group/node_modules/%40radix-ui/primitive/dist/index.mjs","../../../../../../taxu-platform/v0-taxu-landing-page/node_modules/%40radix-ui/react-radio-group/node_modules/%40radix-ui/react-roving-focus/dist/index.mjs","../../../../../../taxu-platform/v0-taxu-landing-page/node_modules/%40radix-ui/react-radio-group/dist/index.mjs","../../../../../../taxu-platform/v0-taxu-landing-page/components/ui/radio-group.tsx","../../../../../../taxu-platform/v0-taxu-landing-page/node_modules/%40radix-ui/react-radio-group/node_modules/%40radix-ui/react-id/dist/index.mjs","../../../../../../taxu-platform/v0-taxu-landing-page/node_modules/%40radix-ui/react-radio-group/node_modules/%40radix-ui/react-compose-refs/dist/index.mjs","../../../../../../taxu-platform/v0-taxu-landing-page/node_modules/%40radix-ui/react-radio-group/node_modules/%40radix-ui/react-primitive/dist/index.mjs","../../../../../../taxu-platform/v0-taxu-landing-page/node_modules/%40radix-ui/react-radio-group/node_modules/%40radix-ui/react-use-controllable-state/dist/index.mjs","../../../../../../taxu-platform/v0-taxu-landing-page/node_modules/%40radix-ui/react-radio-group/node_modules/%40radix-ui/react-direction/dist/index.mjs","../../../../../../taxu-platform/v0-taxu-landing-page/node_modules/%40radix-ui/react-radio-group/node_modules/%40radix-ui/react-context/dist/index.mjs","../../../../../../taxu-platform/v0-taxu-landing-page/node_modules/%40radix-ui/react-radio-group/node_modules/%40radix-ui/react-slot/dist/index.mjs"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useState, useEffect, useRef } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport { useToast } from \"@/hooks/use-toast\"\nimport {\n  Loader2,\n  ArrowLeft,\n  Send,\n  Lock,\n  Sparkles,\n  FileText,\n  AlertCircle,\n  Info,\n  CheckCircle2,\n  AlertTriangle,\n  ArrowRight,\n} from \"lucide-react\"\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\"\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\"\nimport { PenaltyAbatementDialog } from \"@/components/penalty-abatement-dialog\"\nimport { parseName, parseLastNameWithMiddleInitial } from \"@/lib/name-parser\"\nimport { ProgressStepper } from \"@/components/ui/progress-stepper\"\nimport { FilingReviewSection } from \"@/components/filing-review-section\"\nimport { FilingProgressDialog } from \"@/components/filing-progress-dialog\"\nimport { formatEIN, formatSSN } from \"@/lib/format-utils\"\n\ninterface FormW2Props {\n  extractedData?: any\n}\n\ninterface ExtractedW2Data {\n  employer?: {\n    name?: string\n    ein?: string\n    address?: string\n  }\n  employee?: {\n    name?: string\n    ssn?: string\n    address?: string\n  }\n  income?: {\n    wages?: number\n    federalWithholding?: number\n    socialSecurityWages?: number\n    socialSecurityTax?: number\n    medicareWages?: number\n    medicareTax?: number\n    stateWages?: number\n    stateTax?: number\n    state?: string\n  }\n  taxYear?: number\n}\n\nexport default function FormW2({ extractedData }: FormW2Props) {\n  const router = useRouter()\n  const { toast } = useToast()\n  const [loading, setLoading] = useState(false)\n  const [savingDraft, setSavingDraft] = useState(false)\n  const [uploading, setUploading] = useState(false)\n  const [extracting, setExtracting] = useState(false)\n  const [validating, setValidating] = useState(false)\n  const [validationResult, setValidationResult] = useState<any>(null)\n  const [showPenaltyDialog, setShowPenaltyDialog] = useState(false)\n  const [overrideValidation, setOverrideValidation] = useState(false)\n\n  const [filingType, setFilingType] = useState<\"original\" | \"corrected\">(\"original\")\n\n  const [formData, setFormData] = useState({\n    // Employer Information\n    employerName: \"\",\n    employerEIN: \"\",\n    employerAddress: \"\",\n    employerCity: \"\",\n    employerState: \"\",\n    employerZip: \"\",\n\n    // Employee Information\n    employeeFirstName: \"\",\n    employeeMiddleInitial: \"\", // Added middle initial field\n    employeeLastName: \"\",\n    employeeSSN: \"\",\n    employeeAddress: \"\",\n    employeeCity: \"\",\n    employeeState: \"\",\n    employeeZip: \"\",\n\n    // Wage Information\n    wages: \"\",\n    federalWithholding: \"\",\n    socialSecurityWages: \"\",\n    socialSecurityWithholding: \"\",\n    medicareWages: \"\",\n    medicareWithholding: \"\",\n    socialSecurityTips: \"\",\n    allocatedTips: \"\",\n    dependentCareBenefits: \"\",\n    nonqualifiedPlans: \"\",\n    box12Code: \"\",\n    box12Amount: \"\",\n\n    // State Information\n    stateWages: \"\",\n    stateWithholding: \"\",\n    localWages: \"\",\n    localWithholding: \"\",\n\n    taxYear: new Date().getFullYear().toString(),\n  })\n\n  const shouldAutoValidate = useRef(false)\n\n  const currentYear = new Date().getFullYear()\n  const taxYearOptions = Array.from({ length: 10 }, (_, i) => currentYear - i)\n\n  const canEfile = (year: number) => {\n    const yearsBack = currentYear - year\n    // Original W-2s: current year only (by Jan 31 deadline)\n    // Corrected W-2s: current year + 2 prior years (in some cases)\n    if (filingType === \"original\") {\n      return yearsBack === 0\n    } else {\n      return yearsBack <= 2\n    }\n  }\n\n  // Added state for multi-step form and progress dialog\n  const [currentFormStep, setCurrentFormStep] = useState(1) // 1 = Fill Form, 2 = Review\n  const [showProgressDialog, setShowProgressDialog] = useState(false)\n  const [filingProgress, setFilingProgress] = useState(0)\n\n  useEffect(() => {\n    if (shouldAutoValidate.current && formData.employerName && formData.wages) {\n      console.log(\"[v0] Form state updated, running auto-validation with:\", {\n        employerName: formData.employerName,\n        wages: formData.wages,\n        employeeFirstName: formData.employeeFirstName,\n      })\n      shouldAutoValidate.current = false\n      handleValidateForm()\n    }\n  }, [formData])\n\n  const cleanAndParseAddress = (addressString: string) => {\n    if (!addressString) return { street: \"\", city: \"\", state: \"\", zip: \"\" }\n\n    const normalized = addressString.replace(/\\s+/g, \" \").trim()\n\n    // Extract ZIP code first (5 digits or 5+4 format)\n    const zipMatch = normalized.match(/\\b(\\d{5}(?:-\\d{4})?)\\b/)\n    const zip = zipMatch ? zipMatch[1] : \"\"\n\n    // Remove ZIP from string\n    let remaining = normalized.replace(/\\b\\d{5}(?:-\\d{4})?\\b/, \"\").trim()\n\n    // Extract state (2 letter code)\n    const stateMatch = remaining.match(/\\b([A-Z]{2})\\b/)\n    const state = stateMatch ? stateMatch[1] : \"\"\n\n    // Remove state from string\n    remaining = remaining.replace(/\\b[A-Z]{2}\\b/, \"\").trim()\n\n    // Split by comma to get parts\n    const parts = remaining\n      .split(\",\")\n      .map((p) => p.trim())\n      .filter(Boolean)\n\n    let street = \"\"\n    let city = \"\"\n\n    if (parts.length >= 3) {\n      // If we have 3+ parts: \"480 Cedar Lane\", \"Apt 2B\", \"Springfield\"\n      // Everything except the last part is the street address (includes apt)\n      // The last part is the city\n      street = parts.slice(0, -1).join(\", \")\n      city = parts[parts.length - 1]\n    } else if (parts.length === 2) {\n      // If we have 2 parts: first is street (with apt), second is city\n      street = parts[0]\n      city = parts[1]\n    } else if (parts.length === 1) {\n      // If only one part, assume it's the street\n      street = parts[0]\n    }\n\n    // Clean up city - remove any trailing commas or extra whitespace\n    city = city.replace(/[,;]/g, \"\").trim()\n\n    console.log(\"[v0] Parsed address:\", { input: addressString, output: { street, city, state, zip } })\n\n    return { street, city, state, zip }\n  }\n\n  useEffect(() => {\n    if (extractedData) {\n      console.log(\"[v0] Auto-filling form with extracted data:\", extractedData)\n\n      // Flat structure: { employer_name, employer_ein, wages, employee_name, ... }\n      // Nested structure: { employer: { name, ein }, income: { wages }, employee: { name } }\n\n      // Check if we have the minimum required data in either format\n      const employerName = extractedData.employer_name || extractedData.employer?.name\n      const employerEIN = extractedData.employer_ein || extractedData.employer?.ein\n      const wages = extractedData.wages || extractedData.income?.wages\n\n      if (!employerName || wages === undefined || wages === null) {\n        console.error(\"[v0] Critical data missing - need at least employer name and wages\")\n        console.log(\"[v0] Has employer name:\", employerName, \"Has wages:\", wages)\n        toast({\n          title: \"‚ö†Ô∏è Partial Extraction\",\n          description: \"Some required data is missing. Please complete the form manually.\",\n          variant: \"destructive\",\n        })\n        // Don't return - still populate what we have\n      }\n\n      const employeeNameObj = extractedData.employee_name || {}\n      const firstName = employeeNameObj.first || employeeNameObj.firstName || \"\"\n      const lastName = employeeNameObj.last || employeeNameObj.lastName || \"\"\n      const middleName = employeeNameObj.middle || employeeNameObj.middleInitial || \"\"\n\n      const employeeName =\n        typeof extractedData.employee_name === \"string\"\n          ? extractedData.employee_name\n          : firstName && lastName\n            ? `${firstName} ${lastName}`\n            : extractedData.employee?.name || \"\"\n\n      const parsedName = parseName(employeeName)\n\n      let employeeFirstName = firstName\n      let employeeMiddleInitial = middleName\n      let employeeLastName = lastName\n\n      if (parsedName && !employeeFirstName) {\n        employeeFirstName = parsedName.firstName\n        employeeMiddleInitial = parsedName.middleInitial\n        employeeLastName = parsedName.lastName\n      }\n\n      let employerAddr\n      if (typeof extractedData.employer_address === \"object\" && extractedData.employer_address !== null) {\n        // AI already parsed it perfectly - use it directly\n        employerAddr = {\n          street: extractedData.employer_address.street || \"\",\n          city: extractedData.employer_address.city || \"\",\n          state: extractedData.employer_address.state || \"\",\n          zip: extractedData.employer_address.zipCode || extractedData.employer_address.zip || \"\",\n        }\n      } else {\n        // Fall back to string parsing\n        const employerAddress = extractedData.employer_address || extractedData.employer?.address || \"\"\n        employerAddr = cleanAndParseAddress(employerAddress)\n      }\n\n      let employeeAddr\n      if (typeof extractedData.employee_address === \"object\" && extractedData.employee_address !== null) {\n        // AI already parsed it perfectly - use it directly\n        employeeAddr = {\n          street: extractedData.employee_address.street || \"\",\n          city: extractedData.employee_address.city || \"\",\n          state: extractedData.employee_address.state || \"\",\n          zip: extractedData.employee_address.zipCode || extractedData.employee_address.zip || \"\",\n        }\n      } else {\n        // Fall back to string parsing\n        const employeeAddress = extractedData.employee_address || extractedData.employee?.address || \"\"\n        employeeAddr = cleanAndParseAddress(employeeAddress)\n      }\n\n      console.log(\"[v0] Final addresses to populate:\", {\n        employer: employerAddr,\n        employee: employeeAddr,\n      })\n\n      const newFormData = {\n        ...formData,\n        employerName: employerName || \"\",\n        employerEIN: employerEIN || \"\",\n        employerAddress: employerAddr.street || \"\",\n        employerCity: employerAddr.city || \"\",\n        employerState: employerAddr.state || \"\",\n        employerZip: employerAddr.zip || \"\",\n\n        employeeFirstName: employeeFirstName || \"\",\n        employeeMiddleInitial: employeeMiddleInitial || \"\",\n        employeeLastName: employeeLastName || \"\",\n        employeeSSN: extractedData.employee_ssn || extractedData.employee?.ssn || \"\",\n        employeeAddress: employeeAddr.street || \"\",\n        employeeCity: employeeAddr.city || \"\",\n        employeeState: employeeAddr.state || \"\",\n        employeeZip: employeeAddr.zip || \"\",\n\n        wages: wages?.toString() || \"\",\n        federalWithholding:\n          (\n            extractedData.federal_tax_withheld ||\n            extractedData.federal_income_tax ||\n            extractedData.federal_withholding ||\n            extractedData.income?.federalWithholding\n          )?.toString() || \"\",\n        socialSecurityWages:\n          (extractedData.social_security_wages || extractedData.income?.socialSecurityWages)?.toString() || \"\",\n        socialSecurityWithholding:\n          (\n            extractedData.social_security_tax_withheld ||\n            extractedData.social_security_tax ||\n            extractedData.social_security_withholding ||\n            extractedData.income?.socialSecurityTax\n          )?.toString() || \"\",\n        medicareWages: (extractedData.medicare_wages || extractedData.income?.medicareWages)?.toString() || \"\",\n        medicareWithholding:\n          (\n            extractedData.medicare_tax_withheld ||\n            extractedData.medicare_tax ||\n            extractedData.medicare_withholding ||\n            extractedData.income?.medicareTax\n          )?.toString() || \"\",\n        socialSecurityTips: extractedData.social_security_tips?.toString() || \"\",\n        allocatedTips: extractedData.allocated_tips?.toString() || \"\",\n        dependentCareBenefits: extractedData.dependent_care_benefits?.toString() || \"\",\n        nonqualifiedPlans: extractedData.nonqualified_plans?.toString() || \"\",\n        box12Code: extractedData.box_12_code || extractedData.box12Code || \"\",\n        box12Amount: (extractedData.box_12_amount || extractedData.box12Amount)?.toString() || \"\",\n        stateWages: (extractedData.state_wages || extractedData.income?.stateWages)?.toString() || \"\",\n        stateWithholding:\n          (\n            extractedData.state_tax_withheld ||\n            extractedData.state_income_tax ||\n            extractedData.state_withholding ||\n            extractedData.income?.stateTax\n          )?.toString() || \"\",\n        localWages: extractedData.local_wages?.toString() || \"\",\n        localWithholding: extractedData.local_income_tax?.toString() || \"\",\n\n        taxYear: extractedData.taxYear?.toString() || new Date().getFullYear().toString(),\n      }\n\n      setFormData(newFormData)\n      shouldAutoValidate.current = true\n\n      toast({\n        title: \"‚ú® Form Auto-Filled\",\n        description: \"Your W-2 data has been automatically populated. Validating...\",\n      })\n    }\n  }, [extractedData])\n\n  useEffect(() => {\n    const draft = localStorage.getItem(\"w2_draft\")\n    if (draft && !extractedData) {\n      try {\n        setFormData(JSON.parse(draft))\n      } catch (e) {\n        console.error(\"Failed to load draft:\", e)\n      }\n    }\n  }, [])\n\n  const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0]\n    if (!file) return\n\n    e.target.value = \"\"\n\n    setUploading(true)\n    setExtracting(true)\n\n    try {\n      const arrayBuffer = await file.arrayBuffer()\n      const base64 = Buffer.from(arrayBuffer).toString(\"base64\")\n\n      const extractResponse = await fetch(\"/api/filing/extract-document\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          fileData: base64,\n          fileName: file.name,\n          mimeType: file.type,\n        }),\n      })\n\n      const extractData = await extractResponse.json()\n\n      if (extractData.success && extractData.data) {\n        const extracted: ExtractedW2Data = extractData.data\n\n        if (!extracted.employer?.name || !extracted.income?.wages) {\n          console.error(\"[v0] Critical data missing - need at least employer and wages\")\n          toast({\n            title: \"‚ö†Ô∏è Partial Extraction\",\n            description: \"Some required data is missing. Please complete the form manually.\",\n            variant: \"destructive\",\n          })\n          // Don't return - still populate what we have\n        }\n\n        const employeeNameObj = extracted.employee_name || {}\n        const firstName = employeeNameObj.first || employeeNameObj.firstName || \"\"\n        const lastName = employeeNameObj.last || employeeNameObj.lastName || \"\"\n        const middleName = employeeNameObj.middle || employeeNameObj.middleInitial || \"\"\n\n        const employeeName =\n          typeof extracted.employee_name === \"string\"\n            ? extracted.employee_name\n            : firstName && lastName\n              ? `${firstName} ${lastName}`\n              : extracted.employee?.name || \"\"\n\n        const parsedName = parseName(employeeName)\n\n        let employeeFirstName = firstName\n        let employeeMiddleInitial = middleName\n        let employeeLastName = lastName\n\n        if (parsedName && !employeeFirstName) {\n          employeeFirstName = parsedName.firstName\n          employeeMiddleInitial = parsedName.middleInitial\n          employeeLastName = parsedName.lastName\n        }\n\n        const employerAddress = extracted.employer?.address || \"\"\n        const employeeAddress = extracted.employee?.address || \"\"\n\n        const employerParsed = cleanAndParseAddress(employerAddress)\n        const employeeParsed = cleanAndParseAddress(employeeAddress)\n\n        console.log(\"[v0] Parsed addresses from upload:\", {\n          employer: employerParsed,\n          employee: employeeParsed,\n        })\n\n        setFormData({\n          ...formData,\n          employerName: extracted.employer?.name || \"\",\n          employerEIN: extracted.employer?.ein || \"\",\n          employerAddress: employerParsed.street,\n          employerCity: employerParsed.city,\n          employerState: employerParsed.state,\n          employerZip: employerParsed.zip,\n\n          employeeFirstName,\n          employeeMiddleInitial,\n          employeeLastName,\n          employeeSSN: extracted.employee?.ssn || \"\",\n          employeeAddress: employeeParsed.street,\n          employeeCity: employeeParsed.city,\n          employeeState: employeeParsed.state,\n          employeeZip: employeeParsed.zip,\n\n          wages: extracted.income?.wages?.toString() || \"\",\n          federalWithholding: extracted.income?.federalWithholding?.toString() || \"\",\n          socialSecurityWages: extracted.income?.socialSecurityWages?.toString() || \"\",\n          socialSecurityWithholding: extracted.income?.socialSecurityTax?.toString() || \"\",\n          medicareWages: extracted.income?.medicareWages?.toString() || \"\",\n          medicareWithholding: extracted.income?.medicareTax?.toString() || \"\",\n          stateWages: extracted.income?.stateWages?.toString() || \"\",\n          stateWithholding: extracted.income?.stateTax?.toString() || \"\",\n\n          taxYear: extracted.taxYear?.toString() || new Date().getFullYear().toString(),\n        })\n\n        shouldAutoValidate.current = true\n\n        toast({\n          title: \"‚ú® AI Extraction Complete\",\n          description: \"Your W-2 has been automatically filled. Validating...\",\n        })\n      } else {\n        throw new Error(\"Could not extract W-2 data from document\")\n      }\n    } catch (error: any) {\n      toast({\n        title: \"Extraction Failed\",\n        description: error.message,\n        variant: \"destructive\",\n      })\n    } finally {\n      setUploading(false)\n      setExtracting(false)\n    }\n  }\n\n  const handleValidateForm = async () => {\n    setValidating(true)\n    setValidationResult(null)\n\n    try {\n      console.log(\"[v0] Running AI-powered validation...\")\n\n      // First, do basic client-side checks\n      const clientErrors: any[] = []\n\n      if (!formData.employerName) clientErrors.push({ field: \"employerName\", message: \"Employer name is required\" })\n      if (!formData.employerEIN) clientErrors.push({ field: \"employerEIN\", message: \"Employer EIN is required\" })\n      if (!formData.employeeFirstName)\n        clientErrors.push({ field: \"employeeFirstName\", message: \"Employee first name is required\" })\n      if (!formData.employeeLastName)\n        clientErrors.push({ field: \"employeeLastName\", message: \"Employee last name is required\" })\n      if (!formData.employeeSSN) clientErrors.push({ field: \"employeeSSN\", message: \"Employee SSN is required\" })\n      if (!formData.wages) clientErrors.push({ field: \"wages\", message: \"Wages are required\" })\n\n      // If critical fields are missing, return early\n      if (clientErrors.length > 0) {\n        const result = {\n          valid: false,\n          errors: clientErrors,\n          warnings: [],\n          suggestions: [],\n        }\n        setValidationResult(result)\n        toast({\n          title: \"Validation Failed\",\n          description: `Please fill in ${clientErrors.length} required field(s)`,\n          variant: \"destructive\",\n        })\n        setValidating(false)\n        return\n      }\n\n      // Call AI validation API\n      const response = await fetch(\"/api/filing/validate-w2\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          ...formData,\n          filingType,\n        }),\n      })\n\n      if (!response.ok) {\n        throw new Error(\"AI validation service unavailable\")\n      }\n\n      const result = await response.json()\n      setValidationResult(result)\n\n      const hasErrors = result.errors?.length > 0\n      const hasWarnings = result.warnings?.length > 0\n      const hasSuggestions = result.suggestions?.length > 0\n\n      console.log(\"[v0] AI Validation result:\", {\n        valid: result.valid,\n        errors: hasErrors ? result.errors.length : 0,\n        warnings: hasWarnings ? result.warnings.length : 0,\n        suggestions: hasSuggestions ? result.suggestions.length : 0,\n      })\n\n      if (!hasErrors && !hasWarnings && !hasSuggestions) {\n        toast({\n          title: \"‚úì Perfect!\",\n          description: \"Your W-2 passed all AI validation checks. Ready to submit!\",\n        })\n      } else if (hasErrors) {\n        toast({\n          title: \"Issues Found\",\n          description: `AI found ${result.errors.length} error(s) and ${result.warnings.length} warning(s)`,\n          variant: \"destructive\",\n        })\n      } else {\n        toast({\n          title: \"Validation Complete\",\n          description: `${result.warnings.length} warning(s) and ${result.suggestions.length} suggestion(s) to review`,\n        })\n      }\n    } catch (error: any) {\n      console.error(\"[v0] AI Validation error:\", error)\n      toast({\n        title: \"Validation Failed\",\n        description: error.message || \"Could not complete AI validation\",\n        variant: \"destructive\",\n      })\n    } finally {\n      setValidating(false)\n    }\n  }\n\n  // Modified handleSubmit for multi-step form and progress dialog\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    e.stopPropagation()\n\n    if (currentFormStep === 1) {\n      // Move to review step\n      if (!validationResult) {\n        await handleValidateForm()\n      }\n      setCurrentFormStep(2)\n      window.scrollTo({ top: 0, behavior: \"smooth\" })\n      return\n    }\n\n    console.log(\"[v0] ========================================\")\n    console.log(\"[v0] SUBMIT BUTTON CLICKED - HANDLER EXECUTING\")\n    console.log(\"[v0] ========================================\")\n\n    if (loading) {\n      console.log(\"[v0] Already submitting, ignoring duplicate click\")\n      return\n    }\n\n    if (isPaperFilingRequired) {\n      console.log(\"[v0] Paper filing required, generating PDF package...\")\n      await handleGeneratePaperPackage()\n      return\n    }\n\n    if (validationResult?.errors?.length > 0 && !overrideValidation) {\n      const confirmed = window.confirm(\n        `Found ${validationResult.errors.length} validation error(s). Do you want to submit anyway? The IRS may reject this filing.`,\n      )\n      if (!confirmed) {\n        return\n      }\n      setOverrideValidation(true)\n    }\n\n    setLoading(true)\n    setShowProgressDialog(true)\n    setFilingProgress(1)\n\n    try {\n      console.log(\"[v0] Step 1/3: Authenticating with IRS e-filing system\")\n      await new Promise((resolve) => setTimeout(resolve, 1500))\n      setFilingProgress(2)\n\n      console.log(\"[v0] Step 2/3: Verifying business entity with IRS\")\n      await new Promise((resolve) => setTimeout(resolve, 1500))\n      setFilingProgress(3)\n\n      console.log(\"[v0] Step 3/3: Submitting W-2 form to IRS\")\n      console.log(\"[v0] Starting API call to /api/filing/submit-w2\")\n\n      const response = await fetch(\"/api/filing/submit-w2\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          ...formData,\n          filingType,\n          overrideValidation: overrideValidation || validationResult?.errors?.length === 0,\n        }),\n      })\n\n      const contentType = response.headers.get(\"content-type\")\n      if (!contentType || !contentType.includes(\"application/json\")) {\n        const textResponse = await response.text()\n        console.error(\"[v0] NON-JSON RESPONSE:\", textResponse.substring(0, 200))\n        throw new Error(`Server returned non-JSON response: ${response.status} ${response.statusText}`)\n      }\n\n      const result = await response.json()\n      console.log(\"[v0] API response:\", result)\n\n      if (result.isDemoMode) {\n        toast({\n          title: \"Demo Mode Restriction\",\n          description: result.error,\n          variant: \"destructive\",\n        })\n        setLoading(false)\n        setShowProgressDialog(false)\n        setFilingProgress(0)\n        return\n      }\n\n      if (result.success) {\n        console.log(\"[v0] ‚úÖ W-2 SUBMITTED SUCCESSFULLY!\")\n\n        setFilingProgress(4)\n\n        toast({\n          title: \"W-2 Successfully Submitted to IRS\",\n          description: `Submission ID: ${result.submissionId}. The IRS will process your filing within 24-48 hours.`,\n          duration: 5000,\n        })\n\n        localStorage.removeItem(\"w2_draft\")\n\n        setTimeout(() => {\n          router.push(result.filingId ? `/dashboard/filing/${result.filingId}` : \"/dashboard/filing\")\n        }, 3000)\n      } else {\n        setFilingProgress(0)\n        setShowProgressDialog(false)\n\n        toast({\n          title: \"IRS Submission Failed\",\n          description: result.error || \"Could not submit to the IRS.\",\n          variant: \"destructive\",\n        })\n      }\n    } catch (error: any) {\n      console.error(\"[v0] SUBMISSION ERROR:\", error.message)\n\n      setFilingProgress(0)\n      setShowProgressDialog(false)\n\n      toast({\n        title: \"Submission Error\",\n        description: error.message || \"An unexpected error occurred.\",\n        variant: \"destructive\",\n      })\n    } finally {\n      setLoading(false)\n      setOverrideValidation(false)\n    }\n  }\n\n  const handleGeneratePaperPackage = async () => {\n    setLoading(true)\n\n    try {\n      console.log(\"[v0] Generating paper filing package...\")\n\n      const response = await fetch(\"/api/filing/generate-paper-package\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          formType: \"W-2\",\n          filingType,\n          formData,\n          taxYear: formData.taxYear,\n        }),\n      })\n\n      const contentType = response.headers.get(\"content-type\")\n      if (!contentType || !contentType.includes(\"application/json\")) {\n        const text = await response.text()\n        console.error(\"[v0] Server returned non-JSON response:\", text)\n        throw new Error(`Server error: ${response.status} ${response.statusText}`)\n      }\n      // </CHANGE>\n\n      const result = await response.json()\n\n      if (result.success) {\n        console.log(\"[v0] Paper package generated:\", result.packageUrl)\n\n        // Download the PDF\n        const link = document.createElement(\"a\")\n        link.href = result.packageUrl\n        link.download = `W2-Paper-Filing-Package-${formData.taxYear}.pdf`\n        document.body.appendChild(link)\n        link.click()\n        document.body.removeChild(link)\n\n        toast({\n          title: \"Paper Filing Package Generated\",\n          description: \"Your W-2 forms and instructions have been downloaded. Print and mail to the IRS.\",\n        })\n\n        // Save to filing history\n        localStorage.removeItem(\"w2_draft\")\n      } else {\n        throw new Error(result.error || \"Failed to generate paper package\")\n      }\n    } catch (error: any) {\n      console.error(\"[v0] Paper package generation error:\", error)\n      toast({\n        title: \"Generation Failed\",\n        description: error.message,\n        variant: \"destructive\",\n      })\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleSaveDraft = async () => {\n    setSavingDraft(true)\n\n    try {\n      localStorage.setItem(\"w2_draft\", JSON.stringify(formData))\n\n      toast({\n        title: \"Draft Saved\",\n        description: \"Your W-2 form has been saved as a draft\",\n      })\n    } catch (error: any) {\n      toast({\n        title: \"Save Failed\",\n        description: error.message,\n        variant: \"destructive\",\n      })\n    } finally {\n      setSavingDraft(false)\n    }\n  }\n\n  const handleBack = () => {\n    router.push(\"/dashboard/filing/new\")\n  }\n\n  const selectedYear = Number.parseInt(formData.taxYear)\n  const isEfileEligible = canEfile(selectedYear)\n  const isPaperFilingRequired = !isEfileEligible\n\n  // Define form steps for the stepper\n  const formSteps = [\n    { id: \"fill\", label: \"Fill Form\", sublabel: \"Enter Information\" },\n    { id: \"review\", label: \"Review & Submit\", sublabel: \"Verify Details\" },\n  ]\n\n  // Define progress steps for the progress dialog\n  const progressSteps = [\n    {\n      id: \"auth\",\n      title: \"Authenticating\",\n      description: \"Securely connecting to IRS e-filing system\",\n      icon: \"üîê\",\n    },\n    {\n      id: \"business\",\n      title: \"Verifying business entity\",\n      description: \"Setting up your employer profile with the IRS\",\n      icon: \"üè¢\",\n    },\n    {\n      id: \"submit\",\n      title: \"Submitting W-2 form\",\n      description: \"Transmitting your tax data securely to the IRS\",\n      icon: \"üìÑ\",\n    },\n  ]\n\n  // Define review sections for the review step\n  const reviewSections = [\n    {\n      title: \"Employer Information\",\n      fields: [\n        { label: \"Business Name\", value: formData.employerName },\n        { label: \"Employer EIN\", value: formData.employerEIN, sensitive: true },\n        {\n          label: \"Address\",\n          value: `${formData.employerAddress}, ${formData.employerCity}, ${formData.employerState} ${formData.employerZip}`,\n        },\n      ],\n    },\n    {\n      title: \"Employee Information\",\n      fields: [\n        {\n          label: \"Employee Name\",\n          value: `${formData.employeeFirstName} ${formData.employeeMiddleInitial ? formData.employeeMiddleInitial + \". \" : \"\"}${formData.employeeLastName}`,\n        },\n        { label: \"Social Security Number\", value: formData.employeeSSN, sensitive: true },\n        {\n          label: \"Address\",\n          value:\n            formData.employeeAddress && formData.employeeCity\n              ? `${formData.employeeAddress}, ${formData.employeeCity}, ${formData.employeeState} ${formData.employeeZip}`\n              : \"Not provided\",\n        },\n      ],\n    },\n    {\n      title: \"Wage and Tax Information\",\n      fields: [\n        { label: \"Wages, tips, other compensation\", value: `$${Number.parseFloat(formData.wages || \"0\").toFixed(2)}` },\n        {\n          label: \"Federal income tax withheld\",\n          value: `$${Number.parseFloat(formData.federalWithholding || \"0\").toFixed(2)}`,\n        },\n        {\n          label: \"Social security wages\",\n          value: `$${Number.parseFloat(formData.socialSecurityWages || \"0\").toFixed(2)}`,\n        },\n        {\n          label: \"Social security tax withheld\",\n          value: `$${Number.parseFloat(formData.socialSecurityWithholding || \"0\").toFixed(2)}`,\n        },\n        {\n          label: \"Medicare wages and tips\",\n          value: `$${Number.parseFloat(formData.medicareWages || \"0\").toFixed(2)}`,\n        },\n        {\n          label: \"Medicare tax withheld\",\n          value: `$${Number.parseFloat(formData.medicareWithholding || \"0\").toFixed(2)}`,\n        },\n      ],\n    },\n  ]\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-6\" noValidate>\n      <ProgressStepper steps={formSteps} currentStep={currentFormStep} />\n\n      {currentFormStep === 2 ? (\n        <>\n          <FilingReviewSection sections={reviewSections} formType=\"W-2\" />\n\n          {/* Action Buttons for Review Step */}\n          <div className=\"flex gap-4 pt-6\">\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={() => setCurrentFormStep(1)}\n              className=\"flex-1\"\n              disabled={loading}\n            >\n              <ArrowLeft className=\"mr-2 h-4 w-4\" />\n              Back to Edit\n            </Button>\n            <Button\n              type=\"submit\"\n              disabled={loading}\n              className=\"flex-1 bg-gradient-to-r from-[#005ea2] to-[#162e51] hover:opacity-90 text-white text-lg py-6\"\n            >\n              {loading && <Loader2 className=\"mr-2 h-5 w-5 animate-spin\" />}\n              <Send className=\"mr-2 h-5 w-5\" />\n              Submit to IRS\n            </Button>\n          </div>\n        </>\n      ) : (\n        /* Original form fields - step 1 */\n        <Card className=\"relative overflow-hidden border-2 border-purple-500/20 bg-gradient-to-br from-background via-background to-purple-500/5\">\n          <div className=\"absolute inset-0 bg-gradient-to-br from-purple-500/5 via-transparent to-orange-500/5 pointer-events-none\" />\n\n          <CardHeader className=\"relative\">\n            <div className=\"flex items-center justify-between gap-4 mb-4\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={handleBack}\n                className=\"hover:scale-105 transition-transform bg-transparent\"\n              >\n                <ArrowLeft className=\"h-4 w-4 mr-2\" />\n                Back\n              </Button>\n\n              <div className=\"relative\">\n                <input\n                  type=\"file\"\n                  accept=\".pdf,.jpg,.jpeg,.png\"\n                  onChange={handleFileUpload}\n                  className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10\"\n                  disabled={uploading || extracting}\n                />\n                <Button\n                  type=\"button\"\n                  size=\"sm\"\n                  disabled={uploading || extracting}\n                  className=\"relative overflow-hidden bg-gradient-to-r from-purple-600 via-purple-500 to-pink-500 hover:from-purple-700 hover:via-purple-600 hover:to-pink-600 text-white font-semibold shadow-lg hover:shadow-xl hover:shadow-purple-500/50 transition-all duration-300 border-0 group\"\n                >\n                  {/* Shimmer effect overlay */}\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-200%] group-hover:translate-x-[200%] transition-transform duration-1000\" />\n\n                  {extracting ? (\n                    <>\n                      <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                      Extracting...\n                    </>\n                  ) : (\n                    <>\n                      <Sparkles className=\"h-4 w-4 mr-2 animate-pulse\" />\n                      Upload W-2 (AI Extract)\n                    </>\n                  )}\n                </Button>\n              </div>\n            </div>\n\n            <CardTitle className=\"text-2xl bg-gradient-to-r from-purple-600 to-orange-600 bg-clip-text text-transparent\">\n              Form W-2 - Wage and Tax Statement\n            </CardTitle>\n            <CardDescription>\n              <div className=\"space-y-4 mt-3\">\n                <div className=\"space-y-3\">\n                  <Label className=\"text-sm font-medium\">Filing Type:</Label>\n                  <RadioGroup\n                    value={filingType}\n                    onValueChange={(value: \"original\" | \"corrected\") => setFilingType(value)}\n                    className=\"space-y-3\"\n                  >\n                    <div className=\"flex items-start space-x-3 p-3 rounded-lg border border-border/50 hover:border-purple-500/30 transition-colors\">\n                      <RadioGroupItem value=\"original\" id=\"original\" className=\"mt-1\" />\n                      <div className=\"flex-1\">\n                        <Label htmlFor=\"original\" className=\"font-medium cursor-pointer block mb-1\">\n                          Original W-2 (First-Time Filing)\n                        </Label>\n                        <p className=\"text-xs text-muted-foreground\">\n                          Use this if you're filing this W-2 for the first time, even if it's late. For example: filing\n                          a 2018 W-2 that was never submitted before.\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex items-start space-x-3 p-3 rounded-lg border border-border/50 hover:border-orange-500/30 transition-colors\">\n                      <RadioGroupItem value=\"corrected\" id=\"corrected\" className=\"mt-1\" />\n                      <div className=\"flex-1\">\n                        <Label htmlFor=\"corrected\" className=\"font-medium cursor-pointer block mb-1\">\n                          Corrected W-2c (Fixing Previous Filing)\n                        </Label>\n                        <p className=\"text-xs text-muted-foreground\">\n                          Use this only if you already filed this W-2 before and need to correct errors (wrong SSN,\n                          incorrect amounts, etc.). Requires showing original vs corrected values.\n                        </p>\n                      </div>\n                    </div>\n                  </RadioGroup>\n                </div>\n\n                <div className=\"flex items-center gap-3\">\n                  <span className=\"text-sm\">Report employee wages and tax withholdings for</span>\n                  <Select\n                    value={formData.taxYear}\n                    onValueChange={(value) => setFormData({ ...formData, taxYear: value })}\n                  >\n                    <SelectTrigger className=\"w-[120px] h-8 bg-background/80 border-purple-500/20\">\n                      <SelectValue placeholder=\"Select year\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {taxYearOptions.map((year) => (\n                        <SelectItem key={year} value={year.toString()}>\n                          {year}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                {isPaperFilingRequired && filingType === \"original\" && (\n                  <Alert className=\"bg-orange-500/10 border-orange-500/20\">\n                    <AlertCircle className=\"h-4 w-4 text-orange-600\" />\n                    <AlertTitle className=\"text-orange-600 font-semibold\">\n                      Late Original W-2 Filing - Paper Filing Required\n                    </AlertTitle>\n                    <AlertDescription className=\"text-sm space-y-2 mt-2\">\n                      <p>\n                        <strong>Tax year {formData.taxYear}</strong> is beyond the IRS e-filing deadline (January 31st\n                        of the following year).\n                      </p>\n                      <p>Since this is your first time filing this W-2, you'll need to:</p>\n                      <ul className=\"list-disc list-inside space-y-1 ml-2\">\n                        <li>Complete the original Form W-2 (not W-2c)</li>\n                        <li>Submit via paper mail to the IRS</li>\n                        <li>Include a cover letter explaining the late filing</li>\n                        <li>Be prepared for potential late filing penalties</li>\n                      </ul>\n                      <div className=\"mt-3 p-3 bg-background/50 rounded border border-orange-500/20\">\n                        <p className=\"font-semibold text-orange-600 mb-1\">üì¶ Paper Filing Package - $29</p>\n                        <p className=\"text-xs\">\n                          We'll generate pre-filled W-2 forms, cover letter template, IRS mailing labels, and filing\n                          instructions. Premium service ($49) includes certified mail with tracking.\n                        </p>\n                      </div>\n                    </AlertDescription>\n                  </Alert>\n                )}\n\n                {isPaperFilingRequired && filingType === \"corrected\" && (\n                  <Alert className=\"bg-orange-500/10 border-orange-500/20\">\n                    <AlertCircle className=\"h-4 w-4 text-orange-600\" />\n                    <AlertTitle className=\"text-orange-600 font-semibold\">\n                      W-2c Correction - Paper Filing Required\n                    </AlertTitle>\n                    <AlertDescription className=\"text-sm space-y-2 mt-2\">\n                      <p>\n                        <strong>Tax year {formData.taxYear}</strong> corrections must be paper filed (beyond e-filing\n                        window).\n                      </p>\n                      <p>Since you're correcting a previously filed W-2, you'll need to:</p>\n                      <ul className=\"list-disc list-inside space-y-1 ml-2\">\n                        <li>Complete Form W-2c (Corrected Wage and Tax Statement)</li>\n                        <li>Show both original amounts (what was filed) and corrected amounts</li>\n                        <li>Submit via paper mail to the IRS</li>\n                        <li>Include explanation of what's being corrected and why</li>\n                      </ul>\n                      <div className=\"mt-3 p-3 bg-background/50 rounded border border-orange-500/20\">\n                        <p className=\"font-semibold text-orange-600 mb-1\">üì¶ W-2c Correction Package - $35</p>\n                        <p className=\"text-xs\">\n                          We'll generate pre-filled W-2c forms with before/after comparison, explanation letter, IRS\n                          mailing labels, and instructions. Premium service ($49) includes certified mail with tracking.\n                        </p>\n                      </div>\n                    </AlertDescription>\n                  </Alert>\n                )}\n\n                {isEfileEligible && filingType === \"corrected\" && (\n                  <Alert className=\"bg-blue-500/10 border-blue-500/20\">\n                    <FileText className=\"h-4 w-4 text-blue-600\" />\n                    <AlertTitle className=\"text-blue-600 font-semibold\">\n                      W-2c Correction - E-Filing Available\n                    </AlertTitle>\n                    <AlertDescription className=\"text-sm space-y-2 mt-2\">\n                      <p>\n                        You're filing a corrected W-2c for <strong>{formData.taxYear}</strong>. This correction is\n                        eligible for e-filing.\n                      </p>\n                      <div className=\"mt-2 p-2 bg-blue-500/5 rounded border border-blue-500/10\">\n                        <p className=\"text-xs\">\n                          <strong>Note:</strong> W-2c requires you to provide both the original amounts (what was\n                          previously filed) and the corrected amounts for all changed fields. We'll guide you through\n                          this process.\n                        </p>\n                      </div>\n                    </AlertDescription>\n                  </Alert>\n                )}\n\n                {isEfileEligible && filingType === \"original\" && (\n                  <Alert className=\"bg-green-500/10 border-green-500/20\">\n                    <Info className=\"h-4 w-4 text-green-600\" />\n                    <AlertTitle className=\"text-green-600 font-semibold\">E-Filing Available</AlertTitle>\n                    <AlertDescription className=\"text-sm\">\n                      Tax year {formData.taxYear} is eligible for electronic filing. Complete the form below and we'll\n                      submit it directly to the IRS.\n                      <span className=\"block mt-2 text-purple-600 font-medium\">\n                        üí° Tip: Use the \"Upload W-2\" tab to auto-fill this form with AI!\n                      </span>\n                    </AlertDescription>\n                  </Alert>\n                )}\n              </div>\n            </CardDescription>\n          </CardHeader>\n\n          <CardContent className=\"space-y-8 relative\">\n            {/* Employer Information */}\n            <div className=\"space-y-4\">\n              <h3 className=\"font-semibold text-lg flex items-center gap-2\">\n                <div className=\"h-8 w-1 bg-gradient-to-b from-purple-600 to-orange-600 rounded-full\" />\n                Employer Information\n              </h3>\n              <div className=\"grid gap-4 md:grid-cols-2\">\n                <div>\n                  <Label htmlFor=\"employerName\">Employer Name *</Label>\n                  <Input\n                    id=\"employerName\"\n                    required\n                    value={formData.employerName}\n                    onChange={(e) => setFormData({ ...formData, employerName: e.target.value })}\n                    placeholder=\"ABC Company Inc.\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"employerEIN\" className=\"flex items-center gap-2\">\n                    Employer EIN *\n                    <Lock className=\"h-3 w-3 text-green-500\" />\n                  </Label>\n                  <Input\n                    id=\"employerEIN\"\n                    required\n                    placeholder=\"XX-XXXXXXX\"\n                    value={formData.employerEIN}\n                    onChange={(e) => {\n                      const formatted = formatEIN(e.target.value)\n                      setFormData({ ...formData, employerEIN: formatted })\n                    }}\n                    maxLength={10}\n                  />\n                  <p className=\"text-xs text-muted-foreground mt-1 flex items-center gap-1\">\n                    <Lock className=\"h-3 w-3\" />\n                    Encrypted and secure\n                  </p>\n                </div>\n                <div className=\"md:col-span-2\">\n                  <Label htmlFor=\"employerAddress\">Address *</Label>\n                  <Input\n                    id=\"employerAddress\"\n                    required\n                    value={formData.employerAddress}\n                    onChange={(e) => setFormData({ ...formData, employerAddress: e.target.value })}\n                    placeholder=\"123 Business St\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"employerCity\">City *</Label>\n                  <Input\n                    id=\"employerCity\"\n                    required\n                    value={formData.employerCity}\n                    onChange={(e) => setFormData({ ...formData, employerCity: e.target.value })}\n                    placeholder=\"San Francisco\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"employerState\">State *</Label>\n                  <Input\n                    id=\"employerState\"\n                    required\n                    maxLength={2}\n                    placeholder=\"CA\"\n                    value={formData.employerState}\n                    onChange={(e) => setFormData({ ...formData, employerState: e.target.value.toUpperCase() })}\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"employerZip\">ZIP Code *</Label>\n                  <Input\n                    id=\"employerZip\"\n                    required\n                    value={formData.employerZip}\n                    onChange={(e) => setFormData({ ...formData, employerZip: e.target.value })}\n                    placeholder=\"94102\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            {/* Employee Information */}\n            <div className=\"space-y-4\">\n              <h3 className=\"font-semibold text-lg flex items-center gap-2\">\n                <div className=\"h-8 w-1 bg-gradient-to-b from-purple-600 to-orange-600 rounded-full\" />\n                Employee Information\n              </h3>\n              <div className=\"grid gap-4 md:grid-cols-2\">\n                <div>\n                  <Label htmlFor=\"employeeFirstName\">First Name *</Label>\n                  <Input\n                    id=\"employeeFirstName\"\n                    required\n                    value={formData.employeeFirstName}\n                    onChange={(e) => setFormData({ ...formData, employeeFirstName: e.target.value })}\n                    placeholder=\"John\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"employeeMiddleInitial\">Middle Initial</Label>\n                  <Input\n                    id=\"employeeMiddleInitial\"\n                    maxLength={1}\n                    value={formData.employeeMiddleInitial}\n                    onChange={(e) => setFormData({ ...formData, employeeMiddleInitial: e.target.value.toUpperCase() })}\n                    placeholder=\"A\"\n                    className=\"uppercase\"\n                  />\n                </div>\n                <div className=\"md:col-span-2\">\n                  <Label htmlFor=\"employeeLastName\">Last Name *</Label>\n                  <Input\n                    id=\"employeeLastName\"\n                    required\n                    value={formData.employeeLastName}\n                    onChange={(e) => {\n                      const value = e.target.value\n                      const parsed = parseLastNameWithMiddleInitial(value)\n                      if (parsed && parsed.middleInitial && !formData.employeeMiddleInitial) {\n                        setFormData({\n                          ...formData,\n                          employeeLastName: parsed.lastName,\n                          employeeMiddleInitial: parsed.middleInitial,\n                        })\n                      } else {\n                        setFormData({ ...formData, employeeLastName: value })\n                      }\n                    }}\n                    placeholder=\"Doe\"\n                  />\n                </div>\n                <div className=\"md:col-span-2\">\n                  <Label htmlFor=\"employeeSSN\" className=\"flex items-center gap-2\">\n                    Social Security Number *\n                    <Lock className=\"h-3 w-3 text-green-500\" />\n                  </Label>\n                  <Input\n                    id=\"employeeSSN\"\n                    required\n                    placeholder=\"XXX-XX-XXXX\"\n                    value={formData.employeeSSN}\n                    onChange={(e) => {\n                      // Apply automatic SSN formatting (XXX-XX-XXXX)\n                      const formatted = formatSSN(e.target.value)\n                      setFormData({ ...formData, employeeSSN: formatted })\n                    }}\n                  />\n                  <p className=\"text-xs text-muted-foreground mt-1 flex items-center gap-1\">\n                    <Lock className=\"h-3 w-3\" />\n                    AES-256 encrypted at rest\n                  </p>\n                </div>\n                <div>\n                  <Label htmlFor=\"employeeAddress\">Address</Label>\n                  <Input\n                    id=\"employeeAddress\"\n                    value={formData.employeeAddress}\n                    onChange={(e) => setFormData({ ...formData, employeeAddress: e.target.value })}\n                    placeholder=\"456 Employee Ave\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"employeeCity\">City</Label>\n                  <Input\n                    id=\"employeeCity\"\n                    value={formData.employeeCity}\n                    onChange={(e) => setFormData({ ...formData, employeeCity: e.target.value })}\n                    placeholder=\"San Francisco\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"employeeState\">State</Label>\n                  <Input\n                    id=\"employeeState\"\n                    maxLength={2}\n                    placeholder=\"CA\"\n                    value={formData.employeeState}\n                    onChange={(e) => setFormData({ ...formData, employeeState: e.target.value.toUpperCase() })}\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"employeeZip\">ZIP Code</Label>\n                  <Input\n                    id=\"employeeZip\"\n                    value={formData.employeeZip}\n                    onChange={(e) => setFormData({ ...formData, employeeZip: e.target.value })}\n                    placeholder=\"94102\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            {/* Wage Information */}\n            <div className=\"space-y-4\">\n              <h3 className=\"font-semibold text-lg flex items-center gap-2\">\n                <div className=\"h-8 w-1 bg-gradient-to-b from-purple-600 to-orange-600 rounded-full\" />\n                Wage and Tax Information\n              </h3>\n              <div className=\"grid gap-4 md:grid-cols-2\">\n                <div>\n                  <Label htmlFor=\"wages\">Box 1: Wages, tips, other compensation *</Label>\n                  <Input\n                    id=\"wages\"\n                    type=\"number\"\n                    step=\"0.01\"\n                    required\n                    value={formData.wages}\n                    onChange={(e) => setFormData({ ...formData, wages: e.target.value })}\n                    placeholder=\"75000.00\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"federalWithholding\">Box 2: Federal income tax withheld *</Label>\n                  <Input\n                    id=\"federalWithholding\"\n                    type=\"number\"\n                    step=\"0.01\"\n                    required\n                    value={formData.federalWithholding}\n                    onChange={(e) => setFormData({ ...formData, federalWithholding: e.target.value })}\n                    placeholder=\"12500.00\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"socialSecurityWages\">Box 3: Social security wages *</Label>\n                  <Input\n                    id=\"socialSecurityWages\"\n                    type=\"number\"\n                    step=\"0.01\"\n                    required\n                    value={formData.socialSecurityWages}\n                    onChange={(e) => setFormData({ ...formData, socialSecurityWages: e.target.value })}\n                    placeholder=\"75000.00\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"socialSecurityWithholding\">Box 4: Social security tax withheld *</Label>\n                  <Input\n                    id=\"socialSecurityWithholding\"\n                    type=\"number\"\n                    step=\"0.01\"\n                    required\n                    value={formData.socialSecurityWithholding}\n                    onChange={(e) => setFormData({ ...formData, socialSecurityWithholding: e.target.value })}\n                    placeholder=\"4650.00\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"medicareWages\">Box 5: Medicare wages and tips *</Label>\n                  <Input\n                    id=\"medicareWages\"\n                    type=\"number\"\n                    step=\"0.01\"\n                    required\n                    value={formData.medicareWages}\n                    onChange={(e) => setFormData({ ...formData, medicareWages: e.target.value })}\n                    placeholder=\"75000.00\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"medicareWithholding\">Box 6: Medicare tax withheld *</Label>\n                  <Input\n                    id=\"medicareWithholding\"\n                    type=\"number\"\n                    step=\"0.01\"\n                    required\n                    value={formData.medicareWithholding}\n                    onChange={(e) => setFormData({ ...formData, medicareWithholding: e.target.value })}\n                    placeholder=\"1087.50\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"socialSecurityTips\">Box 7: Social security tips</Label>\n                  <Input\n                    id=\"socialSecurityTips\"\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={formData.socialSecurityTips}\n                    onChange={(e) => setFormData({ ...formData, socialSecurityTips: e.target.value })}\n                    placeholder=\"0.00\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"allocatedTips\">Box 8: Allocated tips</Label>\n                  <Input\n                    id=\"allocatedTips\"\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={formData.allocatedTips}\n                    onChange={(e) => setFormData({ ...formData, allocatedTips: e.target.value })}\n                    placeholder=\"0.00\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"dependentCareBenefits\">Box 11: Dependent care benefits</Label>\n                  <Input\n                    id=\"dependentCareBenefits\"\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={formData.dependentCareBenefits}\n                    onChange={(e) => setFormData({ ...formData, dependentCareBenefits: e.target.value })}\n                    placeholder=\"0.00\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"nonqualifiedPlans\">Box 12: Nonqualified plans</Label>\n                  <Input\n                    id=\"nonqualifiedPlans\"\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={formData.nonqualifiedPlans}\n                    onChange={(e) => setFormData({ ...formData, nonqualifiedPlans: e.target.value })}\n                    placeholder=\"0.00\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"box12Code\">Box 12 Code</Label>\n                  <Input\n                    id=\"box12Code\"\n                    value={formData.box12Code}\n                    onChange={(e) => setFormData({ ...formData, box12Code: e.target.value })}\n                    placeholder=\"Code\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"box12Amount\">Box 12 Amount</Label>\n                  <Input\n                    id=\"box12Amount\"\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={formData.box12Amount}\n                    onChange={(e) => setFormData({ ...formData, box12Amount: e.target.value })}\n                    placeholder=\"0.00\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            {/* State Information */}\n            <div className=\"space-y-4\">\n              <h3 className=\"font-semibold text-lg flex items-center gap-2\">\n                <div className=\"h-8 w-1 bg-gradient-to-b from-purple-600 to-orange-600 rounded-full\" />\n                State and Local Information\n              </h3>\n              <div className=\"grid gap-4 md:grid-cols-2\">\n                <div>\n                  <Label htmlFor=\"stateWages\">State wages, tips, etc.</Label>\n                  <Input\n                    id=\"stateWages\"\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={formData.stateWages}\n                    onChange={(e) => setFormData({ ...formData, stateWages: e.target.value })}\n                    placeholder=\"75000.00\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"stateWithholding\">State income tax</Label>\n                  <Input\n                    id=\"stateWithholding\"\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={formData.stateWithholding}\n                    onChange={(e) => setFormData({ ...formData, stateWithholding: e.target.value })}\n                    placeholder=\"3750.00\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"localWages\">Local wages, tips, etc.</Label>\n                  <Input\n                    id=\"localWages\"\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={formData.localWages}\n                    onChange={(e) => setFormData({ ...formData, localWages: e.target.value })}\n                    placeholder=\"0.00\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"localWithholding\">Local income tax</Label>\n                  <Input\n                    id=\"localWithholding\"\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={formData.localWithholding}\n                    onChange={(e) => setFormData({ ...formData, localWithholding: e.target.value })}\n                    placeholder=\"0.00\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            {/* Validation Results */}\n            {validationResult && (\n              <div className=\"space-y-3\">\n                {validationResult.warnings\n                  ?.filter((w: any) => w.field === \"system\")\n                  .map((warning: any, index: number) => (\n                    <Alert key={`system-warning-${index}`} className=\"bg-blue-500/10 border-blue-500/20\">\n                      <Info className=\"h-4 w-4 text-blue-600\" />\n                      <AlertTitle className=\"text-blue-600 font-semibold\">Validation Status</AlertTitle>\n                      <AlertDescription className=\"text-sm\">\n                        {warning.message}\n                        {warning.message.includes(\"temporarily unavailable\") && (\n                          <span className=\"block mt-2 text-xs text-muted-foreground\">\n                            Don't worry - your form has been checked with comprehensive rule-based validation. You can\n                            safely proceed with submission.\n                          </span>\n                        )}\n                      </AlertDescription>\n                    </Alert>\n                  ))}\n\n                {validationResult.errors?.map((error: any, index: number) => (\n                  <Alert key={`error-${index}`} className=\"bg-red-500/10 border-red-500/20\">\n                    <AlertCircle className=\"h-4 w-4 text-red-600\" />\n                    <AlertTitle className=\"text-red-600 font-semibold\">Error: {error.field}</AlertTitle>\n                    <AlertDescription className=\"text-sm\">{error.message}</AlertDescription>\n                  </Alert>\n                ))}\n\n                {validationResult.warnings\n                  ?.filter((w: any) => w.field !== \"system\")\n                  .map((warning: any, index: number) => (\n                    <Alert key={`warning-${index}`} className=\"bg-orange-500/10 border-orange-500/20\">\n                      <AlertTriangle className=\"h-4 w-4 text-orange-600\" />\n                      <AlertTitle className=\"text-orange-600 font-semibold\">Warning: {warning.field}</AlertTitle>\n                      <AlertDescription className=\"text-sm\">{warning.message}</AlertDescription>\n                    </Alert>\n                  ))}\n\n                {validationResult.suggestions?.map((suggestion: any, index: number) => (\n                  <Alert key={`suggestion-${index}`} className=\"bg-blue-500/10 border-blue-500/20\">\n                    <Info className=\"h-4 w-4 text-blue-600\" />\n                    <AlertTitle className=\"text-blue-600 font-semibold\">Suggestion: {suggestion.field}</AlertTitle>\n                    <AlertDescription className=\"text-sm\">{suggestion.message}</AlertDescription>\n                  </Alert>\n                ))}\n\n                {validationResult.valid &&\n                  !validationResult.errors?.length &&\n                  !validationResult.warnings?.filter((w: any) => w.field !== \"system\").length && (\n                    <Alert className=\"bg-green-500/10 border-green-500/20\">\n                      <CheckCircle2 className=\"h-4 w-4 text-green-600\" />\n                      <AlertTitle className=\"text-green-600 font-semibold\">All Clear!</AlertTitle>\n                      <AlertDescription className=\"text-sm\">\n                        Your form passed all validation checks. Ready to submit!\n                      </AlertDescription>\n                    </Alert>\n                  )}\n              </div>\n            )}\n\n            {/* Action Buttons */}\n            <div className=\"flex flex-col gap-4 pt-6 border-t border-border\">\n              <div className=\"flex gap-4\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={handleValidateForm}\n                  disabled={validating || loading}\n                  className=\"flex-1 bg-transparent border-blue-500/20\"\n                >\n                  {validating ? (\n                    <>\n                      <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                      Validating...\n                    </>\n                  ) : (\n                    <>\n                      <Sparkles className=\"mr-2 h-4 w-4\" />\n                      AI Validate Form\n                    </>\n                  )}\n                </Button>\n\n                {isPaperFilingRequired && (\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    onClick={() => setShowPenaltyDialog(true)}\n                    className=\"flex-1 bg-transparent border-orange-500/20\"\n                  >\n                    <FileText className=\"mr-2 h-4 w-4\" />\n                    Generate Penalty Letter ($19)\n                  </Button>\n                )}\n              </div>\n\n              <Button\n                type=\"submit\"\n                disabled={loading || savingDraft || validating}\n                className=\"w-full bg-gradient-to-r from-purple-600 to-orange-600 hover:from-purple-700 hover:to-orange-700 shadow-lg text-lg py-6\"\n              >\n                Continue to Review\n                <ArrowRight className=\"ml-2 h-5 w-5\" />\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      <FilingProgressDialog\n        open={showProgressDialog}\n        currentStep={filingProgress}\n        steps={progressSteps}\n        isComplete={filingProgress === 4}\n        isError={false}\n        onClose={() => {\n          setShowProgressDialog(false)\n          setFilingProgress(0)\n          if (filingProgress === 4) {\n            router.push(\"/dashboard/filing\")\n          }\n        }}\n      />\n\n      <PenaltyAbatementDialog\n        open={showPenaltyDialog}\n        onOpenChange={setShowPenaltyDialog}\n        businessName={formData.employerName}\n        ein={formData.employerEIN}\n        taxYear={Number.parseInt(formData.taxYear)}\n        formType=\"W-2\"\n      />\n    </form>\n  )\n}\n","\"use client\"\n\nimport { useState } from \"react\"\nimport FormW2 from \"@/components/forms/form-w2\"\nimport { DocumentUpload } from \"@/components/forms/document-upload\"\nimport { DocumentChecklist } from \"@/components/document-checklist\"\nimport { QuickBooksSync } from \"@/components/forms/quickbooks-sync\"\nimport { PayrollIntegration } from \"@/components/payroll-integration\"\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\nimport { toast } from \"@/components/ui/use-toast\"\nimport { useDashboard } from \"@/components/dashboard-provider\"\nimport { Alert, AlertDescription } from \"@/components/ui/alert\"\nimport { InfoIcon } from \"lucide-react\"\n\nexport default function FileW2Page() {\n  const [extractedData, setExtractedData] = useState<any>(null)\n  const [activeTab, setActiveTab] = useState(\"upload\")\n  const [uploadedDocuments, setUploadedDocuments] = useState<\n    Array<{ documentType: string; status: string; fileName: string; data: any }>\n  >([])\n  const [targetDocType, setTargetDocType] = useState<string | undefined>(undefined)\n\n  const { user } = useDashboard()\n  const userId = user?.id || \"\"\n\n  const handleExtractComplete = (data: any, metadata?: any) => {\n    console.log(\"[v0] Extracted data received in page:\", data)\n\n    // The extraction API returns flat structure: { employer_name, employer_ein, employee_name, wages, ... }\n    // Not nested structure: { employer: { name }, income: { wages } }\n\n    if (!data) {\n      console.error(\"[v0] No data received from extraction\")\n      toast({\n        title: \"‚ö†Ô∏è Extraction Failed\",\n        description: \"Could not extract W-2 data. Please enter manually.\",\n        variant: \"destructive\",\n      })\n      setActiveTab(\"manual\")\n      return\n    }\n\n    if (data.isTemplateData === true || metadata?.warning === \"template_data_detected\") {\n      console.log(\"[v0] Template/demo document detected\")\n      toast({\n        title: \"üìã Sample Document Detected\",\n        description:\n          \"This appears to be a demo/sample W-2. The data has been pre-filled as a starting point. Please update with your actual information before submitting.\",\n        duration: 8000,\n      })\n      setExtractedData(data)\n      setActiveTab(\"manual\")\n\n      setUploadedDocuments((prev) => [\n        ...prev,\n        {\n          documentType: data.documentType || \"w2\",\n          status: \"complete\",\n          fileName: metadata?.fileName || \"uploaded-document.pdf\",\n          data: data,\n        },\n      ])\n      return\n    }\n\n    // Check for minimum required data using flat structure\n    const hasMinimumData =\n      data.employer_name &&\n      (data.employee_name || (data.employee_name?.first && data.employee_name?.last)) &&\n      data.wages !== undefined &&\n      data.wages !== null\n\n    if (!hasMinimumData) {\n      console.log(\"[v0] Partial extraction - some fields missing, but allowing user to complete\")\n      toast({\n        title: \"‚ö†Ô∏è Partial Extraction\",\n        description: \"Some fields could not be extracted. Please review and complete the missing information.\",\n      })\n      setExtractedData(data)\n      setActiveTab(\"manual\")\n\n      setUploadedDocuments((prev) => [\n        ...prev,\n        {\n          documentType: data.documentType || \"w2\",\n          status: \"complete\",\n          fileName: metadata?.fileName || \"uploaded-document.pdf\",\n          data: data,\n        },\n      ])\n      return\n    }\n\n    setExtractedData(data)\n    setActiveTab(\"manual\")\n\n    setUploadedDocuments((prev) => [\n      ...prev,\n      {\n        documentType: data.documentType || \"w2\",\n        status: \"complete\",\n        fileName: metadata?.fileName || \"uploaded-document.pdf\",\n        data: data,\n      },\n    ])\n\n    const employeeName =\n      typeof data.employee_name === \"string\"\n        ? data.employee_name\n        : `${data.employee_name?.first || \"\"} ${data.employee_name?.last || \"\"}`.trim()\n\n    toast({\n      title: \"‚úÖ Extraction Successful\",\n      description: `Data extracted for ${employeeName || \"employee\"}. Review and submit to IRS.`,\n    })\n\n    setTargetDocType(undefined)\n  }\n\n  const handleUploadRequired = (docType: string) => {\n    console.log(\"[v0] Upload required for document type:\", docType)\n    setTargetDocType(docType)\n    setActiveTab(\"upload\")\n\n    toast({\n      title: \"Upload Document\",\n      description: `Please upload ${docType.toUpperCase()} document`,\n    })\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-background via-purple-500/5 to-orange-500/5 p-6\">\n      <div className=\"absolute inset-0 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-purple-500/10 via-transparent to-orange-500/10 pointer-events-none\" />\n\n      <div className=\"relative mx-auto max-w-5xl space-y-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold tracking-tight bg-gradient-to-r from-purple-600 to-orange-600 bg-clip-text text-transparent\">\n              File Form W-2\n            </h1>\n            <p className=\"text-muted-foreground mt-2\">Report employee wages and tax withholdings</p>\n          </div>\n        </div>\n\n        <DocumentChecklist\n          filingType=\"w2\"\n          uploadedDocuments={uploadedDocuments}\n          onUploadRequired={handleUploadRequired}\n        />\n\n        <Alert>\n          <InfoIcon className=\"h-4 w-4\" />\n          <AlertDescription>\n            <p className=\"font-medium mb-1\">Required for W-2 E-Filing:</p>\n            <ul className=\"list-disc list-inside text-sm space-y-1\">\n              <li>\n                <strong>W-2 Form</strong> - The actual wage and tax statement (Required)\n              </li>\n              <li>\n                <strong>Employee ID</strong> - Verification documents like passport or driver's license (Optional but\n                recommended)\n              </li>\n            </ul>\n            <p className=\"mt-2 text-xs text-muted-foreground\">\n              Upload all documents using the tabs below. AI will automatically extract data from tax forms.\n            </p>\n          </AlertDescription>\n        </Alert>\n\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-4 bg-background/50 backdrop-blur-sm\">\n            <TabsTrigger value=\"upload\">üìÑ Upload W-2</TabsTrigger>\n            <TabsTrigger value=\"payroll\">üíº Payroll Sync</TabsTrigger>\n            <TabsTrigger value=\"quickbooks\">üìä QuickBooks</TabsTrigger>\n            <TabsTrigger value=\"manual\">‚úçÔ∏è Manual Entry</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"upload\" className=\"mt-6\">\n            <DocumentUpload\n              userId={userId}\n              onExtractComplete={handleExtractComplete}\n              targetDocumentType={targetDocType}\n              allowMultiple={true}\n              title={targetDocType ? `Upload ${targetDocType.toUpperCase()}` : \"Upload W-2 Documents\"}\n              description={\n                targetDocType === \"w2\"\n                  ? \"Upload W-2 forms for yourself and spouse (if filing jointly)\"\n                  : targetDocType === \"identification\"\n                    ? \"Upload employee ID verification (passport, driver's license, etc.)\"\n                    : \"Upload W-2 and supporting documents for all household members\"\n              }\n            />\n          </TabsContent>\n\n          <TabsContent value=\"payroll\" className=\"mt-6\">\n            <PayrollIntegration />\n          </TabsContent>\n\n          <TabsContent value=\"quickbooks\" className=\"mt-6\">\n            <QuickBooksSync onSyncComplete={handleExtractComplete} />\n          </TabsContent>\n\n          <TabsContent value=\"manual\" className=\"mt-6\">\n            <FormW2 extractedData={extractedData} />\n          </TabsContent>\n        </Tabs>\n      </div>\n    </div>\n  )\n}\n","\"use client\";\n\n// src/collection-legacy.tsx\nimport React from \"react\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createSlot } from \"@radix-ui/react-slot\";\nimport { jsx } from \"react/jsx-runtime\";\nfunction createCollection(name) {\n  const PROVIDER_NAME = name + \"CollectionProvider\";\n  const [createCollectionContext, createCollectionScope] = createContextScope(PROVIDER_NAME);\n  const [CollectionProviderImpl, useCollectionContext] = createCollectionContext(\n    PROVIDER_NAME,\n    { collectionRef: { current: null }, itemMap: /* @__PURE__ */ new Map() }\n  );\n  const CollectionProvider = (props) => {\n    const { scope, children } = props;\n    const ref = React.useRef(null);\n    const itemMap = React.useRef(/* @__PURE__ */ new Map()).current;\n    return /* @__PURE__ */ jsx(CollectionProviderImpl, { scope, itemMap, collectionRef: ref, children });\n  };\n  CollectionProvider.displayName = PROVIDER_NAME;\n  const COLLECTION_SLOT_NAME = name + \"CollectionSlot\";\n  const CollectionSlotImpl = createSlot(COLLECTION_SLOT_NAME);\n  const CollectionSlot = React.forwardRef(\n    (props, forwardedRef) => {\n      const { scope, children } = props;\n      const context = useCollectionContext(COLLECTION_SLOT_NAME, scope);\n      const composedRefs = useComposedRefs(forwardedRef, context.collectionRef);\n      return /* @__PURE__ */ jsx(CollectionSlotImpl, { ref: composedRefs, children });\n    }\n  );\n  CollectionSlot.displayName = COLLECTION_SLOT_NAME;\n  const ITEM_SLOT_NAME = name + \"CollectionItemSlot\";\n  const ITEM_DATA_ATTR = \"data-radix-collection-item\";\n  const CollectionItemSlotImpl = createSlot(ITEM_SLOT_NAME);\n  const CollectionItemSlot = React.forwardRef(\n    (props, forwardedRef) => {\n      const { scope, children, ...itemData } = props;\n      const ref = React.useRef(null);\n      const composedRefs = useComposedRefs(forwardedRef, ref);\n      const context = useCollectionContext(ITEM_SLOT_NAME, scope);\n      React.useEffect(() => {\n        context.itemMap.set(ref, { ref, ...itemData });\n        return () => void context.itemMap.delete(ref);\n      });\n      return /* @__PURE__ */ jsx(CollectionItemSlotImpl, { ...{ [ITEM_DATA_ATTR]: \"\" }, ref: composedRefs, children });\n    }\n  );\n  CollectionItemSlot.displayName = ITEM_SLOT_NAME;\n  function useCollection(scope) {\n    const context = useCollectionContext(name + \"CollectionConsumer\", scope);\n    const getItems = React.useCallback(() => {\n      const collectionNode = context.collectionRef.current;\n      if (!collectionNode) return [];\n      const orderedNodes = Array.from(collectionNode.querySelectorAll(`[${ITEM_DATA_ATTR}]`));\n      const items = Array.from(context.itemMap.values());\n      const orderedItems = items.sort(\n        (a, b) => orderedNodes.indexOf(a.ref.current) - orderedNodes.indexOf(b.ref.current)\n      );\n      return orderedItems;\n    }, [context.collectionRef, context.itemMap]);\n    return getItems;\n  }\n  return [\n    { Provider: CollectionProvider, Slot: CollectionSlot, ItemSlot: CollectionItemSlot },\n    useCollection,\n    createCollectionScope\n  ];\n}\n\n// src/collection.tsx\nimport React2 from \"react\";\nimport { createContextScope as createContextScope2 } from \"@radix-ui/react-context\";\nimport { useComposedRefs as useComposedRefs2 } from \"@radix-ui/react-compose-refs\";\nimport { createSlot as createSlot2 } from \"@radix-ui/react-slot\";\n\n// src/ordered-dictionary.ts\nvar __instanciated = /* @__PURE__ */ new WeakMap();\nvar OrderedDict = class _OrderedDict extends Map {\n  #keys;\n  constructor(entries) {\n    super(entries);\n    this.#keys = [...super.keys()];\n    __instanciated.set(this, true);\n  }\n  set(key, value) {\n    if (__instanciated.get(this)) {\n      if (this.has(key)) {\n        this.#keys[this.#keys.indexOf(key)] = key;\n      } else {\n        this.#keys.push(key);\n      }\n    }\n    super.set(key, value);\n    return this;\n  }\n  insert(index, key, value) {\n    const has = this.has(key);\n    const length = this.#keys.length;\n    const relativeIndex = toSafeInteger(index);\n    let actualIndex = relativeIndex >= 0 ? relativeIndex : length + relativeIndex;\n    const safeIndex = actualIndex < 0 || actualIndex >= length ? -1 : actualIndex;\n    if (safeIndex === this.size || has && safeIndex === this.size - 1 || safeIndex === -1) {\n      this.set(key, value);\n      return this;\n    }\n    const size = this.size + (has ? 0 : 1);\n    if (relativeIndex < 0) {\n      actualIndex++;\n    }\n    const keys = [...this.#keys];\n    let nextValue;\n    let shouldSkip = false;\n    for (let i = actualIndex; i < size; i++) {\n      if (actualIndex === i) {\n        let nextKey = keys[i];\n        if (keys[i] === key) {\n          nextKey = keys[i + 1];\n        }\n        if (has) {\n          this.delete(key);\n        }\n        nextValue = this.get(nextKey);\n        this.set(key, value);\n      } else {\n        if (!shouldSkip && keys[i - 1] === key) {\n          shouldSkip = true;\n        }\n        const currentKey = keys[shouldSkip ? i : i - 1];\n        const currentValue = nextValue;\n        nextValue = this.get(currentKey);\n        this.delete(currentKey);\n        this.set(currentKey, currentValue);\n      }\n    }\n    return this;\n  }\n  with(index, key, value) {\n    const copy = new _OrderedDict(this);\n    copy.insert(index, key, value);\n    return copy;\n  }\n  before(key) {\n    const index = this.#keys.indexOf(key) - 1;\n    if (index < 0) {\n      return void 0;\n    }\n    return this.entryAt(index);\n  }\n  /**\n   * Sets a new key-value pair at the position before the given key.\n   */\n  setBefore(key, newKey, value) {\n    const index = this.#keys.indexOf(key);\n    if (index === -1) {\n      return this;\n    }\n    return this.insert(index, newKey, value);\n  }\n  after(key) {\n    let index = this.#keys.indexOf(key);\n    index = index === -1 || index === this.size - 1 ? -1 : index + 1;\n    if (index === -1) {\n      return void 0;\n    }\n    return this.entryAt(index);\n  }\n  /**\n   * Sets a new key-value pair at the position after the given key.\n   */\n  setAfter(key, newKey, value) {\n    const index = this.#keys.indexOf(key);\n    if (index === -1) {\n      return this;\n    }\n    return this.insert(index + 1, newKey, value);\n  }\n  first() {\n    return this.entryAt(0);\n  }\n  last() {\n    return this.entryAt(-1);\n  }\n  clear() {\n    this.#keys = [];\n    return super.clear();\n  }\n  delete(key) {\n    const deleted = super.delete(key);\n    if (deleted) {\n      this.#keys.splice(this.#keys.indexOf(key), 1);\n    }\n    return deleted;\n  }\n  deleteAt(index) {\n    const key = this.keyAt(index);\n    if (key !== void 0) {\n      return this.delete(key);\n    }\n    return false;\n  }\n  at(index) {\n    const key = at(this.#keys, index);\n    if (key !== void 0) {\n      return this.get(key);\n    }\n  }\n  entryAt(index) {\n    const key = at(this.#keys, index);\n    if (key !== void 0) {\n      return [key, this.get(key)];\n    }\n  }\n  indexOf(key) {\n    return this.#keys.indexOf(key);\n  }\n  keyAt(index) {\n    return at(this.#keys, index);\n  }\n  from(key, offset) {\n    const index = this.indexOf(key);\n    if (index === -1) {\n      return void 0;\n    }\n    let dest = index + offset;\n    if (dest < 0) dest = 0;\n    if (dest >= this.size) dest = this.size - 1;\n    return this.at(dest);\n  }\n  keyFrom(key, offset) {\n    const index = this.indexOf(key);\n    if (index === -1) {\n      return void 0;\n    }\n    let dest = index + offset;\n    if (dest < 0) dest = 0;\n    if (dest >= this.size) dest = this.size - 1;\n    return this.keyAt(dest);\n  }\n  find(predicate, thisArg) {\n    let index = 0;\n    for (const entry of this) {\n      if (Reflect.apply(predicate, thisArg, [entry, index, this])) {\n        return entry;\n      }\n      index++;\n    }\n    return void 0;\n  }\n  findIndex(predicate, thisArg) {\n    let index = 0;\n    for (const entry of this) {\n      if (Reflect.apply(predicate, thisArg, [entry, index, this])) {\n        return index;\n      }\n      index++;\n    }\n    return -1;\n  }\n  filter(predicate, thisArg) {\n    const entries = [];\n    let index = 0;\n    for (const entry of this) {\n      if (Reflect.apply(predicate, thisArg, [entry, index, this])) {\n        entries.push(entry);\n      }\n      index++;\n    }\n    return new _OrderedDict(entries);\n  }\n  map(callbackfn, thisArg) {\n    const entries = [];\n    let index = 0;\n    for (const entry of this) {\n      entries.push([entry[0], Reflect.apply(callbackfn, thisArg, [entry, index, this])]);\n      index++;\n    }\n    return new _OrderedDict(entries);\n  }\n  reduce(...args) {\n    const [callbackfn, initialValue] = args;\n    let index = 0;\n    let accumulator = initialValue ?? this.at(0);\n    for (const entry of this) {\n      if (index === 0 && args.length === 1) {\n        accumulator = entry;\n      } else {\n        accumulator = Reflect.apply(callbackfn, this, [accumulator, entry, index, this]);\n      }\n      index++;\n    }\n    return accumulator;\n  }\n  reduceRight(...args) {\n    const [callbackfn, initialValue] = args;\n    let accumulator = initialValue ?? this.at(-1);\n    for (let index = this.size - 1; index >= 0; index--) {\n      const entry = this.at(index);\n      if (index === this.size - 1 && args.length === 1) {\n        accumulator = entry;\n      } else {\n        accumulator = Reflect.apply(callbackfn, this, [accumulator, entry, index, this]);\n      }\n    }\n    return accumulator;\n  }\n  toSorted(compareFn) {\n    const entries = [...this.entries()].sort(compareFn);\n    return new _OrderedDict(entries);\n  }\n  toReversed() {\n    const reversed = new _OrderedDict();\n    for (let index = this.size - 1; index >= 0; index--) {\n      const key = this.keyAt(index);\n      const element = this.get(key);\n      reversed.set(key, element);\n    }\n    return reversed;\n  }\n  toSpliced(...args) {\n    const entries = [...this.entries()];\n    entries.splice(...args);\n    return new _OrderedDict(entries);\n  }\n  slice(start, end) {\n    const result = new _OrderedDict();\n    let stop = this.size - 1;\n    if (start === void 0) {\n      return result;\n    }\n    if (start < 0) {\n      start = start + this.size;\n    }\n    if (end !== void 0 && end > 0) {\n      stop = end - 1;\n    }\n    for (let index = start; index <= stop; index++) {\n      const key = this.keyAt(index);\n      const element = this.get(key);\n      result.set(key, element);\n    }\n    return result;\n  }\n  every(predicate, thisArg) {\n    let index = 0;\n    for (const entry of this) {\n      if (!Reflect.apply(predicate, thisArg, [entry, index, this])) {\n        return false;\n      }\n      index++;\n    }\n    return true;\n  }\n  some(predicate, thisArg) {\n    let index = 0;\n    for (const entry of this) {\n      if (Reflect.apply(predicate, thisArg, [entry, index, this])) {\n        return true;\n      }\n      index++;\n    }\n    return false;\n  }\n};\nfunction at(array, index) {\n  if (\"at\" in Array.prototype) {\n    return Array.prototype.at.call(array, index);\n  }\n  const actualIndex = toSafeIndex(array, index);\n  return actualIndex === -1 ? void 0 : array[actualIndex];\n}\nfunction toSafeIndex(array, index) {\n  const length = array.length;\n  const relativeIndex = toSafeInteger(index);\n  const actualIndex = relativeIndex >= 0 ? relativeIndex : length + relativeIndex;\n  return actualIndex < 0 || actualIndex >= length ? -1 : actualIndex;\n}\nfunction toSafeInteger(number) {\n  return number !== number || number === 0 ? 0 : Math.trunc(number);\n}\n\n// src/collection.tsx\nimport { jsx as jsx2 } from \"react/jsx-runtime\";\nfunction createCollection2(name) {\n  const PROVIDER_NAME = name + \"CollectionProvider\";\n  const [createCollectionContext, createCollectionScope] = createContextScope2(PROVIDER_NAME);\n  const [CollectionContextProvider, useCollectionContext] = createCollectionContext(\n    PROVIDER_NAME,\n    {\n      collectionElement: null,\n      collectionRef: { current: null },\n      collectionRefObject: { current: null },\n      itemMap: new OrderedDict(),\n      setItemMap: () => void 0\n    }\n  );\n  const CollectionProvider = ({ state, ...props }) => {\n    return state ? /* @__PURE__ */ jsx2(CollectionProviderImpl, { ...props, state }) : /* @__PURE__ */ jsx2(CollectionInit, { ...props });\n  };\n  CollectionProvider.displayName = PROVIDER_NAME;\n  const CollectionInit = (props) => {\n    const state = useInitCollection();\n    return /* @__PURE__ */ jsx2(CollectionProviderImpl, { ...props, state });\n  };\n  CollectionInit.displayName = PROVIDER_NAME + \"Init\";\n  const CollectionProviderImpl = (props) => {\n    const { scope, children, state } = props;\n    const ref = React2.useRef(null);\n    const [collectionElement, setCollectionElement] = React2.useState(\n      null\n    );\n    const composeRefs = useComposedRefs2(ref, setCollectionElement);\n    const [itemMap, setItemMap] = state;\n    React2.useEffect(() => {\n      if (!collectionElement) return;\n      const observer = getChildListObserver(() => {\n      });\n      observer.observe(collectionElement, {\n        childList: true,\n        subtree: true\n      });\n      return () => {\n        observer.disconnect();\n      };\n    }, [collectionElement]);\n    return /* @__PURE__ */ jsx2(\n      CollectionContextProvider,\n      {\n        scope,\n        itemMap,\n        setItemMap,\n        collectionRef: composeRefs,\n        collectionRefObject: ref,\n        collectionElement,\n        children\n      }\n    );\n  };\n  CollectionProviderImpl.displayName = PROVIDER_NAME + \"Impl\";\n  const COLLECTION_SLOT_NAME = name + \"CollectionSlot\";\n  const CollectionSlotImpl = createSlot2(COLLECTION_SLOT_NAME);\n  const CollectionSlot = React2.forwardRef(\n    (props, forwardedRef) => {\n      const { scope, children } = props;\n      const context = useCollectionContext(COLLECTION_SLOT_NAME, scope);\n      const composedRefs = useComposedRefs2(forwardedRef, context.collectionRef);\n      return /* @__PURE__ */ jsx2(CollectionSlotImpl, { ref: composedRefs, children });\n    }\n  );\n  CollectionSlot.displayName = COLLECTION_SLOT_NAME;\n  const ITEM_SLOT_NAME = name + \"CollectionItemSlot\";\n  const ITEM_DATA_ATTR = \"data-radix-collection-item\";\n  const CollectionItemSlotImpl = createSlot2(ITEM_SLOT_NAME);\n  const CollectionItemSlot = React2.forwardRef(\n    (props, forwardedRef) => {\n      const { scope, children, ...itemData } = props;\n      const ref = React2.useRef(null);\n      const [element, setElement] = React2.useState(null);\n      const composedRefs = useComposedRefs2(forwardedRef, ref, setElement);\n      const context = useCollectionContext(ITEM_SLOT_NAME, scope);\n      const { setItemMap } = context;\n      const itemDataRef = React2.useRef(itemData);\n      if (!shallowEqual(itemDataRef.current, itemData)) {\n        itemDataRef.current = itemData;\n      }\n      const memoizedItemData = itemDataRef.current;\n      React2.useEffect(() => {\n        const itemData2 = memoizedItemData;\n        setItemMap((map) => {\n          if (!element) {\n            return map;\n          }\n          if (!map.has(element)) {\n            map.set(element, { ...itemData2, element });\n            return map.toSorted(sortByDocumentPosition);\n          }\n          return map.set(element, { ...itemData2, element }).toSorted(sortByDocumentPosition);\n        });\n        return () => {\n          setItemMap((map) => {\n            if (!element || !map.has(element)) {\n              return map;\n            }\n            map.delete(element);\n            return new OrderedDict(map);\n          });\n        };\n      }, [element, memoizedItemData, setItemMap]);\n      return /* @__PURE__ */ jsx2(CollectionItemSlotImpl, { ...{ [ITEM_DATA_ATTR]: \"\" }, ref: composedRefs, children });\n    }\n  );\n  CollectionItemSlot.displayName = ITEM_SLOT_NAME;\n  function useInitCollection() {\n    return React2.useState(new OrderedDict());\n  }\n  function useCollection(scope) {\n    const { itemMap } = useCollectionContext(name + \"CollectionConsumer\", scope);\n    return itemMap;\n  }\n  const functions = {\n    createCollectionScope,\n    useCollection,\n    useInitCollection\n  };\n  return [\n    { Provider: CollectionProvider, Slot: CollectionSlot, ItemSlot: CollectionItemSlot },\n    functions\n  ];\n}\nfunction shallowEqual(a, b) {\n  if (a === b) return true;\n  if (typeof a !== \"object\" || typeof b !== \"object\") return false;\n  if (a == null || b == null) return false;\n  const keysA = Object.keys(a);\n  const keysB = Object.keys(b);\n  if (keysA.length !== keysB.length) return false;\n  for (const key of keysA) {\n    if (!Object.prototype.hasOwnProperty.call(b, key)) return false;\n    if (a[key] !== b[key]) return false;\n  }\n  return true;\n}\nfunction isElementPreceding(a, b) {\n  return !!(b.compareDocumentPosition(a) & Node.DOCUMENT_POSITION_PRECEDING);\n}\nfunction sortByDocumentPosition(a, b) {\n  return !a[1].element || !b[1].element ? 0 : isElementPreceding(a[1].element, b[1].element) ? -1 : 1;\n}\nfunction getChildListObserver(callback) {\n  const observer = new MutationObserver((mutationsList) => {\n    for (const mutation of mutationsList) {\n      if (mutation.type === \"childList\") {\n        callback();\n        return;\n      }\n    }\n  });\n  return observer;\n}\nexport {\n  createCollection,\n  createCollection2 as unstable_createCollection\n};\n//# sourceMappingURL=index.mjs.map\n","// src/primitive.tsx\nvar canUseDOM = !!(typeof window !== \"undefined\" && window.document && window.document.createElement);\nfunction composeEventHandlers(originalEventHandler, ourEventHandler, { checkForDefaultPrevented = true } = {}) {\n  return function handleEvent(event) {\n    originalEventHandler?.(event);\n    if (checkForDefaultPrevented === false || !event.defaultPrevented) {\n      return ourEventHandler?.(event);\n    }\n  };\n}\nfunction getOwnerWindow(element) {\n  if (!canUseDOM) {\n    throw new Error(\"Cannot access window outside of the DOM\");\n  }\n  return element?.ownerDocument?.defaultView ?? window;\n}\nfunction getOwnerDocument(element) {\n  if (!canUseDOM) {\n    throw new Error(\"Cannot access document outside of the DOM\");\n  }\n  return element?.ownerDocument ?? document;\n}\nfunction getActiveElement(node, activeDescendant = false) {\n  const { activeElement } = getOwnerDocument(node);\n  if (!activeElement?.nodeName) {\n    return null;\n  }\n  if (isFrame(activeElement) && activeElement.contentDocument) {\n    return getActiveElement(activeElement.contentDocument.body, activeDescendant);\n  }\n  if (activeDescendant) {\n    const id = activeElement.getAttribute(\"aria-activedescendant\");\n    if (id) {\n      const element = getOwnerDocument(activeElement).getElementById(id);\n      if (element) {\n        return element;\n      }\n    }\n  }\n  return activeElement;\n}\nfunction isFrame(element) {\n  return element.tagName === \"IFRAME\";\n}\nexport {\n  canUseDOM,\n  composeEventHandlers,\n  getActiveElement,\n  getOwnerDocument,\n  getOwnerWindow,\n  isFrame\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\";\n\n// src/roving-focus-group.tsx\nimport * as React from \"react\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { createCollection } from \"@radix-ui/react-collection\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { useId } from \"@radix-ui/react-id\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { useCallbackRef } from \"@radix-ui/react-use-callback-ref\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { useDirection } from \"@radix-ui/react-direction\";\nimport { jsx } from \"react/jsx-runtime\";\nvar ENTRY_FOCUS = \"rovingFocusGroup.onEntryFocus\";\nvar EVENT_OPTIONS = { bubbles: false, cancelable: true };\nvar GROUP_NAME = \"RovingFocusGroup\";\nvar [Collection, useCollection, createCollectionScope] = createCollection(GROUP_NAME);\nvar [createRovingFocusGroupContext, createRovingFocusGroupScope] = createContextScope(\n  GROUP_NAME,\n  [createCollectionScope]\n);\nvar [RovingFocusProvider, useRovingFocusContext] = createRovingFocusGroupContext(GROUP_NAME);\nvar RovingFocusGroup = React.forwardRef(\n  (props, forwardedRef) => {\n    return /* @__PURE__ */ jsx(Collection.Provider, { scope: props.__scopeRovingFocusGroup, children: /* @__PURE__ */ jsx(Collection.Slot, { scope: props.__scopeRovingFocusGroup, children: /* @__PURE__ */ jsx(RovingFocusGroupImpl, { ...props, ref: forwardedRef }) }) });\n  }\n);\nRovingFocusGroup.displayName = GROUP_NAME;\nvar RovingFocusGroupImpl = React.forwardRef((props, forwardedRef) => {\n  const {\n    __scopeRovingFocusGroup,\n    orientation,\n    loop = false,\n    dir,\n    currentTabStopId: currentTabStopIdProp,\n    defaultCurrentTabStopId,\n    onCurrentTabStopIdChange,\n    onEntryFocus,\n    preventScrollOnEntryFocus = false,\n    ...groupProps\n  } = props;\n  const ref = React.useRef(null);\n  const composedRefs = useComposedRefs(forwardedRef, ref);\n  const direction = useDirection(dir);\n  const [currentTabStopId, setCurrentTabStopId] = useControllableState({\n    prop: currentTabStopIdProp,\n    defaultProp: defaultCurrentTabStopId ?? null,\n    onChange: onCurrentTabStopIdChange,\n    caller: GROUP_NAME\n  });\n  const [isTabbingBackOut, setIsTabbingBackOut] = React.useState(false);\n  const handleEntryFocus = useCallbackRef(onEntryFocus);\n  const getItems = useCollection(__scopeRovingFocusGroup);\n  const isClickFocusRef = React.useRef(false);\n  const [focusableItemsCount, setFocusableItemsCount] = React.useState(0);\n  React.useEffect(() => {\n    const node = ref.current;\n    if (node) {\n      node.addEventListener(ENTRY_FOCUS, handleEntryFocus);\n      return () => node.removeEventListener(ENTRY_FOCUS, handleEntryFocus);\n    }\n  }, [handleEntryFocus]);\n  return /* @__PURE__ */ jsx(\n    RovingFocusProvider,\n    {\n      scope: __scopeRovingFocusGroup,\n      orientation,\n      dir: direction,\n      loop,\n      currentTabStopId,\n      onItemFocus: React.useCallback(\n        (tabStopId) => setCurrentTabStopId(tabStopId),\n        [setCurrentTabStopId]\n      ),\n      onItemShiftTab: React.useCallback(() => setIsTabbingBackOut(true), []),\n      onFocusableItemAdd: React.useCallback(\n        () => setFocusableItemsCount((prevCount) => prevCount + 1),\n        []\n      ),\n      onFocusableItemRemove: React.useCallback(\n        () => setFocusableItemsCount((prevCount) => prevCount - 1),\n        []\n      ),\n      children: /* @__PURE__ */ jsx(\n        Primitive.div,\n        {\n          tabIndex: isTabbingBackOut || focusableItemsCount === 0 ? -1 : 0,\n          \"data-orientation\": orientation,\n          ...groupProps,\n          ref: composedRefs,\n          style: { outline: \"none\", ...props.style },\n          onMouseDown: composeEventHandlers(props.onMouseDown, () => {\n            isClickFocusRef.current = true;\n          }),\n          onFocus: composeEventHandlers(props.onFocus, (event) => {\n            const isKeyboardFocus = !isClickFocusRef.current;\n            if (event.target === event.currentTarget && isKeyboardFocus && !isTabbingBackOut) {\n              const entryFocusEvent = new CustomEvent(ENTRY_FOCUS, EVENT_OPTIONS);\n              event.currentTarget.dispatchEvent(entryFocusEvent);\n              if (!entryFocusEvent.defaultPrevented) {\n                const items = getItems().filter((item) => item.focusable);\n                const activeItem = items.find((item) => item.active);\n                const currentItem = items.find((item) => item.id === currentTabStopId);\n                const candidateItems = [activeItem, currentItem, ...items].filter(\n                  Boolean\n                );\n                const candidateNodes = candidateItems.map((item) => item.ref.current);\n                focusFirst(candidateNodes, preventScrollOnEntryFocus);\n              }\n            }\n            isClickFocusRef.current = false;\n          }),\n          onBlur: composeEventHandlers(props.onBlur, () => setIsTabbingBackOut(false))\n        }\n      )\n    }\n  );\n});\nvar ITEM_NAME = \"RovingFocusGroupItem\";\nvar RovingFocusGroupItem = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeRovingFocusGroup,\n      focusable = true,\n      active = false,\n      tabStopId,\n      children,\n      ...itemProps\n    } = props;\n    const autoId = useId();\n    const id = tabStopId || autoId;\n    const context = useRovingFocusContext(ITEM_NAME, __scopeRovingFocusGroup);\n    const isCurrentTabStop = context.currentTabStopId === id;\n    const getItems = useCollection(__scopeRovingFocusGroup);\n    const { onFocusableItemAdd, onFocusableItemRemove, currentTabStopId } = context;\n    React.useEffect(() => {\n      if (focusable) {\n        onFocusableItemAdd();\n        return () => onFocusableItemRemove();\n      }\n    }, [focusable, onFocusableItemAdd, onFocusableItemRemove]);\n    return /* @__PURE__ */ jsx(\n      Collection.ItemSlot,\n      {\n        scope: __scopeRovingFocusGroup,\n        id,\n        focusable,\n        active,\n        children: /* @__PURE__ */ jsx(\n          Primitive.span,\n          {\n            tabIndex: isCurrentTabStop ? 0 : -1,\n            \"data-orientation\": context.orientation,\n            ...itemProps,\n            ref: forwardedRef,\n            onMouseDown: composeEventHandlers(props.onMouseDown, (event) => {\n              if (!focusable) event.preventDefault();\n              else context.onItemFocus(id);\n            }),\n            onFocus: composeEventHandlers(props.onFocus, () => context.onItemFocus(id)),\n            onKeyDown: composeEventHandlers(props.onKeyDown, (event) => {\n              if (event.key === \"Tab\" && event.shiftKey) {\n                context.onItemShiftTab();\n                return;\n              }\n              if (event.target !== event.currentTarget) return;\n              const focusIntent = getFocusIntent(event, context.orientation, context.dir);\n              if (focusIntent !== void 0) {\n                if (event.metaKey || event.ctrlKey || event.altKey || event.shiftKey) return;\n                event.preventDefault();\n                const items = getItems().filter((item) => item.focusable);\n                let candidateNodes = items.map((item) => item.ref.current);\n                if (focusIntent === \"last\") candidateNodes.reverse();\n                else if (focusIntent === \"prev\" || focusIntent === \"next\") {\n                  if (focusIntent === \"prev\") candidateNodes.reverse();\n                  const currentIndex = candidateNodes.indexOf(event.currentTarget);\n                  candidateNodes = context.loop ? wrapArray(candidateNodes, currentIndex + 1) : candidateNodes.slice(currentIndex + 1);\n                }\n                setTimeout(() => focusFirst(candidateNodes));\n              }\n            }),\n            children: typeof children === \"function\" ? children({ isCurrentTabStop, hasTabStop: currentTabStopId != null }) : children\n          }\n        )\n      }\n    );\n  }\n);\nRovingFocusGroupItem.displayName = ITEM_NAME;\nvar MAP_KEY_TO_FOCUS_INTENT = {\n  ArrowLeft: \"prev\",\n  ArrowUp: \"prev\",\n  ArrowRight: \"next\",\n  ArrowDown: \"next\",\n  PageUp: \"first\",\n  Home: \"first\",\n  PageDown: \"last\",\n  End: \"last\"\n};\nfunction getDirectionAwareKey(key, dir) {\n  if (dir !== \"rtl\") return key;\n  return key === \"ArrowLeft\" ? \"ArrowRight\" : key === \"ArrowRight\" ? \"ArrowLeft\" : key;\n}\nfunction getFocusIntent(event, orientation, dir) {\n  const key = getDirectionAwareKey(event.key, dir);\n  if (orientation === \"vertical\" && [\"ArrowLeft\", \"ArrowRight\"].includes(key)) return void 0;\n  if (orientation === \"horizontal\" && [\"ArrowUp\", \"ArrowDown\"].includes(key)) return void 0;\n  return MAP_KEY_TO_FOCUS_INTENT[key];\n}\nfunction focusFirst(candidates, preventScroll = false) {\n  const PREVIOUSLY_FOCUSED_ELEMENT = document.activeElement;\n  for (const candidate of candidates) {\n    if (candidate === PREVIOUSLY_FOCUSED_ELEMENT) return;\n    candidate.focus({ preventScroll });\n    if (document.activeElement !== PREVIOUSLY_FOCUSED_ELEMENT) return;\n  }\n}\nfunction wrapArray(array, startIndex) {\n  return array.map((_, index) => array[(startIndex + index) % array.length]);\n}\nvar Root = RovingFocusGroup;\nvar Item = RovingFocusGroupItem;\nexport {\n  Item,\n  Root,\n  RovingFocusGroup,\n  RovingFocusGroupItem,\n  createRovingFocusGroupScope\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\";\n\n// src/radio-group.tsx\nimport * as React2 from \"react\";\nimport { composeEventHandlers as composeEventHandlers2 } from \"@radix-ui/primitive\";\nimport { useComposedRefs as useComposedRefs2 } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope as createContextScope2 } from \"@radix-ui/react-context\";\nimport { Primitive as Primitive2 } from \"@radix-ui/react-primitive\";\nimport * as RovingFocusGroup from \"@radix-ui/react-roving-focus\";\nimport { createRovingFocusGroupScope } from \"@radix-ui/react-roving-focus\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { useDirection } from \"@radix-ui/react-direction\";\n\n// src/radio.tsx\nimport * as React from \"react\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { useSize } from \"@radix-ui/react-use-size\";\nimport { usePrevious } from \"@radix-ui/react-use-previous\";\nimport { Presence } from \"@radix-ui/react-presence\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { jsx, jsxs } from \"react/jsx-runtime\";\nvar RADIO_NAME = \"Radio\";\nvar [createRadioContext, createRadioScope] = createContextScope(RADIO_NAME);\nvar [RadioProvider, useRadioContext] = createRadioContext(RADIO_NAME);\nvar Radio = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeRadio,\n      name,\n      checked = false,\n      required,\n      disabled,\n      value = \"on\",\n      onCheck,\n      form,\n      ...radioProps\n    } = props;\n    const [button, setButton] = React.useState(null);\n    const composedRefs = useComposedRefs(forwardedRef, (node) => setButton(node));\n    const hasConsumerStoppedPropagationRef = React.useRef(false);\n    const isFormControl = button ? form || !!button.closest(\"form\") : true;\n    return /* @__PURE__ */ jsxs(RadioProvider, { scope: __scopeRadio, checked, disabled, children: [\n      /* @__PURE__ */ jsx(\n        Primitive.button,\n        {\n          type: \"button\",\n          role: \"radio\",\n          \"aria-checked\": checked,\n          \"data-state\": getState(checked),\n          \"data-disabled\": disabled ? \"\" : void 0,\n          disabled,\n          value,\n          ...radioProps,\n          ref: composedRefs,\n          onClick: composeEventHandlers(props.onClick, (event) => {\n            if (!checked) onCheck?.();\n            if (isFormControl) {\n              hasConsumerStoppedPropagationRef.current = event.isPropagationStopped();\n              if (!hasConsumerStoppedPropagationRef.current) event.stopPropagation();\n            }\n          })\n        }\n      ),\n      isFormControl && /* @__PURE__ */ jsx(\n        RadioBubbleInput,\n        {\n          control: button,\n          bubbles: !hasConsumerStoppedPropagationRef.current,\n          name,\n          value,\n          checked,\n          required,\n          disabled,\n          form,\n          style: { transform: \"translateX(-100%)\" }\n        }\n      )\n    ] });\n  }\n);\nRadio.displayName = RADIO_NAME;\nvar INDICATOR_NAME = \"RadioIndicator\";\nvar RadioIndicator = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeRadio, forceMount, ...indicatorProps } = props;\n    const context = useRadioContext(INDICATOR_NAME, __scopeRadio);\n    return /* @__PURE__ */ jsx(Presence, { present: forceMount || context.checked, children: /* @__PURE__ */ jsx(\n      Primitive.span,\n      {\n        \"data-state\": getState(context.checked),\n        \"data-disabled\": context.disabled ? \"\" : void 0,\n        ...indicatorProps,\n        ref: forwardedRef\n      }\n    ) });\n  }\n);\nRadioIndicator.displayName = INDICATOR_NAME;\nvar BUBBLE_INPUT_NAME = \"RadioBubbleInput\";\nvar RadioBubbleInput = React.forwardRef(\n  ({\n    __scopeRadio,\n    control,\n    checked,\n    bubbles = true,\n    ...props\n  }, forwardedRef) => {\n    const ref = React.useRef(null);\n    const composedRefs = useComposedRefs(ref, forwardedRef);\n    const prevChecked = usePrevious(checked);\n    const controlSize = useSize(control);\n    React.useEffect(() => {\n      const input = ref.current;\n      if (!input) return;\n      const inputProto = window.HTMLInputElement.prototype;\n      const descriptor = Object.getOwnPropertyDescriptor(\n        inputProto,\n        \"checked\"\n      );\n      const setChecked = descriptor.set;\n      if (prevChecked !== checked && setChecked) {\n        const event = new Event(\"click\", { bubbles });\n        setChecked.call(input, checked);\n        input.dispatchEvent(event);\n      }\n    }, [prevChecked, checked, bubbles]);\n    return /* @__PURE__ */ jsx(\n      Primitive.input,\n      {\n        type: \"radio\",\n        \"aria-hidden\": true,\n        defaultChecked: checked,\n        ...props,\n        tabIndex: -1,\n        ref: composedRefs,\n        style: {\n          ...props.style,\n          ...controlSize,\n          position: \"absolute\",\n          pointerEvents: \"none\",\n          opacity: 0,\n          margin: 0\n        }\n      }\n    );\n  }\n);\nRadioBubbleInput.displayName = BUBBLE_INPUT_NAME;\nfunction getState(checked) {\n  return checked ? \"checked\" : \"unchecked\";\n}\n\n// src/radio-group.tsx\nimport { jsx as jsx2 } from \"react/jsx-runtime\";\nvar ARROW_KEYS = [\"ArrowUp\", \"ArrowDown\", \"ArrowLeft\", \"ArrowRight\"];\nvar RADIO_GROUP_NAME = \"RadioGroup\";\nvar [createRadioGroupContext, createRadioGroupScope] = createContextScope2(RADIO_GROUP_NAME, [\n  createRovingFocusGroupScope,\n  createRadioScope\n]);\nvar useRovingFocusGroupScope = createRovingFocusGroupScope();\nvar useRadioScope = createRadioScope();\nvar [RadioGroupProvider, useRadioGroupContext] = createRadioGroupContext(RADIO_GROUP_NAME);\nvar RadioGroup = React2.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeRadioGroup,\n      name,\n      defaultValue,\n      value: valueProp,\n      required = false,\n      disabled = false,\n      orientation,\n      dir,\n      loop = true,\n      onValueChange,\n      ...groupProps\n    } = props;\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeRadioGroup);\n    const direction = useDirection(dir);\n    const [value, setValue] = useControllableState({\n      prop: valueProp,\n      defaultProp: defaultValue ?? null,\n      onChange: onValueChange,\n      caller: RADIO_GROUP_NAME\n    });\n    return /* @__PURE__ */ jsx2(\n      RadioGroupProvider,\n      {\n        scope: __scopeRadioGroup,\n        name,\n        required,\n        disabled,\n        value,\n        onValueChange: setValue,\n        children: /* @__PURE__ */ jsx2(\n          RovingFocusGroup.Root,\n          {\n            asChild: true,\n            ...rovingFocusGroupScope,\n            orientation,\n            dir: direction,\n            loop,\n            children: /* @__PURE__ */ jsx2(\n              Primitive2.div,\n              {\n                role: \"radiogroup\",\n                \"aria-required\": required,\n                \"aria-orientation\": orientation,\n                \"data-disabled\": disabled ? \"\" : void 0,\n                dir: direction,\n                ...groupProps,\n                ref: forwardedRef\n              }\n            )\n          }\n        )\n      }\n    );\n  }\n);\nRadioGroup.displayName = RADIO_GROUP_NAME;\nvar ITEM_NAME = \"RadioGroupItem\";\nvar RadioGroupItem = React2.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeRadioGroup, disabled, ...itemProps } = props;\n    const context = useRadioGroupContext(ITEM_NAME, __scopeRadioGroup);\n    const isDisabled = context.disabled || disabled;\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeRadioGroup);\n    const radioScope = useRadioScope(__scopeRadioGroup);\n    const ref = React2.useRef(null);\n    const composedRefs = useComposedRefs2(forwardedRef, ref);\n    const checked = context.value === itemProps.value;\n    const isArrowKeyPressedRef = React2.useRef(false);\n    React2.useEffect(() => {\n      const handleKeyDown = (event) => {\n        if (ARROW_KEYS.includes(event.key)) {\n          isArrowKeyPressedRef.current = true;\n        }\n      };\n      const handleKeyUp = () => isArrowKeyPressedRef.current = false;\n      document.addEventListener(\"keydown\", handleKeyDown);\n      document.addEventListener(\"keyup\", handleKeyUp);\n      return () => {\n        document.removeEventListener(\"keydown\", handleKeyDown);\n        document.removeEventListener(\"keyup\", handleKeyUp);\n      };\n    }, []);\n    return /* @__PURE__ */ jsx2(\n      RovingFocusGroup.Item,\n      {\n        asChild: true,\n        ...rovingFocusGroupScope,\n        focusable: !isDisabled,\n        active: checked,\n        children: /* @__PURE__ */ jsx2(\n          Radio,\n          {\n            disabled: isDisabled,\n            required: context.required,\n            checked,\n            ...radioScope,\n            ...itemProps,\n            name: context.name,\n            ref: composedRefs,\n            onCheck: () => context.onValueChange(itemProps.value),\n            onKeyDown: composeEventHandlers2((event) => {\n              if (event.key === \"Enter\") event.preventDefault();\n            }),\n            onFocus: composeEventHandlers2(itemProps.onFocus, () => {\n              if (isArrowKeyPressedRef.current) ref.current?.click();\n            })\n          }\n        )\n      }\n    );\n  }\n);\nRadioGroupItem.displayName = ITEM_NAME;\nvar INDICATOR_NAME2 = \"RadioGroupIndicator\";\nvar RadioGroupIndicator = React2.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeRadioGroup, ...indicatorProps } = props;\n    const radioScope = useRadioScope(__scopeRadioGroup);\n    return /* @__PURE__ */ jsx2(RadioIndicator, { ...radioScope, ...indicatorProps, ref: forwardedRef });\n  }\n);\nRadioGroupIndicator.displayName = INDICATOR_NAME2;\nvar Root2 = RadioGroup;\nvar Item2 = RadioGroupItem;\nvar Indicator = RadioGroupIndicator;\nexport {\n  Indicator,\n  Item2 as Item,\n  RadioGroup,\n  RadioGroupIndicator,\n  RadioGroupItem,\n  Root2 as Root,\n  createRadioGroupScope\n};\n//# sourceMappingURL=index.mjs.map\n","'use client'\n\nimport * as React from 'react'\nimport * as RadioGroupPrimitive from '@radix-ui/react-radio-group'\nimport { CircleIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction RadioGroup({\n  className,\n  ...props\n}: React.ComponentProps<typeof RadioGroupPrimitive.Root>) {\n  return (\n    <RadioGroupPrimitive.Root\n      data-slot=\"radio-group\"\n      className={cn('grid gap-3', className)}\n      {...props}\n    />\n  )\n}\n\nfunction RadioGroupItem({\n  className,\n  ...props\n}: React.ComponentProps<typeof RadioGroupPrimitive.Item>) {\n  return (\n    <RadioGroupPrimitive.Item\n      data-slot=\"radio-group-item\"\n      className={cn(\n        'border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50',\n        className,\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator\n        data-slot=\"radio-group-indicator\"\n        className=\"relative flex items-center justify-center\"\n      >\n        <CircleIcon className=\"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n}\n\nexport { RadioGroup, RadioGroupItem }\n","// packages/react/id/src/id.tsx\nimport * as React from \"react\";\nimport { useLayoutEffect } from \"@radix-ui/react-use-layout-effect\";\nvar useReactId = React[\" useId \".trim().toString()] || (() => void 0);\nvar count = 0;\nfunction useId(deterministicId) {\n  const [id, setId] = React.useState(useReactId());\n  useLayoutEffect(() => {\n    if (!deterministicId) setId((reactId) => reactId ?? String(count++));\n  }, [deterministicId]);\n  return deterministicId || (id ? `radix-${id}` : \"\");\n}\nexport {\n  useId\n};\n//# sourceMappingURL=index.mjs.map\n","// packages/react/compose-refs/src/compose-refs.tsx\nimport * as React from \"react\";\nfunction setRef(ref, value) {\n  if (typeof ref === \"function\") {\n    return ref(value);\n  } else if (ref !== null && ref !== void 0) {\n    ref.current = value;\n  }\n}\nfunction composeRefs(...refs) {\n  return (node) => {\n    let hasCleanup = false;\n    const cleanups = refs.map((ref) => {\n      const cleanup = setRef(ref, node);\n      if (!hasCleanup && typeof cleanup == \"function\") {\n        hasCleanup = true;\n      }\n      return cleanup;\n    });\n    if (hasCleanup) {\n      return () => {\n        for (let i = 0; i < cleanups.length; i++) {\n          const cleanup = cleanups[i];\n          if (typeof cleanup == \"function\") {\n            cleanup();\n          } else {\n            setRef(refs[i], null);\n          }\n        }\n      };\n    }\n  };\n}\nfunction useComposedRefs(...refs) {\n  return React.useCallback(composeRefs(...refs), refs);\n}\nexport {\n  composeRefs,\n  useComposedRefs\n};\n//# sourceMappingURL=index.mjs.map\n","// src/primitive.tsx\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { createSlot } from \"@radix-ui/react-slot\";\nimport { jsx } from \"react/jsx-runtime\";\nvar NODES = [\n  \"a\",\n  \"button\",\n  \"div\",\n  \"form\",\n  \"h2\",\n  \"h3\",\n  \"img\",\n  \"input\",\n  \"label\",\n  \"li\",\n  \"nav\",\n  \"ol\",\n  \"p\",\n  \"select\",\n  \"span\",\n  \"svg\",\n  \"ul\"\n];\nvar Primitive = NODES.reduce((primitive, node) => {\n  const Slot = createSlot(`Primitive.${node}`);\n  const Node = React.forwardRef((props, forwardedRef) => {\n    const { asChild, ...primitiveProps } = props;\n    const Comp = asChild ? Slot : node;\n    if (typeof window !== \"undefined\") {\n      window[Symbol.for(\"radix-ui\")] = true;\n    }\n    return /* @__PURE__ */ jsx(Comp, { ...primitiveProps, ref: forwardedRef });\n  });\n  Node.displayName = `Primitive.${node}`;\n  return { ...primitive, [node]: Node };\n}, {});\nfunction dispatchDiscreteCustomEvent(target, event) {\n  if (target) ReactDOM.flushSync(() => target.dispatchEvent(event));\n}\nvar Root = Primitive;\nexport {\n  Primitive,\n  Root,\n  dispatchDiscreteCustomEvent\n};\n//# sourceMappingURL=index.mjs.map\n","// src/use-controllable-state.tsx\nimport * as React from \"react\";\nimport { useLayoutEffect } from \"@radix-ui/react-use-layout-effect\";\nvar useInsertionEffect = React[\" useInsertionEffect \".trim().toString()] || useLayoutEffect;\nfunction useControllableState({\n  prop,\n  defaultProp,\n  onChange = () => {\n  },\n  caller\n}) {\n  const [uncontrolledProp, setUncontrolledProp, onChangeRef] = useUncontrolledState({\n    defaultProp,\n    onChange\n  });\n  const isControlled = prop !== void 0;\n  const value = isControlled ? prop : uncontrolledProp;\n  if (true) {\n    const isControlledRef = React.useRef(prop !== void 0);\n    React.useEffect(() => {\n      const wasControlled = isControlledRef.current;\n      if (wasControlled !== isControlled) {\n        const from = wasControlled ? \"controlled\" : \"uncontrolled\";\n        const to = isControlled ? \"controlled\" : \"uncontrolled\";\n        console.warn(\n          `${caller} is changing from ${from} to ${to}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`\n        );\n      }\n      isControlledRef.current = isControlled;\n    }, [isControlled, caller]);\n  }\n  const setValue = React.useCallback(\n    (nextValue) => {\n      if (isControlled) {\n        const value2 = isFunction(nextValue) ? nextValue(prop) : nextValue;\n        if (value2 !== prop) {\n          onChangeRef.current?.(value2);\n        }\n      } else {\n        setUncontrolledProp(nextValue);\n      }\n    },\n    [isControlled, prop, setUncontrolledProp, onChangeRef]\n  );\n  return [value, setValue];\n}\nfunction useUncontrolledState({\n  defaultProp,\n  onChange\n}) {\n  const [value, setValue] = React.useState(defaultProp);\n  const prevValueRef = React.useRef(value);\n  const onChangeRef = React.useRef(onChange);\n  useInsertionEffect(() => {\n    onChangeRef.current = onChange;\n  }, [onChange]);\n  React.useEffect(() => {\n    if (prevValueRef.current !== value) {\n      onChangeRef.current?.(value);\n      prevValueRef.current = value;\n    }\n  }, [value, prevValueRef]);\n  return [value, setValue, onChangeRef];\n}\nfunction isFunction(value) {\n  return typeof value === \"function\";\n}\n\n// src/use-controllable-state-reducer.tsx\nimport * as React2 from \"react\";\nimport { useEffectEvent } from \"@radix-ui/react-use-effect-event\";\nvar SYNC_STATE = Symbol(\"RADIX:SYNC_STATE\");\nfunction useControllableStateReducer(reducer, userArgs, initialArg, init) {\n  const { prop: controlledState, defaultProp, onChange: onChangeProp, caller } = userArgs;\n  const isControlled = controlledState !== void 0;\n  const onChange = useEffectEvent(onChangeProp);\n  if (true) {\n    const isControlledRef = React2.useRef(controlledState !== void 0);\n    React2.useEffect(() => {\n      const wasControlled = isControlledRef.current;\n      if (wasControlled !== isControlled) {\n        const from = wasControlled ? \"controlled\" : \"uncontrolled\";\n        const to = isControlled ? \"controlled\" : \"uncontrolled\";\n        console.warn(\n          `${caller} is changing from ${from} to ${to}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`\n        );\n      }\n      isControlledRef.current = isControlled;\n    }, [isControlled, caller]);\n  }\n  const args = [{ ...initialArg, state: defaultProp }];\n  if (init) {\n    args.push(init);\n  }\n  const [internalState, dispatch] = React2.useReducer(\n    (state2, action) => {\n      if (action.type === SYNC_STATE) {\n        return { ...state2, state: action.state };\n      }\n      const next = reducer(state2, action);\n      if (isControlled && !Object.is(next.state, state2.state)) {\n        onChange(next.state);\n      }\n      return next;\n    },\n    ...args\n  );\n  const uncontrolledState = internalState.state;\n  const prevValueRef = React2.useRef(uncontrolledState);\n  React2.useEffect(() => {\n    if (prevValueRef.current !== uncontrolledState) {\n      prevValueRef.current = uncontrolledState;\n      if (!isControlled) {\n        onChange(uncontrolledState);\n      }\n    }\n  }, [onChange, uncontrolledState, prevValueRef, isControlled]);\n  const state = React2.useMemo(() => {\n    const isControlled2 = controlledState !== void 0;\n    if (isControlled2) {\n      return { ...internalState, state: controlledState };\n    }\n    return internalState;\n  }, [internalState, controlledState]);\n  React2.useEffect(() => {\n    if (isControlled && !Object.is(controlledState, internalState.state)) {\n      dispatch({ type: SYNC_STATE, state: controlledState });\n    }\n  }, [controlledState, internalState.state, isControlled]);\n  return [state, dispatch];\n}\nexport {\n  useControllableState,\n  useControllableStateReducer\n};\n//# sourceMappingURL=index.mjs.map\n","// packages/react/direction/src/direction.tsx\nimport * as React from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nvar DirectionContext = React.createContext(void 0);\nvar DirectionProvider = (props) => {\n  const { dir, children } = props;\n  return /* @__PURE__ */ jsx(DirectionContext.Provider, { value: dir, children });\n};\nfunction useDirection(localDir) {\n  const globalDir = React.useContext(DirectionContext);\n  return localDir || globalDir || \"ltr\";\n}\nvar Provider = DirectionProvider;\nexport {\n  DirectionProvider,\n  Provider,\n  useDirection\n};\n//# sourceMappingURL=index.mjs.map\n","// packages/react/context/src/create-context.tsx\nimport * as React from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nfunction createContext2(rootComponentName, defaultContext) {\n  const Context = React.createContext(defaultContext);\n  const Provider = (props) => {\n    const { children, ...context } = props;\n    const value = React.useMemo(() => context, Object.values(context));\n    return /* @__PURE__ */ jsx(Context.Provider, { value, children });\n  };\n  Provider.displayName = rootComponentName + \"Provider\";\n  function useContext2(consumerName) {\n    const context = React.useContext(Context);\n    if (context) return context;\n    if (defaultContext !== void 0) return defaultContext;\n    throw new Error(`\\`${consumerName}\\` must be used within \\`${rootComponentName}\\``);\n  }\n  return [Provider, useContext2];\n}\nfunction createContextScope(scopeName, createContextScopeDeps = []) {\n  let defaultContexts = [];\n  function createContext3(rootComponentName, defaultContext) {\n    const BaseContext = React.createContext(defaultContext);\n    const index = defaultContexts.length;\n    defaultContexts = [...defaultContexts, defaultContext];\n    const Provider = (props) => {\n      const { scope, children, ...context } = props;\n      const Context = scope?.[scopeName]?.[index] || BaseContext;\n      const value = React.useMemo(() => context, Object.values(context));\n      return /* @__PURE__ */ jsx(Context.Provider, { value, children });\n    };\n    Provider.displayName = rootComponentName + \"Provider\";\n    function useContext2(consumerName, scope) {\n      const Context = scope?.[scopeName]?.[index] || BaseContext;\n      const context = React.useContext(Context);\n      if (context) return context;\n      if (defaultContext !== void 0) return defaultContext;\n      throw new Error(`\\`${consumerName}\\` must be used within \\`${rootComponentName}\\``);\n    }\n    return [Provider, useContext2];\n  }\n  const createScope = () => {\n    const scopeContexts = defaultContexts.map((defaultContext) => {\n      return React.createContext(defaultContext);\n    });\n    return function useScope(scope) {\n      const contexts = scope?.[scopeName] || scopeContexts;\n      return React.useMemo(\n        () => ({ [`__scope${scopeName}`]: { ...scope, [scopeName]: contexts } }),\n        [scope, contexts]\n      );\n    };\n  };\n  createScope.scopeName = scopeName;\n  return [createContext3, composeContextScopes(createScope, ...createContextScopeDeps)];\n}\nfunction composeContextScopes(...scopes) {\n  const baseScope = scopes[0];\n  if (scopes.length === 1) return baseScope;\n  const createScope = () => {\n    const scopeHooks = scopes.map((createScope2) => ({\n      useScope: createScope2(),\n      scopeName: createScope2.scopeName\n    }));\n    return function useComposedScopes(overrideScopes) {\n      const nextScopes = scopeHooks.reduce((nextScopes2, { useScope, scopeName }) => {\n        const scopeProps = useScope(overrideScopes);\n        const currentScope = scopeProps[`__scope${scopeName}`];\n        return { ...nextScopes2, ...currentScope };\n      }, {});\n      return React.useMemo(() => ({ [`__scope${baseScope.scopeName}`]: nextScopes }), [nextScopes]);\n    };\n  };\n  createScope.scopeName = baseScope.scopeName;\n  return createScope;\n}\nexport {\n  createContext2 as createContext,\n  createContextScope\n};\n//# sourceMappingURL=index.mjs.map\n","// src/slot.tsx\nimport * as React from \"react\";\nimport { composeRefs } from \"@radix-ui/react-compose-refs\";\nimport { Fragment as Fragment2, jsx } from \"react/jsx-runtime\";\n// @__NO_SIDE_EFFECTS__\nfunction createSlot(ownerName) {\n  const SlotClone = /* @__PURE__ */ createSlotClone(ownerName);\n  const Slot2 = React.forwardRef((props, forwardedRef) => {\n    const { children, ...slotProps } = props;\n    const childrenArray = React.Children.toArray(children);\n    const slottable = childrenArray.find(isSlottable);\n    if (slottable) {\n      const newElement = slottable.props.children;\n      const newChildren = childrenArray.map((child) => {\n        if (child === slottable) {\n          if (React.Children.count(newElement) > 1) return React.Children.only(null);\n          return React.isValidElement(newElement) ? newElement.props.children : null;\n        } else {\n          return child;\n        }\n      });\n      return /* @__PURE__ */ jsx(SlotClone, { ...slotProps, ref: forwardedRef, children: React.isValidElement(newElement) ? React.cloneElement(newElement, void 0, newChildren) : null });\n    }\n    return /* @__PURE__ */ jsx(SlotClone, { ...slotProps, ref: forwardedRef, children });\n  });\n  Slot2.displayName = `${ownerName}.Slot`;\n  return Slot2;\n}\nvar Slot = /* @__PURE__ */ createSlot(\"Slot\");\n// @__NO_SIDE_EFFECTS__\nfunction createSlotClone(ownerName) {\n  const SlotClone = React.forwardRef((props, forwardedRef) => {\n    const { children, ...slotProps } = props;\n    if (React.isValidElement(children)) {\n      const childrenRef = getElementRef(children);\n      const props2 = mergeProps(slotProps, children.props);\n      if (children.type !== React.Fragment) {\n        props2.ref = forwardedRef ? composeRefs(forwardedRef, childrenRef) : childrenRef;\n      }\n      return React.cloneElement(children, props2);\n    }\n    return React.Children.count(children) > 1 ? React.Children.only(null) : null;\n  });\n  SlotClone.displayName = `${ownerName}.SlotClone`;\n  return SlotClone;\n}\nvar SLOTTABLE_IDENTIFIER = Symbol(\"radix.slottable\");\n// @__NO_SIDE_EFFECTS__\nfunction createSlottable(ownerName) {\n  const Slottable2 = ({ children }) => {\n    return /* @__PURE__ */ jsx(Fragment2, { children });\n  };\n  Slottable2.displayName = `${ownerName}.Slottable`;\n  Slottable2.__radixId = SLOTTABLE_IDENTIFIER;\n  return Slottable2;\n}\nvar Slottable = /* @__PURE__ */ createSlottable(\"Slottable\");\nfunction isSlottable(child) {\n  return React.isValidElement(child) && typeof child.type === \"function\" && \"__radixId\" in child.type && child.type.__radixId === SLOTTABLE_IDENTIFIER;\n}\nfunction mergeProps(slotProps, childProps) {\n  const overrideProps = { ...childProps };\n  for (const propName in childProps) {\n    const slotPropValue = slotProps[propName];\n    const childPropValue = childProps[propName];\n    const isHandler = /^on[A-Z]/.test(propName);\n    if (isHandler) {\n      if (slotPropValue && childPropValue) {\n        overrideProps[propName] = (...args) => {\n          const result = childPropValue(...args);\n          slotPropValue(...args);\n          return result;\n        };\n      } else if (slotPropValue) {\n        overrideProps[propName] = slotPropValue;\n      }\n    } else if (propName === \"style\") {\n      overrideProps[propName] = { ...slotPropValue, ...childPropValue };\n    } else if (propName === \"className\") {\n      overrideProps[propName] = [slotPropValue, childPropValue].filter(Boolean).join(\" \");\n    }\n  }\n  return { ...slotProps, ...overrideProps };\n}\nfunction getElementRef(element) {\n  let getter = Object.getOwnPropertyDescriptor(element.props, \"ref\")?.get;\n  let mayWarn = getter && \"isReactWarning\" in getter && getter.isReactWarning;\n  if (mayWarn) {\n    return element.ref;\n  }\n  getter = Object.getOwnPropertyDescriptor(element, \"ref\")?.get;\n  mayWarn = getter && \"isReactWarning\" in getter && getter.isReactWarning;\n  if (mayWarn) {\n    return element.props.ref;\n  }\n  return element.props.ref || element.ref;\n}\nexport {\n  Slot as Root,\n  Slot,\n  Slottable,\n  createSlot,\n  createSlottable\n};\n//# sourceMappingURL=index.mjs.map\n"],"names":[],"mappings":"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","ignoreList":[2,3,4,5,7,8,9,10,11,12,13]}