{"version":3,"sources":["../../../../../../taxu-platform/v0-taxu-landing-page/app/actions/neobank/get-cards.ts","../../../../../../taxu-platform/v0-taxu-landing-page/app/actions/neobank/get-accounts.ts","../../../../../../taxu-platform/v0-taxu-landing-page/app/actions/neobank/get-transactions.ts","../../../../../../taxu-platform/v0-taxu-landing-page/lib/supabase/admin.ts","../../../../../../taxu-platform/v0-taxu-landing-page/app/actions/neobank/create-account.ts","../../../../../../taxu-platform/v0-taxu-landing-page/.next-internal/server/app/neobank/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["\"use server\"\n\nimport { createClient } from \"@/lib/supabase/server\"\n\nexport async function getNeobankCards() {\n  const supabase = await createClient()\n\n  const {\n    data: { user },\n  } = await supabase.auth.getUser()\n\n  if (!user) {\n    return { data: null, error: \"Not authenticated\" }\n  }\n\n  const { data, error } = await supabase\n    .from(\"neobank_cards\")\n    .select(\"*\")\n    .eq(\"user_id\", user.id)\n    .order(\"created_at\", { ascending: false })\n\n  if (error) {\n    console.error(\"[v0] Error fetching cards:\", error)\n    return { data: null, error: error.message }\n  }\n\n  return { data, error: null }\n}\n","\"use server\"\n\nimport { createClient } from \"@/lib/supabase/server\"\n\nexport async function getNeobankAccounts() {\n  const supabase = await createClient()\n\n  const {\n    data: { user },\n  } = await supabase.auth.getUser()\n\n  if (!user) {\n    return { data: null, error: \"Not authenticated\" }\n  }\n\n  const { data, error } = await supabase\n    .from(\"neobank_accounts\")\n    .select(\"*\")\n    .eq(\"user_id\", user.id)\n    .order(\"created_at\", { ascending: false })\n\n  if (error) {\n    console.error(\"[v0] Error fetching neobank accounts:\", error)\n    return { data: null, error: error.message }\n  }\n\n  return { data, error: null }\n}\n\nexport async function getAccountBalance() {\n  const supabase = await createClient()\n\n  const {\n    data: { user },\n  } = await supabase.auth.getUser()\n\n  if (!user) {\n    return { totalBalance: 0, accounts: [] }\n  }\n\n  const { data: accounts } = await supabase\n    .from(\"neobank_accounts\")\n    .select(\"balance, account_type\")\n    .eq(\"user_id\", user.id)\n\n  if (!accounts || accounts.length === 0) {\n    return { totalBalance: 0, accounts: [] }\n  }\n\n  const totalBalance = accounts.reduce((sum, acc) => sum + (Number(acc.balance) || 0), 0)\n\n  return { totalBalance, accounts }\n}\n","\"use server\"\n\nimport { createClient } from \"@/lib/supabase/server\"\n\nexport async function getNeobankTransactions(limit = 10) {\n  const supabase = await createClient()\n\n  const {\n    data: { user },\n  } = await supabase.auth.getUser()\n\n  if (!user) {\n    return { data: null, error: \"Not authenticated\" }\n  }\n\n  // First get user's accounts\n  const { data: accounts } = await supabase.from(\"neobank_accounts\").select(\"id\").eq(\"user_id\", user.id)\n\n  if (!accounts || accounts.length === 0) {\n    return { data: [], error: null }\n  }\n\n  const accountIds = accounts.map((acc) => acc.id)\n\n  // Get transactions for user's accounts\n  const { data, error } = await supabase\n    .from(\"neobank_transactions\")\n    .select(\"*\")\n    .in(\"account_id\", accountIds)\n    .order(\"transaction_date\", { ascending: false })\n    .limit(limit)\n\n  if (error) {\n    console.error(\"[v0] Error fetching transactions:\", error)\n    return { data: null, error: error.message }\n  }\n\n  return { data, error: null }\n}\n","import \"server-only\"\nimport { createClient as createSupabaseClient } from \"@supabase/supabase-js\"\n\nexport function createAdminClient() {\n  const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL?.trim()\n  const supabaseServiceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY?.trim()\n\n  if (!supabaseUrl || !supabaseServiceRoleKey) {\n    console.error(\"[v0] Admin client: Missing Supabase admin credentials (URL or Service Role Key)\")\n    return null as any\n  }\n\n  return createSupabaseClient(supabaseUrl, supabaseServiceRoleKey, {\n    auth: {\n      autoRefreshToken: false,\n      persistSession: false,\n    },\n  })\n}\n\nexport const createClient = createAdminClient\n","\"use server\"\n\nimport { createClient } from \"@/lib/supabase/server\"\nimport { createAdminClient } from \"@/lib/supabase/admin\"\n\nexport async function createNeobankAccount(accountType: \"checking\" | \"savings\") {\n  const supabase = await createClient()\n\n  const {\n    data: { user },\n  } = await supabase.auth.getUser()\n\n  if (!user) {\n    return { data: null, error: \"Not authenticated\" }\n  }\n\n  const { data: existingUser } = await supabase.from(\"users\").select(\"id\").eq(\"id\", user.id).single()\n\n  if (!existingUser) {\n    const adminClient = createAdminClient()\n\n    if (!adminClient) {\n      console.error(\"[v0] Failed to create admin client\")\n      return { data: null, error: \"Service configuration error\" }\n    }\n\n    const { error: userError } = await adminClient.from(\"users\").insert({\n      id: user.id,\n      email: user.email,\n      email_verified: user.email_confirmed_at ? true : false,\n      is_active: true,\n    })\n\n    if (userError) {\n      console.error(\"[v0] Error creating user record:\", userError)\n      return { data: null, error: \"Failed to create user record\" }\n    }\n  }\n\n  const accountNumber = `${Math.floor(1000 + Math.random() * 9000)} ${Math.floor(1000 + Math.random() * 9000)} ${Math.floor(1000 + Math.random() * 9000)}`\n  const routingNumber = \"121000248\" // Taxu Bank routing number\n\n  const { data, error } = await supabase\n    .from(\"neobank_accounts\")\n    .insert([\n      {\n        user_id: user.id,\n        account_type: accountType,\n        account_number: accountNumber,\n        routing_number: routingNumber,\n        balance: 0,\n        currency: \"USD\",\n        status: \"active\",\n      },\n    ])\n    .select()\n    .single()\n\n  if (error) {\n    console.error(\"[v0] Error creating neobank account:\", error)\n    return { data: null, error: error.message }\n  }\n\n  console.log(\"[v0] Created neobank account:\", accountType, accountNumber)\n  return { data, error: null }\n}\n","export {getUserProfile as '40591777f7b8407d936a63ee71ad659ec4540049c7'} from 'ACTIONS_MODULE0'\nexport {getUser as '0090321b0baf47b1bcf225c9f120d0855fd316418b'} from 'ACTIONS_MODULE1'\nexport {getNeobankAccounts as '0074f25571c96af820ec6fd4190489a6e93999a4aa'} from 'ACTIONS_MODULE2'\nexport {getAccountBalance as '001cc78031566b8641d964d6b92712d4ac14398603'} from 'ACTIONS_MODULE2'\nexport {getNeobankTransactions as '409463900f90e177febfa5047b97d9138425131583'} from 'ACTIONS_MODULE3'\nexport {getNeobankCards as '007f5df2dc6280d232b38e8ddad0b908309ed46261'} from 'ACTIONS_MODULE4'\nexport {createNeobankAccount as '400686d4dea0a5d43689f25b381cb93e81c619512f'} from 'ACTIONS_MODULE5'\n"],"names":[],"mappings":"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"}