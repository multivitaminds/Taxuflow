module.exports=[357616,a=>{"use strict";var b=a.i(375134),c=a.i(410961),d=a.i(448074);async function e(a){let b=await (0,c.createClient)(),{data:{user:d}}=await b.auth.getUser();if(!d)return{data:null,error:"Not authenticated"};let{data:e,error:f}=await b.from("neobank_transactions").insert([{account_id:a.accountId,amount:a.amount,description:a.description,transaction_type:a.transactionType,merchant_name:a.merchantName||a.description,merchant_category_code:a.merchantCategoryCode||"general",currency:a.currency||"USD",status:"completed",transaction_date:new Date().toISOString(),posted_date:new Date().toISOString(),metadata:a.memo?{memo:a.memo}:{}}]).select().single();if(f)return console.error("[v0] Error creating transaction:",f),{data:null,error:f.message};let g="credit"===a.transactionType?a.amount:-a.amount;return await b.rpc("update_account_balance",{account_id:a.accountId,amount_change:g}),console.log("[v0] Created transaction:",e.id,a.amount),{data:e,error:null}}async function f(a){let b=await (0,c.createClient)(),{data:{user:d}}=await b.auth.getUser();if(!d)return{data:null,error:"Not authenticated"};let{data:f,error:g}=await b.from("neobank_transfers").insert([{user_id:d.id,from_account_id:a.fromAccountId,to_account_id:a.toAccountId,external_account_id:a.externalAccountId,amount:a.amount,transfer_type:a.transferType,status:a.scheduledDate?"scheduled":"completed",scheduled_date:a.scheduledDate||new Date,completed_date:a.scheduledDate?null:new Date().toISOString(),currency:"USD",memo:a.memo,reference_number:`TXF${Date.now()}${Math.floor(1e3*Math.random())}`}]).select().single();return g?(console.error("[v0] Error creating transfer:",g),{data:null,error:g.message}):(!a.scheduledDate&&a.fromAccountId&&(await e({accountId:a.fromAccountId,amount:a.amount,description:`Transfer to ${a.toAccountId?"account":"external"}`,transactionType:"debit",merchantName:"Internal Transfer",memo:a.memo}),a.toAccountId&&await e({accountId:a.toAccountId,amount:a.amount,description:"Transfer received",transactionType:"credit",merchantName:"Internal Transfer",memo:a.memo})),console.log("[v0] Created transfer:",f.id,a.amount),{data:f,error:null})}(0,d.ensureServerEntryExports)([e]),(0,b.registerServerReference)(e,"40683e31f03ed80b1a180a8b2b1ee90cd06f193253",null),(0,d.ensureServerEntryExports)([f]),(0,b.registerServerReference)(f,"40aae5a4b3a0b8a24abf2536d7fac508b9cd4b1ede",null),a.s(["createNeobankTransfer",0,f],357616)},161665,a=>{"use strict";var b=a.i(872170),c=a.i(994858),d=a.i(357616);a.s([],970488),a.i(970488),a.s(["0090321b0baf47b1bcf225c9f120d0855fd316418b",()=>c.getUser,"40591777f7b8407d936a63ee71ad659ec4540049c7",()=>b.getUserProfile,"40aae5a4b3a0b8a24abf2536d7fac508b9cd4b1ede",()=>d.createNeobankTransfer],161665)}];

//# sourceMappingURL=taxu-platform_v0-taxu-landing-page_e0333ac0._.js.map