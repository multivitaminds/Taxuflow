module.exports=[176729,a=>{"use strict";var b=a.i(24500),c=a.i(598293),d=a.i(659790),e=a.i(419716),f=a.i(27866),g=a.i(30487),h=a.i(301755),i=a.i(990681),j=a.i(504047),k=a.i(72207),l=a.i(13325),m=a.i(107560),n=a.i(177584),o=a.i(290130),p=a.i(878056),q=a.i(676996),r=a.i(930726),s=a.i(473405),t=a.i(441037);function u({document:a,isOpen:d,onClose:g}){let j,m,[n,o]=(0,c.useState)(!1),[u,v]=(0,c.useState)(!1);if(!a)return null;let w=async()=>{o(!0);try{let b=await fetch(`/api/documents/${a.id}/download`),c=await b.blob(),d=URL.createObjectURL(c),e=a.createElement("a");e.href=d,e.download=a.file_name,e.click(),URL.revokeObjectURL(d)}catch(a){console.error("[v0] Download error:",a)}finally{o(!1)}},x=a.extracted_data||{},y=a.processing_status||"pending";return(0,b.jsx)(p.Dialog,{open:d,onOpenChange:g,children:(0,b.jsxs)(p.DialogContent,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(p.DialogHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(p.DialogTitle,{className:"text-2xl",children:a.file_name}),(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:g,children:(0,b.jsx)(s.X,{className:"w-4 h-4"})})]})}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(f.Card,{className:"p-6 border-neon/20 bg-card/50 backdrop-blur",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Document Type"}),(0,b.jsx)(q.Badge,{variant:"outline",className:"text-neon border-neon/50",children:a.ai_document_type?({w2:"Form W-2 (Wage and Tax Statement)",w2c:"Form W-2c (Corrected Wage and Tax Statement)","1099-nec":"Form 1099-NEC (Nonemployee Compensation)","1099-misc":"Form 1099-MISC (Miscellaneous Income)",1098:"Form 1098 (Mortgage Interest Statement)","medical-expenses":"Medical Expense Records","charitable-donations":"Charitable Donation Records","business-receipts":"Business Receipts",k1:"Schedule K-1 (Partnership Income)","income-statement":"Income Statement"})[a.ai_document_type]||"Tax Document":"Processing..."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Status"}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:"completed"===y?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.CheckCircle2,{className:"w-4 h-4 text-green-500"}),(0,b.jsx)("span",{className:"text-green-500",children:"Processed"})]}):"failed"===y?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r.AlertCircle,{className:"w-4 h-4 text-red-500"}),(0,b.jsx)("span",{className:"text-red-500",children:"Failed"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.Clock,{className:"w-4 h-4 text-yellow-500"}),(0,b.jsx)("span",{className:"text-yellow-500",children:"Processing"})]})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"File Size"}),(0,b.jsxs)("p",{className:"font-medium",children:[(a.file_size/1024).toFixed(1)," KB"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Uploaded"}),(0,b.jsx)("p",{className:"font-medium",children:new Date(a.created_at).toLocaleDateString()})]})]})}),a.ai_confidence_score&&(0,b.jsxs)(f.Card,{className:"p-6 border-neon/20 bg-card/50 backdrop-blur",children:[(0,b.jsx)("h3",{className:"font-semibold mb-3",children:"AI Extraction Confidence"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)("div",{className:"h-2 bg-background rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-gradient-to-r from-neon to-green-500 transition-all",style:{width:`${100*a.ai_confidence_score}%`}})})}),(0,b.jsxs)("span",{className:"font-bold text-neon",children:[(100*a.ai_confidence_score).toFixed(0),"%"]})]})]}),Object.keys(x).length>0&&(0,b.jsxs)(f.Card,{className:"p-6 border-neon/20 bg-card/50 backdrop-blur",children:[(0,b.jsx)("h3",{className:"font-semibold mb-4",children:"Extracted Information"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(x).map(([a,c])=>(0,b.jsxs)("div",{className:"p-3 bg-background/50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1 capitalize",children:a.replace(/_/g," ")}),(0,b.jsx)("p",{className:"font-medium",children:"object"==typeof c?JSON.stringify(c):String(c)})]},a))})]}),a.ai_suggestions&&a.ai_suggestions.length>0&&(0,b.jsxs)(f.Card,{className:"p-6 border-neon/20 bg-card/50 backdrop-blur",children:[(0,b.jsx)("h3",{className:"font-semibold mb-4",children:"AI Suggestions"}),(0,b.jsx)("div",{className:"space-y-2",children:a.ai_suggestions.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-background/50 rounded-lg",children:[(0,b.jsx)(k.CheckCircle2,{className:"w-5 h-5 text-neon flex-shrink-0 mt-0.5"}),(0,b.jsx)("p",{className:"text-sm",children:a})]},c))})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)(e.Button,{onClick:w,disabled:n,className:"flex-1",children:[(0,b.jsx)(i.Download,{className:"w-4 h-4 mr-2"}),n?"Downloading...":"Download Original"]}),(j=new Date().getFullYear(),m=a.tax_year||j,"w2"===a.ai_document_type&&m<j&&(0,b.jsxs)(e.Button,{variant:"outline",className:"flex-1 border-neon/50 text-neon hover:bg-neon/10 bg-transparent",onClick:()=>v(!0),children:[(0,b.jsx)(h.FileText,{className:"w-4 h-4 mr-2"}),"Generate Penalty Letter ($39)"]}))]})]}),u&&(0,b.jsx)(t.default,{open:u,onOpenChange:v,businessName:x?.employer?.name||"Your Business",ein:x?.employer?.ein||"",taxYear:a.tax_year||new Date().getFullYear(),formType:"W-2"})]})})}a.s(["AllDocumentsClient",0,function({user:a,profile:p}){let q=(0,d.useRouter)(),[r,s]=(0,c.useState)([]),[t,v]=(0,c.useState)(!0),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)("all"),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(!1),E=(0,o.createClient)(),F=async()=>{v(!0);let{data:b,error:c}=await E.from("documents").select("*").eq("user_id",a.id).order("created_at",{ascending:!1});b&&s(b),v(!1)};(0,c.useEffect)(()=>{F()},[a.id]);let G=async(a,b)=>{try{let{data:c,error:d}=await E.from("documents").select("file_path").eq("id",a).single();if(d||!c)return void alert("Failed to download document. Please try again.");let{data:e,error:f}=await E.storage.from("tax-documents").download(c.file_path);if(f)return void alert("Failed to download file. Please try again.");let g=URL.createObjectURL(e),h=document.createElement("a");h.href=g,h.download=b,h.click(),URL.revokeObjectURL(g)}catch(a){alert("An unexpected error occurred. Please try again.")}},H=async(a,b)=>{if(window.confirm(`Are you sure you want to delete "${b}"? This action cannot be undone.`))try{let b=await fetch(`/api/delete-document?id=${a}`,{method:"DELETE"}),c=await b.json();if(!b.ok)return void alert(`Failed to delete document: ${c.error}`);alert("Document deleted successfully"),F()}catch(a){alert("An unexpected error occurred. Please try again.")}},I=()=>{console.log("[v0] Upload button clicked, navigating to upload page"),q.push("/dashboard/documents/upload")},J=r.filter(a=>{let b=a.file_name.toLowerCase().includes(w.toLowerCase()),c="all"===y||"processed"===y&&a.ai_document_type||"processing"===y&&!a.ai_document_type||"w2"===y&&"w2"===a.ai_document_type||"1099"===y&&"1099"===a.ai_document_type;return b&&c});return t?(0,b.jsx)("div",{className:"min-h-screen bg-background pt-8 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 border-4 border-neon border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading documents..."})]})}):(0,b.jsx)("div",{className:"min-h-screen bg-background pt-8 pr-8",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,b.jsxs)(e.Button,{onClick:()=>q.push("/dashboard/documents"),variant:"ghost",className:"mb-6",children:[(0,b.jsx)(g.ArrowLeft,{className:"w-4 h-4 mr-2"}),"Back to Documents"]}),(0,b.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"All Documents"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Complete list of all your uploaded tax documents"})]}),(0,b.jsxs)(e.Button,{onClick:I,className:"bg-neon hover:bg-neon/90 text-background relative z-10 cursor-pointer",type:"button",children:[(0,b.jsx)(n.Upload,{className:"w-4 h-4 mr-2"}),"Upload Document"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,b.jsxs)(f.Card,{className:"p-6 border-neon/20 bg-card/50 backdrop-blur",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)(h.FileText,{className:"w-5 h-5 text-neon"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Total Documents"})]}),(0,b.jsx)("p",{className:"text-3xl font-bold",children:r.length})]}),(0,b.jsxs)(f.Card,{className:"p-6 border-neon/20 bg-card/50 backdrop-blur",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)(k.CheckCircle2,{className:"w-5 h-5 text-green-500"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Processed"})]}),(0,b.jsx)("p",{className:"text-3xl font-bold",children:r.filter(a=>a.ai_document_type).length})]}),(0,b.jsxs)(f.Card,{className:"p-6 border-neon/20 bg-card/50 backdrop-blur",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)(l.Clock,{className:"w-5 h-5 text-yellow-500"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Processing"})]}),(0,b.jsx)("p",{className:"text-3xl font-bold",children:r.filter(a=>!a.ai_document_type).length})]}),(0,b.jsxs)(f.Card,{className:"p-6 border-neon/20 bg-card/50 backdrop-blur",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)(h.FileText,{className:"w-5 h-5 text-blue-500"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Storage Used"})]}),(0,b.jsxs)("p",{className:"text-3xl font-bold",children:[(r.reduce((a,b)=>a+b.file_size,0)/1024/1024).toFixed(1)," MB"]})]})]}),(0,b.jsx)(f.Card,{className:"p-6 border-neon/20 bg-card/50 backdrop-blur mb-6",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)(m.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,b.jsx)("input",{type:"text",placeholder:"Search documents...",value:w,onChange:a=>x(a.target.value),className:"w-full pl-10 pr-4 py-2 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-neon"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(e.Button,{variant:"all"===y?"default":"outline",onClick:()=>z("all"),className:"all"===y?"bg-neon text-background hover:bg-neon/90":"hover:bg-neon/10",children:"All"}),(0,b.jsx)(e.Button,{variant:"processed"===y?"default":"outline",onClick:()=>z("processed"),className:"processed"===y?"bg-neon text-background hover:bg-neon/90":"hover:bg-neon/10",children:"Processed"}),(0,b.jsx)(e.Button,{variant:"processing"===y?"default":"outline",onClick:()=>z("processing"),className:"processing"===y?"bg-neon text-background hover:bg-neon/90":"hover:bg-neon/10",children:"Processing"})]})]})}),(0,b.jsx)(f.Card,{className:"p-6 border-neon/20 bg-card/50 backdrop-blur",children:(0,b.jsxs)("div",{className:"space-y-3",children:[J.map(a=>{let c=a.ai_document_type?{status:"processed",label:"Processed",icon:k.CheckCircle2,color:"text-green-500"}:{status:"pending",label:"Processing",icon:l.Clock,color:"text-yellow-500"},d=c.icon;return(0,b.jsxs)("div",{onClick:()=>{B(a),D(!0)},className:"flex items-center justify-between p-4 rounded-lg bg-background/50 hover:bg-background/80 transition-all cursor-pointer",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(h.FileText,{className:"w-6 h-6 text-neon"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold",children:a.file_name}),(0,b.jsxs)("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[(0,b.jsx)("span",{children:new Date(a.created_at).toLocaleDateString()}),(0,b.jsx)("span",{children:"•"}),(0,b.jsxs)("span",{children:[(a.file_size/1024).toFixed(1)," KB"]}),(0,b.jsx)("span",{children:"•"}),(0,b.jsxs)("span",{className:`flex items-center gap-1 ${c.color}`,children:[(0,b.jsx)(d,{className:"w-4 h-4"}),c.label]}),a.ai_document_type&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{children:"•"}),(0,b.jsx)("span",{className:"capitalize",children:a.ai_document_type})]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Button,{onClick:()=>G(a.id,a.file_name),variant:"ghost",size:"sm",children:(0,b.jsx)(i.Download,{className:"w-4 h-4"})}),(0,b.jsx)(e.Button,{onClick:()=>H(a.id,a.file_name),variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-600 hover:bg-red-500/10",children:(0,b.jsx)(j.Trash2,{className:"w-4 h-4"})})]})]},a.id)}),0===J.length&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(h.FileText,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"No documents found"}),(0,b.jsxs)(e.Button,{onClick:I,className:"bg-neon hover:bg-neon/90 text-background relative z-10 cursor-pointer",type:"button",children:[(0,b.jsx)(n.Upload,{className:"w-4 h-4 mr-2"}),"Upload Your First Document"]})]})]})}),(0,b.jsx)(u,{document:A,isOpen:C,onClose:()=>D(!1)})]})})}],176729)}];

//# sourceMappingURL=taxu-platform_v0-taxu-landing-page_components_all-documents-client_tsx_ca665bb0._.js.map