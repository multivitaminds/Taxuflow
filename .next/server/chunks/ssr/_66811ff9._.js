module.exports=[681917,a=>{"use strict";let b=(0,a.i(550349).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["default",0,b])},435483,a=>{"use strict";var b=a.i(681917);a.s(["Calendar",()=>b.default])},626317,a=>{"use strict";let b=(0,a.i(550349).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["default",0,b])},674375,a=>{"use strict";var b=a.i(626317);a.s(["CheckCircle2",()=>b.default])},949191,a=>{"use strict";let b=(0,a.i(550349).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",0,b],949191)},666929,a=>{"use strict";let b=(0,a.i(550349).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",0,b],666929)},881995,a=>{"use strict";let b=(0,a.i(550349).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);a.s(["default",0,b])},982747,a=>{"use strict";var b=a.i(881995);a.s(["ArrowRight",()=>b.default])},937792,a=>{"use strict";var b=a.i(155108);a.s(["Check",()=>b.default])},640065,a=>{"use strict";let b=(0,a.i(550349).default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);a.s(["Copy",0,b],640065)},861084,a=>{"use strict";let b=(0,a.i(550349).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",0,b],861084)},351790,a=>{"use strict";let b=(0,a.i(550349).default)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);a.s(["ArrowUpRight",0,b],351790)},976579,a=>{"use strict";let b=(0,a.i(550349).default)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);a.s(["Key",0,b],976579)},83566,a=>{"use strict";let b=(0,a.i(550349).default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);a.s(["MessageSquare",0,b],83566)},223937,a=>{"use strict";let b=(0,a.i(550349).default)("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]);a.s(["Webhook",0,b],223937)},627727,a=>{"use strict";var b=a.i(108446),c=a.i(117462),d=a.i(269240),e=a.i(340695),f=a.i(323746),g=a.i(549117),h=a.i(861084),i=a.i(949191),j=a.i(674375),k=a.i(197665),l=a.i(703130);a.s(["DocumentUpload",0,function({onUploadComplete:a}){let[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)(!1),q=(0,d.createClient)(),r=async(b,c)=>{console.log("[v0] Starting file upload:",b.name);try{let d,e=b.size>0xa00000?"File size must be less than 10MB":["application/pdf","image/jpeg","image/jpg","image/png","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(b.type)?null:"Only PDF, JPG, PNG, and DOCX files are allowed";if(e){console.error("[v0] Validation failed:",e),n(a=>a.map((a,b)=>b===c?{...a,status:"error",error:e}:a));return}let{data:{user:f},error:g}=await q.auth.getUser();if(g||!f){console.error("[v0] User error:",g),n(a=>a.map((a,b)=>b===c?{...a,status:"error",error:"Please sign in to upload documents"}:a));return}console.log("[v0] User authenticated:",f.id);let h=Date.now(),i=b.name.replace(/[^a-zA-Z0-9.-]/g,"_"),j=`${f.id}/${h}-${i}`;console.log("[v0] Uploading to storage..."),n(a=>a.map((a,b)=>b===c?{...a,progress:"Uploading to secure storage..."}:a));let{data:k,error:l}=await q.storage.from("tax-documents").upload(j,b,{cacheControl:"3600",upsert:!1});if(l){console.error("[v0] Upload error:",l);let a=`Upload failed: ${l.message}`;(l.message.includes("not found")||l.message.includes("does not exist"))&&(a="Storage bucket not set up. Please run the database setup scripts first."),n(b=>b.map((b,d)=>d===c?{...b,status:"error",error:a}:b));return}console.log("[v0] File uploaded to storage successfully");let{data:{publicUrl:o}}=q.storage.from("tax-documents").getPublicUrl(j),p=(d=b.name.toLowerCase()).includes("w-2")||d.includes("w2")?"w2":d.includes("1099")?"1099":d.includes("receipt")?"receipt":"other",r=new Date().getFullYear();console.log("[v0] Saving document metadata..."),n(a=>a.map((a,b)=>b===c?{...a,progress:"Saving document information..."}:a));let{data:s,error:t}=await q.from("documents").insert({user_id:f.id,file_name:b.name,file_path:j,file_url:o,file_size:b.size,file_type:b.type,document_type:p,tax_year:r}).select().single();if(t){console.error("[v0] Database error:",t);let a=`Failed to save document info: ${t.message}`;t.message.includes("relation")&&t.message.includes("does not exist")&&(a="Database table not set up. Please run the database setup scripts first."),n(b=>b.map((b,d)=>d===c?{...b,status:"error",error:a}:b));return}console.log("[v0] Document saved successfully:",s.id),console.log("[v0] Starting AI document processing..."),n(a=>a.map((a,b)=>b===c?{...a,status:"processing",progress:"Sophie is analyzing with AI vision...",documentId:s.id}:a));try{let b=await fetch("/api/process-document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({documentId:s.id})});if(console.log("[v0] Process document response status:",b.status),!b.ok){let a=await b.json();throw console.error("[v0] Processing API error:",a),Error(a.error||"Processing failed")}let d=await b.json();console.log("[v0] Document processing complete:",d),n(a=>a.map((a,b)=>b===c?{...a,status:"complete",progress:`All 5 AI agents analyzed your ${d.documentType?.toUpperCase()||"document"}!`}:a)),setTimeout(()=>{n(a=>a.filter((a,b)=>b!==c)),1===m.filter(a=>"complete"!==a.status).length&&(console.log("[v0] All files processed, refreshing dashboard"),a&&a())},3e3)}catch(a){console.error("[v0] Processing error:",a),n(a=>a.map((a,b)=>b===c?{...a,status:"error",error:"Document uploaded but AI processing failed"}:a))}}catch(a){console.error("[v0] Unexpected error:",a),n(a=>a.map((a,b)=>b===c?{...a,status:"error",error:"An unexpected error occurred"}:a))}},s=a=>{a.preventDefault(),a.stopPropagation(),"dragenter"===a.type||"dragover"===a.type?p(!0):"dragleave"===a.type&&p(!1)};return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:`relative border-2 border-dashed rounded-lg p-8 text-center transition-colors ${o?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onDragEnter:s,onDragLeave:s,onDragOver:s,onDrop:a=>{a.preventDefault(),a.stopPropagation(),p(!1);let b=Array.from(a.dataTransfer.files||[]);if(b.length>0){console.log("[v0] Dropped",b.length,"files");let a=b.map(a=>({file:a,status:"uploading",progress:"Starting upload..."}));n(b=>[...b,...a]),b.forEach((a,b)=>{r(a,m.length+b)})}},children:[(0,b.jsx)("input",{type:"file",id:"file-upload",className:"hidden",onChange:a=>{let b=Array.from(a.target.files||[]);if(b.length>0){console.log("[v0] Selected",b.length,"files for upload");let a=b.map(a=>({file:a,status:"uploading",progress:"Starting upload..."}));n(b=>[...b,...a]),b.forEach((a,b)=>{r(a,m.length+b)})}a.target.value=""},accept:".pdf,.jpg,.jpeg,.png,.docx",multiple:!0}),(0,b.jsxs)("label",{htmlFor:"file-upload",className:"cursor-pointer flex flex-col items-center gap-2",children:[(0,b.jsx)(f.Upload,{className:"h-12 w-12 text-muted-foreground"}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Drop your tax documents here"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"or click to browse (PDF, JPG, PNG, DOCX - max 10MB each)"}),(0,b.jsx)("p",{className:"text-xs text-primary font-medium mt-2",children:"You can upload multiple files at once"})]})]})]}),m.map((a,c)=>(0,b.jsx)(l.Card,{className:`p-4 ${"complete"===a.status?"bg-green-500/10 border-green-500":"error"===a.status?"bg-destructive/10 border-destructive":"bg-primary/10 border-primary"}`,children:(0,b.jsxs)("div",{className:"flex items-start gap-2",children:["complete"===a.status?(0,b.jsx)(j.CheckCircle2,{className:"h-5 w-5 text-green-500 mt-0.5 flex-shrink-0"}):"error"===a.status?(0,b.jsx)(i.AlertCircle,{className:"h-5 w-5 text-destructive mt-0.5 flex-shrink-0"}):(0,b.jsx)(h.Loader2,{className:"h-5 w-5 text-primary mt-0.5 flex-shrink-0 animate-spin"}),(0,b.jsx)(k.FileText,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:`text-sm font-medium truncate ${"complete"===a.status?"text-green-500":"error"===a.status?"text-destructive":"text-primary"}`,children:a.file.name}),(0,b.jsx)("p",{className:`text-xs mt-1 ${"complete"===a.status?"text-green-500/80":"error"===a.status?"text-destructive/80":"text-primary/80"}`,children:"error"===a.status?a.error:a.progress}),"processing"===a.status&&(0,b.jsxs)("div",{className:"mt-3 space-y-1",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"• Sophie: Document analysis"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"• Leo: Tax calculations"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"• Riley: Deduction discovery"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"• Kai: Audit risk assessment"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"• Jordan: Tax strategy"})]})]}),"error"===a.status&&(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>{n(a=>a.filter((a,b)=>b!==c))},className:"h-6 w-6 p-0 flex-shrink-0",children:(0,b.jsx)(g.X,{className:"h-4 w-4"})})]})},c))]})}])}];

//# sourceMappingURL=_66811ff9._.js.map