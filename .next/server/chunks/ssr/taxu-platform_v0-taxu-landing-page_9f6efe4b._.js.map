{"version":3,"sources":["../../../../../../taxu-platform/v0-taxu-landing-page/app/actions/neobank/get-cards.ts","../../../../../../taxu-platform/v0-taxu-landing-page/.next-internal/server/app/neobank/cards/page/actions.js%20%28server%20actions%20loader%29","../../../../../../taxu-platform/v0-taxu-landing-page/app/actions/neobank/create-card.ts","../../../../../../taxu-platform/v0-taxu-landing-page/app/actions/neobank/update-card-status.ts"],"sourcesContent":["\"use server\"\n\nimport { createClient } from \"@/lib/supabase/server\"\n\nexport async function getNeobankCards() {\n  const supabase = await createClient()\n\n  const {\n    data: { user },\n  } = await supabase.auth.getUser()\n\n  if (!user) {\n    return { data: null, error: \"Not authenticated\" }\n  }\n\n  const { data, error } = await supabase\n    .from(\"neobank_cards\")\n    .select(\"*\")\n    .eq(\"user_id\", user.id)\n    .order(\"created_at\", { ascending: false })\n\n  if (error) {\n    console.error(\"[v0] Error fetching cards:\", error)\n    return { data: null, error: error.message }\n  }\n\n  return { data, error: null }\n}\n","export {getUserProfile as '40591777f7b8407d936a63ee71ad659ec4540049c7'} from 'ACTIONS_MODULE0'\nexport {getUser as '0090321b0baf47b1bcf225c9f120d0855fd316418b'} from 'ACTIONS_MODULE1'\nexport {getNeobankCards as '007f5df2dc6280d232b38e8ddad0b908309ed46261'} from 'ACTIONS_MODULE2'\nexport {createNeobankCard as '40726681c8488753fff72e3d6dd34fbd229ac970c0'} from 'ACTIONS_MODULE3'\nexport {updateCardStatus as '609b43a68dbbfd95cffef02655646bad1d45dcb469'} from 'ACTIONS_MODULE4'\n","\"use server\"\n\nimport { createClient } from \"@/lib/supabase/server\"\nimport { revalidatePath } from \"next/cache\"\n\nexport async function createNeobankCard(formData: {\n  cardType: \"virtual\" | \"physical\"\n  cardName: string\n  monthlyLimit: number\n  cardholder: string\n}) {\n  const supabase = await createClient()\n\n  const {\n    data: { user },\n  } = await supabase.auth.getUser()\n\n  if (!user) {\n    return { success: false, error: \"Not authenticated\" }\n  }\n\n  // Generate card details\n  const last4 = Math.floor(1000 + Math.random() * 9000).toString()\n  const cvv = Math.floor(100 + Math.random() * 900).toString()\n  const currentYear = new Date().getFullYear()\n  const expiryYear = (currentYear + 4).toString().slice(-2)\n  const expiryMonth = String(Math.floor(Math.random() * 12) + 1).padStart(2, \"0\")\n\n  const { data, error } = await supabase\n    .from(\"neobank_cards\")\n    .insert({\n      user_id: user.id,\n      card_type: formData.cardType,\n      card_name: formData.cardName,\n      last_four: last4,\n      expiry_date: `${expiryMonth}/${expiryYear}`,\n      cvv: cvv,\n      cardholder_name: formData.cardholder.toUpperCase(),\n      monthly_limit: formData.monthlyLimit,\n      spent_amount: 0,\n      status: \"active\",\n    })\n    .select()\n    .single()\n\n  if (error) {\n    console.error(\"[v0] Error creating card:\", error)\n    return { success: false, error: error.message }\n  }\n\n  revalidatePath(\"/neobank/cards\")\n  return { success: true, data }\n}\n","\"use server\"\n\nimport { createServerClient } from \"@/lib/supabase/server\"\nimport { revalidatePath } from \"next/cache\"\n\nexport async function updateCardStatus(cardId: string, status: \"active\" | \"frozen\" | \"cancelled\") {\n  try {\n    const supabase = await createServerClient()\n\n    const {\n      data: { user },\n    } = await supabase.auth.getUser()\n    if (!user) {\n      return { error: \"Unauthorized\" }\n    }\n\n    const { data, error } = await supabase\n      .from(\"neobank_cards\")\n      .update({\n        status,\n        updated_at: new Date().toISOString(),\n      })\n      .eq(\"id\", cardId)\n      .eq(\"user_id\", user.id)\n      .select()\n      .single()\n\n    if (error) throw error\n\n    revalidatePath(\"/neobank/cards\")\n    return { success: true, data }\n  } catch (error) {\n    console.error(\"Error updating card status:\", error)\n    return { error: error instanceof Error ? error.message : \"Failed to update card status\" }\n  }\n}\n"],"names":[],"mappings":"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"}