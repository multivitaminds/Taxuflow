(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,900042,e=>{"use strict";var t=e.i(778743),r=e.i(437322),i=e.i(949161),l=e.i(285937),a=e.i(594950),s=e.i(363284),o=e.i(844994),n=e.i(823018),d=e.i(838589),c=e.i(230692),m=e.i(187189),u=e.i(671759),p=e.i(858229),h=e.i(71866),g=e.i(320555),f=e.i(669980),y=e.i(176359),x=e.i(969705),v=e.i(965957),b=e.i(858508),j=e.i(305682),N=e.i(590445);function w(e,t,{checkForDefaultPrevented:r=!0}={}){return function(i){if(e?.(i),!1===r||!i.defaultPrevented)return t?.(i)}}function S(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function C(...e){return t=>{let r=!1,i=e.map(e=>{let i=S(e,t);return r||"function"!=typeof i||(r=!0),i});if(r)return()=>{for(let t=0;t<i.length;t++){let r=i[t];"function"==typeof r?r():S(e[t],null)}}}}function I(...e){return i.useCallback(C(...e),e)}function A(e,t=[]){let l=[],a=()=>{let t=l.map(e=>i.createContext(e));return function(r){let l=r?.[e]||t;return i.useMemo(()=>({[`__scope${e}`]:{...r,[e]:l}}),[r,l])}};return a.scopeName=e,[function(t,a){let s=i.createContext(a),o=l.length;l=[...l,a];let n=t=>{let{scope:l,children:a,...n}=t,d=l?.[e]?.[o]||s,c=i.useMemo(()=>n,Object.values(n));return(0,r.jsx)(d.Provider,{value:c,children:a})};return n.displayName=t+"Provider",[n,function(r,l){let n=l?.[e]?.[o]||s,d=i.useContext(n);if(d)return d;if(void 0!==a)return a;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let l=r.reduce((t,{useScope:r,scopeName:i})=>{let l=r(e)[`__scope${i}`];return{...t,...l}},{});return i.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return r.scopeName=t.scopeName,r}(a,...t)]}function F(e){var t;let l,a=(t=e,(l=i.forwardRef((e,t)=>{let{children:r,...l}=e;if(i.isValidElement(r)){var a;let e,s,o=(a=r,(s=(e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.ref:(s=(e=Object.getOwnPropertyDescriptor(a,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.props.ref:a.props.ref||a.ref),n=function(e,t){let r={...t};for(let i in t){let l=e[i],a=t[i];/^on[A-Z]/.test(i)?l&&a?r[i]=(...e)=>{let t=a(...e);return l(...e),t}:l&&(r[i]=l):"style"===i?r[i]={...l,...a}:"className"===i&&(r[i]=[l,a].filter(Boolean).join(" "))}return{...e,...r}}(l,r.props);return r.type!==i.Fragment&&(n.ref=t?C(t,o):o),i.cloneElement(r,n)}return i.Children.count(r)>1?i.Children.only(null):null})).displayName=`${t}.SlotClone`,l),s=i.forwardRef((e,t)=>{let{children:l,...s}=e,o=i.Children.toArray(l),n=o.find(R);if(n){let e=n.props.children,l=o.map(t=>t!==n?t:i.Children.count(e)>1?i.Children.only(null):i.isValidElement(e)?e.props.children:null);return(0,r.jsx)(a,{...s,ref:t,children:i.isValidElement(e)?i.cloneElement(e,void 0,l):null})}return(0,r.jsx)(a,{...s,ref:t,children:l})});return s.displayName=`${e}.Slot`,s}"undefined"!=typeof window&&window.document&&window.document.createElement,e.i(29157);var W=Symbol("radix.slottable");function R(e){return i.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===W}var k=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let l=F(`Primitive.${t}`),a=i.forwardRef((e,i)=>{let{asChild:a,...s}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(a?l:t,{...s,ref:i})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{}),E=new WeakMap;function T(e,t){var r,i;let l,a,s;if("at"in Array.prototype)return Array.prototype.at.call(e,t);let o=(r=e,i=t,l=r.length,(s=(a=L(i))>=0?a:l+a)<0||s>=l?-1:s);return -1===o?void 0:e[o]}function L(e){return e!=e||0===e?0:Math.trunc(e)}(class e extends Map{#e;constructor(e){super(e),this.#e=[...super.keys()],E.set(this,!0)}set(e,t){return E.get(this)&&(this.has(e)?this.#e[this.#e.indexOf(e)]=e:this.#e.push(e)),super.set(e,t),this}insert(e,t,r){let i,l=this.has(t),a=this.#e.length,s=L(e),o=s>=0?s:a+s,n=o<0||o>=a?-1:o;if(n===this.size||l&&n===this.size-1||-1===n)return this.set(t,r),this;let d=this.size+ +!l;s<0&&o++;let c=[...this.#e],m=!1;for(let e=o;e<d;e++)if(o===e){let a=c[e];c[e]===t&&(a=c[e+1]),l&&this.delete(t),i=this.get(a),this.set(t,r)}else{m||c[e-1]!==t||(m=!0);let r=c[m?e:e-1],l=i;i=this.get(r),this.delete(r),this.set(r,l)}return this}with(t,r,i){let l=new e(this);return l.insert(t,r,i),l}before(e){let t=this.#e.indexOf(e)-1;if(!(t<0))return this.entryAt(t)}setBefore(e,t,r){let i=this.#e.indexOf(e);return -1===i?this:this.insert(i,t,r)}after(e){let t=this.#e.indexOf(e);if(-1!==(t=-1===t||t===this.size-1?-1:t+1))return this.entryAt(t)}setAfter(e,t,r){let i=this.#e.indexOf(e);return -1===i?this:this.insert(i+1,t,r)}first(){return this.entryAt(0)}last(){return this.entryAt(-1)}clear(){return this.#e=[],super.clear()}delete(e){let t=super.delete(e);return t&&this.#e.splice(this.#e.indexOf(e),1),t}deleteAt(e){let t=this.keyAt(e);return void 0!==t&&this.delete(t)}at(e){let t=T(this.#e,e);if(void 0!==t)return this.get(t)}entryAt(e){let t=T(this.#e,e);if(void 0!==t)return[t,this.get(t)]}indexOf(e){return this.#e.indexOf(e)}keyAt(e){return T(this.#e,e)}from(e,t){let r=this.indexOf(e);if(-1===r)return;let i=r+t;return i<0&&(i=0),i>=this.size&&(i=this.size-1),this.at(i)}keyFrom(e,t){let r=this.indexOf(e);if(-1===r)return;let i=r+t;return i<0&&(i=0),i>=this.size&&(i=this.size-1),this.keyAt(i)}find(e,t){let r=0;for(let i of this){if(Reflect.apply(e,t,[i,r,this]))return i;r++}}findIndex(e,t){let r=0;for(let i of this){if(Reflect.apply(e,t,[i,r,this]))return r;r++}return -1}filter(t,r){let i=[],l=0;for(let e of this)Reflect.apply(t,r,[e,l,this])&&i.push(e),l++;return new e(i)}map(t,r){let i=[],l=0;for(let e of this)i.push([e[0],Reflect.apply(t,r,[e,l,this])]),l++;return new e(i)}reduce(...e){let[t,r]=e,i=0,l=r??this.at(0);for(let r of this)l=0===i&&1===e.length?r:Reflect.apply(t,this,[l,r,i,this]),i++;return l}reduceRight(...e){let[t,r]=e,i=r??this.at(-1);for(let r=this.size-1;r>=0;r--){let l=this.at(r);i=r===this.size-1&&1===e.length?l:Reflect.apply(t,this,[i,l,r,this])}return i}toSorted(t){return new e([...this.entries()].sort(t))}toReversed(){let t=new e;for(let e=this.size-1;e>=0;e--){let r=this.keyAt(e),i=this.get(r);t.set(r,i)}return t}toSpliced(...t){let r=[...this.entries()];return r.splice(...t),new e(r)}slice(t,r){let i=new e,l=this.size-1;if(void 0===t)return i;t<0&&(t+=this.size),void 0!==r&&r>0&&(l=r-1);for(let e=t;e<=l;e++){let t=this.keyAt(e),r=this.get(t);i.set(t,r)}return i}every(e,t){let r=0;for(let i of this){if(!Reflect.apply(e,t,[i,r,this]))return!1;r++}return!0}some(e,t){let r=0;for(let i of this){if(Reflect.apply(e,t,[i,r,this]))return!0;r++}return!1}});var _=e.i(157838),P=i[" useId ".trim().toString()]||(()=>void 0),$=0,D=e.i(426368);e.i(915742);var B=i[" useInsertionEffect ".trim().toString()]||_.useLayoutEffect;function q({prop:e,defaultProp:t,onChange:r=()=>{},caller:l}){let[a,s,o]=function({defaultProp:e,onChange:t}){let[r,l]=i.useState(e),a=i.useRef(r),s=i.useRef(t);return B(()=>{s.current=t},[t]),i.useEffect(()=>{a.current!==r&&(s.current?.(r),a.current=r)},[r,a]),[r,l,s]}({defaultProp:t,onChange:r}),n=void 0!==e,d=n?e:a;{let t=i.useRef(void 0!==e);i.useEffect(()=>{let e=t.current;if(e!==n){let t=n?"controlled":"uncontrolled";console.warn(`${l} is changing from ${e?"controlled":"uncontrolled"} to ${t}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}t.current=n},[n,l])}return[d,i.useCallback(t=>{if(n){let r="function"==typeof t?t(e):t;r!==e&&o.current?.(r)}else s(t)},[n,e,s,o])]}Symbol("RADIX:SYNC_STATE");var O=i.createContext(void 0);function M(e){let t=i.useContext(O);return e||t||"ltr"}var z="rovingFocusGroup.onEntryFocus",Y={bubbles:!1,cancelable:!0},V="RovingFocusGroup",[U,X,Z]=function(e){let t=e+"CollectionProvider",[l,a]=A(t),[s,o]=l(t,{collectionRef:{current:null},itemMap:new Map}),n=e=>{let{scope:t,children:l}=e,a=i.default.useRef(null),o=i.default.useRef(new Map).current;return(0,r.jsx)(s,{scope:t,itemMap:o,collectionRef:a,children:l})};n.displayName=t;let d=e+"CollectionSlot",c=F(d),m=i.default.forwardRef((e,t)=>{let{scope:i,children:l}=e,a=I(t,o(d,i).collectionRef);return(0,r.jsx)(c,{ref:a,children:l})});m.displayName=d;let u=e+"CollectionItemSlot",p="data-radix-collection-item",h=F(u),g=i.default.forwardRef((e,t)=>{let{scope:l,children:a,...s}=e,n=i.default.useRef(null),d=I(t,n),c=o(u,l);return i.default.useEffect(()=>(c.itemMap.set(n,{ref:n,...s}),()=>void c.itemMap.delete(n))),(0,r.jsx)(h,{...{[p]:""},ref:d,children:a})});return g.displayName=u,[{Provider:n,Slot:m,ItemSlot:g},function(t){let r=o(e+"CollectionConsumer",t);return i.default.useCallback(()=>{let e=r.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${p}]`));return Array.from(r.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current))},[r.collectionRef,r.itemMap])},a]}(V),[G,K]=A(V,[Z]),[J,H]=G(V),Q=i.forwardRef((e,t)=>(0,r.jsx)(U.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,r.jsx)(U.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,r.jsx)(ee,{...e,ref:t})})}));Q.displayName=V;var ee=i.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:l,orientation:a,loop:s=!1,dir:o,currentTabStopId:n,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:c,onEntryFocus:m,preventScrollOnEntryFocus:u=!1,...p}=e,h=i.useRef(null),g=I(t,h),f=M(o),[y,x]=q({prop:n,defaultProp:d??null,onChange:c,caller:V}),[v,b]=i.useState(!1),j=(0,D.useCallbackRef)(m),N=X(l),S=i.useRef(!1),[C,A]=i.useState(0);return i.useEffect(()=>{let e=h.current;if(e)return e.addEventListener(z,j),()=>e.removeEventListener(z,j)},[j]),(0,r.jsx)(J,{scope:l,orientation:a,dir:f,loop:s,currentTabStopId:y,onItemFocus:i.useCallback(e=>x(e),[x]),onItemShiftTab:i.useCallback(()=>b(!0),[]),onFocusableItemAdd:i.useCallback(()=>A(e=>e+1),[]),onFocusableItemRemove:i.useCallback(()=>A(e=>e-1),[]),children:(0,r.jsx)(k.div,{tabIndex:v||0===C?-1:0,"data-orientation":a,...p,ref:g,style:{outline:"none",...e.style},onMouseDown:w(e.onMouseDown,()=>{S.current=!0}),onFocus:w(e.onFocus,e=>{let t=!S.current;if(e.target===e.currentTarget&&t&&!v){let t=new CustomEvent(z,Y);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=N().filter(e=>e.focusable);el([e.find(e=>e.active),e.find(e=>e.id===y),...e].filter(Boolean).map(e=>e.ref.current),u)}}S.current=!1}),onBlur:w(e.onBlur,()=>b(!1))})})}),et="RovingFocusGroupItem",er=i.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:l,focusable:a=!0,active:s=!1,tabStopId:o,children:n,...d}=e,c=function(e){let[t,r]=i.useState(P());return(0,_.useLayoutEffect)(()=>{r(e=>e??String($++))},[void 0]),t?`radix-${t}`:""}(),m=o||c,u=H(et,l),p=u.currentTabStopId===m,h=X(l),{onFocusableItemAdd:g,onFocusableItemRemove:f,currentTabStopId:y}=u;return i.useEffect(()=>{if(a)return g(),()=>f()},[a,g,f]),(0,r.jsx)(U.ItemSlot,{scope:l,id:m,focusable:a,active:s,children:(0,r.jsx)(k.span,{tabIndex:p?0:-1,"data-orientation":u.orientation,...d,ref:t,onMouseDown:w(e.onMouseDown,e=>{a?u.onItemFocus(m):e.preventDefault()}),onFocus:w(e.onFocus,()=>u.onItemFocus(m)),onKeyDown:w(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void u.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,r){var i;let l=(i=e.key,"rtl"!==r?i:"ArrowLeft"===i?"ArrowRight":"ArrowRight"===i?"ArrowLeft":i);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(l))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(l)))return ei[l]}(e,u.orientation,u.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let l=h().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)l.reverse();else if("prev"===t||"next"===t){var r,i;"prev"===t&&l.reverse();let a=l.indexOf(e.currentTarget);l=u.loop?(r=l,i=a+1,r.map((e,t)=>r[(i+t)%r.length])):l.slice(a+1)}setTimeout(()=>el(l))}}),children:"function"==typeof n?n({isCurrentTabStop:p,hasTabStop:null!=y}):n})})});er.displayName=et;var ei={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function el(e,t=!1){let r=document.activeElement;for(let i of e)if(i===r||(i.focus({preventScroll:t}),document.activeElement!==r))return}var ea=e.i(178879),es=e.i(409340),eo=e.i(332341),en="Radio",[ed,ec]=A(en),[em,eu]=ed(en),ep=i.forwardRef((e,t)=>{let{__scopeRadio:l,name:a,checked:s=!1,required:o,disabled:n,value:d="on",onCheck:c,form:m,...u}=e,[p,h]=i.useState(null),g=I(t,e=>h(e)),f=i.useRef(!1),y=!p||m||!!p.closest("form");return(0,r.jsxs)(em,{scope:l,checked:s,disabled:n,children:[(0,r.jsx)(k.button,{type:"button",role:"radio","aria-checked":s,"data-state":ey(s),"data-disabled":n?"":void 0,disabled:n,value:d,...u,ref:g,onClick:w(e.onClick,e=>{s||c?.(),y&&(f.current=e.isPropagationStopped(),f.current||e.stopPropagation())})}),y&&(0,r.jsx)(ef,{control:p,bubbles:!f.current,name:a,value:d,checked:s,required:o,disabled:n,form:m,style:{transform:"translateX(-100%)"}})]})});ep.displayName=en;var eh="RadioIndicator",eg=i.forwardRef((e,t)=>{let{__scopeRadio:i,forceMount:l,...a}=e,s=eu(eh,i);return(0,r.jsx)(eo.Presence,{present:l||s.checked,children:(0,r.jsx)(k.span,{"data-state":ey(s.checked),"data-disabled":s.disabled?"":void 0,...a,ref:t})})});eg.displayName=eh;var ef=i.forwardRef(({__scopeRadio:e,control:t,checked:l,bubbles:a=!0,...s},o)=>{let n=i.useRef(null),d=I(n,o),c=(0,es.usePrevious)(l),m=(0,ea.useSize)(t);return i.useEffect(()=>{let e=n.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==l&&t){let r=new Event("click",{bubbles:a});t.call(e,l),e.dispatchEvent(r)}},[c,l,a]),(0,r.jsx)(k.input,{type:"radio","aria-hidden":!0,defaultChecked:l,...s,tabIndex:-1,ref:d,style:{...s.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function ey(e){return e?"checked":"unchecked"}ef.displayName="RadioBubbleInput";var ex=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ev="RadioGroup",[eb,ej]=A(ev,[K,ec]),eN=K(),ew=ec(),[eS,eC]=eb(ev),eI=i.forwardRef((e,t)=>{let{__scopeRadioGroup:i,name:l,defaultValue:a,value:s,required:o=!1,disabled:n=!1,orientation:d,dir:c,loop:m=!0,onValueChange:u,...p}=e,h=eN(i),g=M(c),[f,y]=q({prop:s,defaultProp:a??null,onChange:u,caller:ev});return(0,r.jsx)(eS,{scope:i,name:l,required:o,disabled:n,value:f,onValueChange:y,children:(0,r.jsx)(Q,{asChild:!0,...h,orientation:d,dir:g,loop:m,children:(0,r.jsx)(k.div,{role:"radiogroup","aria-required":o,"aria-orientation":d,"data-disabled":n?"":void 0,dir:g,...p,ref:t})})})});eI.displayName=ev;var eA="RadioGroupItem",eF=i.forwardRef((e,t)=>{let{__scopeRadioGroup:l,disabled:a,...s}=e,o=eC(eA,l),n=o.disabled||a,d=eN(l),c=ew(l),m=i.useRef(null),u=I(t,m),p=o.value===s.value,h=i.useRef(!1);return i.useEffect(()=>{let e=e=>{ex.includes(e.key)&&(h.current=!0)},t=()=>h.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),(0,r.jsx)(er,{asChild:!0,...d,focusable:!n,active:p,children:(0,r.jsx)(ep,{disabled:n,required:o.required,checked:p,...c,...s,name:o.name,ref:u,onCheck:()=>o.onValueChange(s.value),onKeyDown:w(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:w(s.onFocus,()=>{h.current&&m.current?.click()})})})});eF.displayName=eA;var eW=i.forwardRef((e,t)=>{let{__scopeRadioGroup:i,...l}=e,a=ew(i);return(0,r.jsx)(eg,{...a,...l,ref:t})});eW.displayName="RadioGroupIndicator";var eR=e.i(218748),ek=e.i(333642);function eE({className:e,...t}){return(0,r.jsx)(eI,{"data-slot":"radio-group",className:(0,ek.cn)("grid gap-3",e),...t})}function eT({className:e,...t}){return(0,r.jsx)(eF,{"data-slot":"radio-group-item",className:(0,ek.cn)("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:(0,r.jsx)(eW,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:(0,r.jsx)(eR.CircleIcon,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}var eL=e.i(101349),e_=e.i(258597),eP=e.i(373018),e$=e.i(874579),eD=e.i(654064),eB=e.i(731498);e.s(["default",0,function({extractedData:e}){let w,S=(0,l.useRouter)(),{toast:C}=(0,c.useToast)(),[I,A]=(0,i.useState)(!1),[F,W]=(0,i.useState)(!1),[R,k]=(0,i.useState)(!1),[E,T]=(0,i.useState)(!1),[L,_]=(0,i.useState)(!1),[P,$]=(0,i.useState)(null),[D,B]=(0,i.useState)(!1),[q,O]=(0,i.useState)(!1),[M,z]=(0,i.useState)("original"),[Y,V]=(0,i.useState)({employerName:"",employerEIN:"",employerAddress:"",employerCity:"",employerState:"",employerZip:"",employeeFirstName:"",employeeMiddleInitial:"",employeeLastName:"",employeeSSN:"",employeeAddress:"",employeeCity:"",employeeState:"",employeeZip:"",wages:"",federalWithholding:"",socialSecurityWages:"",socialSecurityWithholding:"",medicareWages:"",medicareWithholding:"",socialSecurityTips:"",allocatedTips:"",dependentCareBenefits:"",nonqualifiedPlans:"",box12Code:"",box12Amount:"",stateWages:"",stateWithholding:"",localWages:"",localWithholding:"",taxYear:new Date().getFullYear().toString()}),U=(0,i.useRef)(!1),X=new Date().getFullYear(),Z=Array.from({length:10},(e,t)=>X-t),[G,K]=(0,i.useState)(1),[J,H]=(0,i.useState)(!1),[Q,ee]=(0,i.useState)(0);(0,i.useEffect)(()=>{U.current&&Y.employerName&&Y.wages&&(console.log("[v0] Form state updated, running auto-validation with:",{employerName:Y.employerName,wages:Y.wages,employeeFirstName:Y.employeeFirstName}),U.current=!1,ei())},[Y]);let et=e=>{if(!e)return{street:"",city:"",state:"",zip:""};let t=e.replace(/\s+/g," ").trim(),r=t.match(/\b(\d{5}(?:-\d{4})?)\b/),i=r?r[1]:"",l=t.replace(/\b\d{5}(?:-\d{4})?\b/,"").trim(),a=l.match(/\b([A-Z]{2})\b/),s=a?a[1]:"",o=(l=l.replace(/\b[A-Z]{2}\b/,"").trim()).split(",").map(e=>e.trim()).filter(Boolean),n="",d="";return o.length>=3?(n=o.slice(0,-1).join(", "),d=o[o.length-1]):2===o.length?(n=o[0],d=o[1]):1===o.length&&(n=o[0]),console.log("[v0] Parsed address:",{input:e,output:{street:n,city:d=d.replace(/[,;]/g,"").trim(),state:s,zip:i}}),{street:n,city:d,state:s,zip:i}};(0,i.useEffect)(()=>{if(e){let t,r;console.log("[v0] Auto-filling form with extracted data:",e);let i=e.employer_name||e.employer?.name,l=e.employer_ein||e.employer?.ein,a=e.wages||e.income?.wages;i&&null!=a||(console.error("[v0] Critical data missing - need at least employer name and wages"),console.log("[v0] Has employer name:",i,"Has wages:",a),C({title:"âš ï¸ Partial Extraction",description:"Some required data is missing. Please complete the form manually.",variant:"destructive"}));let s=e.employee_name||{},o=s.first||s.firstName||"",n=s.last||s.lastName||"",d=s.middle||s.middleInitial||"",c="string"==typeof e.employee_name?e.employee_name:o&&n?`${o} ${n}`:e.employee?.name||"",m=(0,e_.parseName)(c),u=o,p=d,h=n;m&&!u&&(u=m.firstName,p=m.middleInitial,h=m.lastName),console.log("[v0] Final addresses to populate:",{employer:t="object"==typeof e.employer_address&&null!==e.employer_address?{street:e.employer_address.street||"",city:e.employer_address.city||"",state:e.employer_address.state||"",zip:e.employer_address.zipCode||e.employer_address.zip||""}:et(e.employer_address||e.employer?.address||""),employee:r="object"==typeof e.employee_address&&null!==e.employee_address?{street:e.employee_address.street||"",city:e.employee_address.city||"",state:e.employee_address.state||"",zip:e.employee_address.zipCode||e.employee_address.zip||""}:et(e.employee_address||e.employee?.address||"")}),V({...Y,employerName:i||"",employerEIN:l||"",employerAddress:t.street||"",employerCity:t.city||"",employerState:t.state||"",employerZip:t.zip||"",employeeFirstName:u||"",employeeMiddleInitial:p||"",employeeLastName:h||"",employeeSSN:e.employee_ssn||e.employee?.ssn||"",employeeAddress:r.street||"",employeeCity:r.city||"",employeeState:r.state||"",employeeZip:r.zip||"",wages:a?.toString()||"",federalWithholding:(e.federal_tax_withheld||e.federal_income_tax||e.federal_withholding||e.income?.federalWithholding)?.toString()||"",socialSecurityWages:(e.social_security_wages||e.income?.socialSecurityWages)?.toString()||"",socialSecurityWithholding:(e.social_security_tax_withheld||e.social_security_tax||e.social_security_withholding||e.income?.socialSecurityTax)?.toString()||"",medicareWages:(e.medicare_wages||e.income?.medicareWages)?.toString()||"",medicareWithholding:(e.medicare_tax_withheld||e.medicare_tax||e.medicare_withholding||e.income?.medicareTax)?.toString()||"",socialSecurityTips:e.social_security_tips?.toString()||"",allocatedTips:e.allocated_tips?.toString()||"",dependentCareBenefits:e.dependent_care_benefits?.toString()||"",nonqualifiedPlans:e.nonqualified_plans?.toString()||"",box12Code:e.box_12_code||e.box12Code||"",box12Amount:(e.box_12_amount||e.box12Amount)?.toString()||"",stateWages:(e.state_wages||e.income?.stateWages)?.toString()||"",stateWithholding:(e.state_tax_withheld||e.state_income_tax||e.state_withholding||e.income?.stateTax)?.toString()||"",localWages:e.local_wages?.toString()||"",localWithholding:e.local_income_tax?.toString()||"",taxYear:e.taxYear?.toString()||new Date().getFullYear().toString()}),U.current=!0,C({title:"âœ¨ Form Auto-Filled",description:"Your W-2 data has been automatically populated. Validating..."})}},[e]),(0,i.useEffect)(()=>{let t=localStorage.getItem("w2_draft");if(t&&!e)try{V(JSON.parse(t))}catch(e){console.error("Failed to load draft:",e)}},[]);let er=async e=>{let r=e.target.files?.[0];if(r){e.target.value="",k(!0),T(!0);try{let e=await r.arrayBuffer(),i=t.Buffer.from(e).toString("base64"),l=await fetch("/api/filing/extract-document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileData:i,fileName:r.name,mimeType:r.type})}),a=await l.json();if(a.success&&a.data){let e=a.data;e.employer?.name&&e.income?.wages||(console.error("[v0] Critical data missing - need at least employer and wages"),C({title:"âš ï¸ Partial Extraction",description:"Some required data is missing. Please complete the form manually.",variant:"destructive"}));let t=e.employee_name||{},r=t.first||t.firstName||"",i=t.last||t.lastName||"",l=t.middle||t.middleInitial||"",s="string"==typeof e.employee_name?e.employee_name:r&&i?`${r} ${i}`:e.employee?.name||"",o=(0,e_.parseName)(s),n=r,d=l,c=i;o&&!n&&(n=o.firstName,d=o.middleInitial,c=o.lastName);let m=e.employer?.address||"",u=e.employee?.address||"",p=et(m),h=et(u);console.log("[v0] Parsed addresses from upload:",{employer:p,employee:h}),V({...Y,employerName:e.employer?.name||"",employerEIN:e.employer?.ein||"",employerAddress:p.street,employerCity:p.city,employerState:p.state,employerZip:p.zip,employeeFirstName:n,employeeMiddleInitial:d,employeeLastName:c,employeeSSN:e.employee?.ssn||"",employeeAddress:h.street,employeeCity:h.city,employeeState:h.state,employeeZip:h.zip,wages:e.income?.wages?.toString()||"",federalWithholding:e.income?.federalWithholding?.toString()||"",socialSecurityWages:e.income?.socialSecurityWages?.toString()||"",socialSecurityWithholding:e.income?.socialSecurityTax?.toString()||"",medicareWages:e.income?.medicareWages?.toString()||"",medicareWithholding:e.income?.medicareTax?.toString()||"",stateWages:e.income?.stateWages?.toString()||"",stateWithholding:e.income?.stateTax?.toString()||"",taxYear:e.taxYear?.toString()||new Date().getFullYear().toString()}),U.current=!0,C({title:"âœ¨ AI Extraction Complete",description:"Your W-2 has been automatically filled. Validating..."})}else throw Error("Could not extract W-2 data from document")}catch(e){C({title:"Extraction Failed",description:e.message,variant:"destructive"})}finally{k(!1),T(!1)}}},ei=async()=>{_(!0),$(null);try{console.log("[v0] Running AI-powered validation...");let e=[];if(Y.employerName||e.push({field:"employerName",message:"Employer name is required"}),Y.employerEIN||e.push({field:"employerEIN",message:"Employer EIN is required"}),Y.employeeFirstName||e.push({field:"employeeFirstName",message:"Employee first name is required"}),Y.employeeLastName||e.push({field:"employeeLastName",message:"Employee last name is required"}),Y.employeeSSN||e.push({field:"employeeSSN",message:"Employee SSN is required"}),Y.wages||e.push({field:"wages",message:"Wages are required"}),e.length>0){$({valid:!1,errors:e,warnings:[],suggestions:[]}),C({title:"Validation Failed",description:`Please fill in ${e.length} required field(s)`,variant:"destructive"}),_(!1);return}let t=await fetch("/api/filing/validate-w2",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...Y,filingType:M})});if(!t.ok)throw Error("AI validation service unavailable");let r=await t.json();$(r);let i=r.errors?.length>0,l=r.warnings?.length>0,a=r.suggestions?.length>0;console.log("[v0] AI Validation result:",{valid:r.valid,errors:i?r.errors.length:0,warnings:l?r.warnings.length:0,suggestions:a?r.suggestions.length:0}),i||l||a?i?C({title:"Issues Found",description:`AI found ${r.errors.length} error(s) and ${r.warnings.length} warning(s)`,variant:"destructive"}):C({title:"Validation Complete",description:`${r.warnings.length} warning(s) and ${r.suggestions.length} suggestion(s) to review`}):C({title:"âœ“ Perfect!",description:"Your W-2 passed all AI validation checks. Ready to submit!"})}catch(e){console.error("[v0] AI Validation error:",e),C({title:"Validation Failed",description:e.message||"Could not complete AI validation",variant:"destructive"})}finally{_(!1)}},el=async e=>{if(e.preventDefault(),e.stopPropagation(),1===G){P||await ei(),K(2),window.scrollTo({top:0,behavior:"smooth"});return}if(console.log("[v0] ========================================"),console.log("[v0] SUBMIT BUTTON CLICKED - HANDLER EXECUTING"),console.log("[v0] ========================================"),I)return void console.log("[v0] Already submitting, ignoring duplicate click");if(eo){console.log("[v0] Paper filing required, generating PDF package..."),await ea();return}if(P?.errors?.length>0&&!q){if(!window.confirm(`Found ${P.errors.length} validation error(s). Do you want to submit anyway? The IRS may reject this filing.`))return;O(!0)}A(!0),H(!0),ee(1);try{console.log("[v0] Step 1/3: Authenticating with IRS e-filing system"),await new Promise(e=>setTimeout(e,1500)),ee(2),console.log("[v0] Step 2/3: Verifying business entity with IRS"),await new Promise(e=>setTimeout(e,1500)),ee(3),console.log("[v0] Step 3/3: Submitting W-2 form to IRS"),console.log("[v0] Starting API call to /api/filing/submit-w2");let e=await fetch("/api/filing/submit-w2",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...Y,filingType:M,overrideValidation:q||P?.errors?.length===0})}),t=e.headers.get("content-type");if(!t||!t.includes("application/json")){let t=await e.text();throw console.error("[v0] NON-JSON RESPONSE:",t.substring(0,200)),Error(`Server returned non-JSON response: ${e.status} ${e.statusText}`)}let r=await e.json();if(console.log("[v0] API response:",r),r.isDemoMode){C({title:"Demo Mode Restriction",description:r.error,variant:"destructive"}),A(!1),H(!1),ee(0);return}r.success?(console.log("[v0] âœ… W-2 SUBMITTED SUCCESSFULLY!"),ee(4),C({title:"W-2 Successfully Submitted to IRS",description:`Submission ID: ${r.submissionId}. The IRS will process your filing within 24-48 hours.`,duration:5e3}),localStorage.removeItem("w2_draft"),setTimeout(()=>{S.push(r.filingId?`/dashboard/filing/${r.filingId}`:"/dashboard/filing")},3e3)):(ee(0),H(!1),C({title:"IRS Submission Failed",description:r.error||"Could not submit to the IRS.",variant:"destructive"}))}catch(e){console.error("[v0] SUBMISSION ERROR:",e.message),ee(0),H(!1),C({title:"Submission Error",description:e.message||"An unexpected error occurred.",variant:"destructive"})}finally{A(!1),O(!1)}},ea=async()=>{A(!0);try{console.log("[v0] Generating paper filing package...");let e=await fetch("/api/filing/generate-paper-package",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formType:"W-2",filingType:M,formData:Y,taxYear:Y.taxYear})}),t=e.headers.get("content-type");if(!t||!t.includes("application/json")){let t=await e.text();throw console.error("[v0] Server returned non-JSON response:",t),Error(`Server error: ${e.status} ${e.statusText}`)}let r=await e.json();if(r.success){console.log("[v0] Paper package generated:",r.packageUrl);let e=document.createElement("a");e.href=r.packageUrl,e.download=`W2-Paper-Filing-Package-${Y.taxYear}.pdf`,document.body.appendChild(e),e.click(),document.body.removeChild(e),C({title:"Paper Filing Package Generated",description:"Your W-2 forms and instructions have been downloaded. Print and mail to the IRS."}),localStorage.removeItem("w2_draft")}else throw Error(r.error||"Failed to generate paper package")}catch(e){console.error("[v0] Paper package generation error:",e),C({title:"Generation Failed",description:e.message,variant:"destructive"})}finally{A(!1)}},es=(w=X-Number.parseInt(Y.taxYear),"original"===M?0===w:w<=2),eo=!es,en=[{title:"Employer Information",fields:[{label:"Business Name",value:Y.employerName},{label:"Employer EIN",value:Y.employerEIN,sensitive:!0},{label:"Address",value:`${Y.employerAddress}, ${Y.employerCity}, ${Y.employerState} ${Y.employerZip}`}]},{title:"Employee Information",fields:[{label:"Employee Name",value:`${Y.employeeFirstName} ${Y.employeeMiddleInitial?Y.employeeMiddleInitial+". ":""}${Y.employeeLastName}`},{label:"Social Security Number",value:Y.employeeSSN,sensitive:!0},{label:"Address",value:Y.employeeAddress&&Y.employeeCity?`${Y.employeeAddress}, ${Y.employeeCity}, ${Y.employeeState} ${Y.employeeZip}`:"Not provided"}]},{title:"Wage and Tax Information",fields:[{label:"Wages, tips, other compensation",value:`$${Number.parseFloat(Y.wages||"0").toFixed(2)}`},{label:"Federal income tax withheld",value:`$${Number.parseFloat(Y.federalWithholding||"0").toFixed(2)}`},{label:"Social security wages",value:`$${Number.parseFloat(Y.socialSecurityWages||"0").toFixed(2)}`},{label:"Social security tax withheld",value:`$${Number.parseFloat(Y.socialSecurityWithholding||"0").toFixed(2)}`},{label:"Medicare wages and tips",value:`$${Number.parseFloat(Y.medicareWages||"0").toFixed(2)}`},{label:"Medicare tax withheld",value:`$${Number.parseFloat(Y.medicareWithholding||"0").toFixed(2)}`}]}];return(0,r.jsxs)("form",{onSubmit:el,className:"space-y-6",noValidate:!0,children:[(0,r.jsx)(eP.ProgressStepper,{steps:[{id:"fill",label:"Fill Form",sublabel:"Enter Information"},{id:"review",label:"Review & Submit",sublabel:"Verify Details"}],currentStep:G}),2===G?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e$.FilingReviewSection,{sections:en,formType:"W-2"}),(0,r.jsxs)("div",{className:"flex gap-4 pt-6",children:[(0,r.jsxs)(s.Button,{type:"button",variant:"outline",onClick:()=>K(1),className:"flex-1",disabled:I,children:[(0,r.jsx)(u.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Back to Edit"]}),(0,r.jsxs)(s.Button,{type:"submit",disabled:I,className:"flex-1 bg-gradient-to-r from-[#005ea2] to-[#162e51] hover:opacity-90 text-white text-lg py-6",children:[I&&(0,r.jsx)(m.Loader2,{className:"mr-2 h-5 w-5 animate-spin"}),(0,r.jsx)(p.Send,{className:"mr-2 h-5 w-5"}),"Submit to IRS"]})]})]}):(0,r.jsxs)(a.Card,{className:"relative overflow-hidden border-2 border-purple-500/20 bg-gradient-to-br from-background via-background to-purple-500/5",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/5 via-transparent to-orange-500/5 pointer-events-none"}),(0,r.jsxs)(a.CardHeader,{className:"relative",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4 mb-4",children:[(0,r.jsxs)(s.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{S.push("/dashboard/filing/new")},className:"hover:scale-105 transition-transform bg-transparent",children:[(0,r.jsx)(u.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:er,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",disabled:R||E}),(0,r.jsxs)(s.Button,{type:"button",size:"sm",disabled:R||E,className:"relative overflow-hidden bg-gradient-to-r from-purple-600 via-purple-500 to-pink-500 hover:from-purple-700 hover:via-purple-600 hover:to-pink-600 text-white font-semibold shadow-lg hover:shadow-xl hover:shadow-purple-500/50 transition-all duration-300 border-0 group",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-200%] group-hover:translate-x-[200%] transition-transform duration-1000"}),E?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Extracting..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Sparkles,{className:"h-4 w-4 mr-2 animate-pulse"}),"Upload W-2 (AI Extract)"]})]})]})]}),(0,r.jsx)(a.CardTitle,{className:"text-2xl bg-gradient-to-r from-purple-600 to-orange-600 bg-clip-text text-transparent",children:"Form W-2 - Wage and Tax Statement"}),(0,r.jsx)(a.CardDescription,{children:(0,r.jsxs)("div",{className:"space-y-4 mt-3",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(n.Label,{className:"text-sm font-medium",children:"Filing Type:"}),(0,r.jsxs)(eE,{value:M,onValueChange:e=>z(e),className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-3 p-3 rounded-lg border border-border/50 hover:border-purple-500/30 transition-colors",children:[(0,r.jsx)(eT,{value:"original",id:"original",className:"mt-1"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(n.Label,{htmlFor:"original",className:"font-medium cursor-pointer block mb-1",children:"Original W-2 (First-Time Filing)"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Use this if you're filing this W-2 for the first time, even if it's late. For example: filing a 2018 W-2 that was never submitted before."})]})]}),(0,r.jsxs)("div",{className:"flex items-start space-x-3 p-3 rounded-lg border border-border/50 hover:border-orange-500/30 transition-colors",children:[(0,r.jsx)(eT,{value:"corrected",id:"corrected",className:"mt-1"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(n.Label,{htmlFor:"corrected",className:"font-medium cursor-pointer block mb-1",children:"Corrected W-2c (Fixing Previous Filing)"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Use this only if you already filed this W-2 before and need to correct errors (wrong SSN, incorrect amounts, etc.). Requires showing original vs corrected values."})]})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-sm",children:"Report employee wages and tax withholdings for"}),(0,r.jsxs)(d.Select,{value:Y.taxYear,onValueChange:e=>V({...Y,taxYear:e}),children:[(0,r.jsx)(d.SelectTrigger,{className:"w-[120px] h-8 bg-background/80 border-purple-500/20",children:(0,r.jsx)(d.SelectValue,{placeholder:"Select year"})}),(0,r.jsx)(d.SelectContent,{children:Z.map(e=>(0,r.jsx)(d.SelectItem,{value:e.toString(),children:e},e))})]})]}),eo&&"original"===M&&(0,r.jsxs)(N.Alert,{className:"bg-orange-500/10 border-orange-500/20",children:[(0,r.jsx)(y.AlertCircle,{className:"h-4 w-4 text-orange-600"}),(0,r.jsx)(N.AlertTitle,{className:"text-orange-600 font-semibold",children:"Late Original W-2 Filing - Paper Filing Required"}),(0,r.jsxs)(N.AlertDescription,{className:"text-sm space-y-2 mt-2",children:[(0,r.jsxs)("p",{children:[(0,r.jsxs)("strong",{children:["Tax year ",Y.taxYear]})," is beyond the IRS e-filing deadline (January 31st of the following year)."]}),(0,r.jsx)("p",{children:"Since this is your first time filing this W-2, you'll need to:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[(0,r.jsx)("li",{children:"Complete the original Form W-2 (not W-2c)"}),(0,r.jsx)("li",{children:"Submit via paper mail to the IRS"}),(0,r.jsx)("li",{children:"Include a cover letter explaining the late filing"}),(0,r.jsx)("li",{children:"Be prepared for potential late filing penalties"})]}),(0,r.jsxs)("div",{className:"mt-3 p-3 bg-background/50 rounded border border-orange-500/20",children:[(0,r.jsx)("p",{className:"font-semibold text-orange-600 mb-1",children:"ðŸ“¦ Paper Filing Package - $29"}),(0,r.jsx)("p",{className:"text-xs",children:"We'll generate pre-filled W-2 forms, cover letter template, IRS mailing labels, and filing instructions. Premium service ($49) includes certified mail with tracking."})]})]})]}),eo&&"corrected"===M&&(0,r.jsxs)(N.Alert,{className:"bg-orange-500/10 border-orange-500/20",children:[(0,r.jsx)(y.AlertCircle,{className:"h-4 w-4 text-orange-600"}),(0,r.jsx)(N.AlertTitle,{className:"text-orange-600 font-semibold",children:"W-2c Correction - Paper Filing Required"}),(0,r.jsxs)(N.AlertDescription,{className:"text-sm space-y-2 mt-2",children:[(0,r.jsxs)("p",{children:[(0,r.jsxs)("strong",{children:["Tax year ",Y.taxYear]})," corrections must be paper filed (beyond e-filing window)."]}),(0,r.jsx)("p",{children:"Since you're correcting a previously filed W-2, you'll need to:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[(0,r.jsx)("li",{children:"Complete Form W-2c (Corrected Wage and Tax Statement)"}),(0,r.jsx)("li",{children:"Show both original amounts (what was filed) and corrected amounts"}),(0,r.jsx)("li",{children:"Submit via paper mail to the IRS"}),(0,r.jsx)("li",{children:"Include explanation of what's being corrected and why"})]}),(0,r.jsxs)("div",{className:"mt-3 p-3 bg-background/50 rounded border border-orange-500/20",children:[(0,r.jsx)("p",{className:"font-semibold text-orange-600 mb-1",children:"ðŸ“¦ W-2c Correction Package - $35"}),(0,r.jsx)("p",{className:"text-xs",children:"We'll generate pre-filled W-2c forms with before/after comparison, explanation letter, IRS mailing labels, and instructions. Premium service ($49) includes certified mail with tracking."})]})]})]}),es&&"corrected"===M&&(0,r.jsxs)(N.Alert,{className:"bg-blue-500/10 border-blue-500/20",children:[(0,r.jsx)(f.FileText,{className:"h-4 w-4 text-blue-600"}),(0,r.jsx)(N.AlertTitle,{className:"text-blue-600 font-semibold",children:"W-2c Correction - E-Filing Available"}),(0,r.jsxs)(N.AlertDescription,{className:"text-sm space-y-2 mt-2",children:[(0,r.jsxs)("p",{children:["You're filing a corrected W-2c for ",(0,r.jsx)("strong",{children:Y.taxYear}),". This correction is eligible for e-filing."]}),(0,r.jsx)("div",{className:"mt-2 p-2 bg-blue-500/5 rounded border border-blue-500/10",children:(0,r.jsxs)("p",{className:"text-xs",children:[(0,r.jsx)("strong",{children:"Note:"})," W-2c requires you to provide both the original amounts (what was previously filed) and the corrected amounts for all changed fields. We'll guide you through this process."]})})]})]}),es&&"original"===M&&(0,r.jsxs)(N.Alert,{className:"bg-green-500/10 border-green-500/20",children:[(0,r.jsx)(x.Info,{className:"h-4 w-4 text-green-600"}),(0,r.jsx)(N.AlertTitle,{className:"text-green-600 font-semibold",children:"E-Filing Available"}),(0,r.jsxs)(N.AlertDescription,{className:"text-sm",children:["Tax year ",Y.taxYear," is eligible for electronic filing. Complete the form below and we'll submit it directly to the IRS.",(0,r.jsx)("span",{className:"block mt-2 text-purple-600 font-medium",children:'ðŸ’¡ Tip: Use the "Upload W-2" tab to auto-fill this form with AI!'})]})]})]})})]}),(0,r.jsxs)(a.CardContent,{className:"space-y-8 relative",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[(0,r.jsx)("div",{className:"h-8 w-1 bg-gradient-to-b from-purple-600 to-orange-600 rounded-full"}),"Employer Information"]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Label,{htmlFor:"employerName",children:"Employer Name *"}),(0,r.jsx)(o.Input,{id:"employerName",required:!0,value:Y.employerName,onChange:e=>V({...Y,employerName:e.target.value}),placeholder:"ABC Company Inc."})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)(n.Label,{htmlFor:"employerEIN",className:"flex items-center gap-2",children:["Employer EIN *",(0,r.jsx)(h.Lock,{className:"h-3 w-3 text-green-500"})]}),(0,r.jsx)(o.Input,{id:"employerEIN",required:!0,placeholder:"XX-XXXXXXX",value:Y.employerEIN,onChange:e=>{let t=(0,eB.formatEIN)(e.target.value);V({...Y,employerEIN:t})},maxLength:10}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground mt-1 flex items-center gap-1",children:[(0,r.jsx)(h.Lock,{className:"h-3 w-3"}),"Encrypted and secure"]})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)(n.Label,{htmlFor:"employerAddress",children:"Address *"}),(0,r.jsx)(o.Input,{id:"employerAddress",required:!0,value:Y.employerAddress,onChange:e=>V({...Y,employerAddress:e.target.value}),placeholder:"123 Business St"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Label,{htmlFor:"employerCity",children:"City *"}),(0,r.jsx)(o.Input,{id:"employerCity",required:!0,value:Y.employerCity,onChange:e=>V({...Y,employerCity:e.target.value}),placeholder:"San Francisco"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Label,{htmlFor:"employerState",children:"State *"}),(0,r.jsx)(o.Input,{id:"employerState",required:!0,maxLength:2,placeholder:"CA",value:Y.employerState,onChange:e=>V({...Y,employerState:e.target.value.toUpperCase()})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Label,{htmlFor:"employerZip",children:"ZIP Code *"}),(0,r.jsx)(o.Input,{id:"employerZip",required:!0,value:Y.employerZip,onChange:e=>V({...Y,employerZip:e.target.value}),placeholder:"94102"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[(0,r.jsx)("div",{className:"h-8 w-1 bg-gradient-to-b from-purple-600 to-orange-600 rounded-full"}),"Employee Information"]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Label,{htmlFor:"employeeFirstName",children:"First Name *"}),(0,r.jsx)(o.Input,{id:"employeeFirstName",required:!0,value:Y.employeeFirstName,onChange:e=>V({...Y,employeeFirstName:e.target.value}),placeholder:"John"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Label,{htmlFor:"employeeMiddleInitial",children:"Middle Initial"}),(0,r.jsx)(o.Input,{id:"employeeMiddleInitial",maxLength:1,value:Y.employeeMiddleInitial,onChange:e=>V({...Y,employeeMiddleInitial:e.target.value.toUpperCase()}),placeholder:"A",className:"uppercase"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)(n.Label,{htmlFor:"employeeLastName",children:"Last Name *"}),(0,r.jsx)(o.Input,{id:"employeeLastName",required:!0,value:Y.employeeLastName,onChange:e=>{let t=e.target.value,r=(0,e_.parseLastNameWithMiddleInitial)(t);r&&r.middleInitial&&!Y.employeeMiddleInitial?V({...Y,employeeLastName:r.lastName,employeeMiddleInitial:r.middleInitial}):V({...Y,employeeLastName:t})},placeholder:"Doe"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsxs)(n.Label,{htmlFor:"employeeSSN",className:"flex items-center gap-2",children:["Social Security Number *",(0,r.jsx)(h.Lock,{className:"h-3 w-3 text-green-500"})]}),(0,r.jsx)(o.Input,{id:"employeeSSN",required:!0,placeholder:"XXX-XX-XXXX",value:Y.employeeSSN,onChange:e=>{let t=(0,eB.formatSSN)(e.target.value);V({...Y,employeeSSN:t})}}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground mt-1 flex items-center gap-1",children:[(0,r.jsx)(h.Lock,{className:"h-3 w-3"}),"AES-256 encrypted at rest"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Label,{htmlFor:"employeeAddress",children:"Address"}),(0,r.jsx)(o.Input,{id:"employeeAddress",value:Y.employeeAddress,onChange:e=>V({...Y,employeeAddress:e.target.value}),placeholder:"456 Employee Ave"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Label,{htmlFor:"employeeCity",children:"City"}),(0,r.jsx)(o.Input,{id:"employeeCity",value:Y.employeeCity,onChange:e=>V({...Y,employeeCity:e.target.value}),placeholder:"San Francisco"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Label,{htmlFor:"employeeState",children:"State"}),(0,r.jsx)(o.Input,{id:"employeeState",maxLength:2,placeholder:"CA",value:Y.employeeState,onChange:e=>V({...Y,employeeState:e.target.value.toUpperCase()})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Label,{htmlFor:"employeeZip",children:"ZIP Code"}),(0,r.jsx)(o.Input,{id:"employeeZip",value:Y.employeeZip,onChange:e=>V({...Y,employeeZip:e.target.value}),placeholder:"94102"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[(0,r.jsx)("div",{className:"h-8 w-1 bg-gradient-to-b from-purple-600 to-orange-600 rounded-full"}),"Wage and Tax Information"]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Label,{htmlFor:"wages",children:"Box 1: Wages, tips, other compensation *"}),(0,r.jsx)(o.Input,{id:"wages",type:"number",step:"0.01",required:!0,value:Y.wages,onChange:e=>V({...Y,wages:e.target.value}),placeholder:"75000.00"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Label,{htmlFor:"federalWithholding",children:"Box 2: Federal income tax withheld *"}),(0,r.jsx)(o.Input,{id:"federalWithholding",type:"number",step:"0.01",required:!0,value:Y.federalWithholding,onChange:e=>V({...Y,federalWithholding:e.target.value}),placeholder:"12500.00"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Label,{htmlFor:"socialSecurityWages",children:"Box 3: Social security wages *"}),(0,r.jsx)(o.Input,{id:"socialSecurityWages",type:"number",step:"0.01",required:!0,value:Y.socialSecurityWages,onChange:e=>V({...Y,socialSecurityWages:e.target.value}),placeholder:"75000.00"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Label,{htmlFor:"socialSecurityWithholding",children:"Box 4: Social security tax withheld *"}),(0,r.jsx)(o.Input,{id:"socialSecurityWithholding",type:"number",step:"0.01",required:!0,value:Y.socialSecurityWithholding,onChange:e=>V({...Y,socialSecurityWithholding:e.target.value}),placeholder:"4650.00"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Label,{htmlFor:"medicareWages",children:"Box 5: Medicare wages and tips *"}),(0,r.jsx)(o.Input,{id:"medicareWages",type:"number",step:"0.01",required:!0,value:Y.medicareWages,onChange:e=>V({...Y,medicareWages:e.target.value}),placeholder:"75000.00"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Label,{htmlFor:"medicareWithholding",children:"Box 6: Medicare tax withheld *"}),(0,r.jsx)(o.Input,{id:"medicareWithholding",type:"number",step:"0.01",required:!0,value:Y.medicareWithholding,onChange:e=>V({...Y,medicareWithholding:e.target.value}),placeholder:"1087.50"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Label,{htmlFor:"socialSecurityTips",children:"Box 7: Social security tips"}),(0,r.jsx)(o.Input,{id:"socialSecurityTips",type:"number",step:"0.01",value:Y.socialSecurityTips,onChange:e=>V({...Y,socialSecurityTips:e.target.value}),placeholder:"0.00"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Label,{htmlFor:"allocatedTips",children:"Box 8: Allocated tips"}),(0,r.jsx)(o.Input,{id:"allocatedTips",type:"number",step:"0.01",value:Y.allocatedTips,onChange:e=>V({...Y,allocatedTips:e.target.value}),placeholder:"0.00"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Label,{htmlFor:"dependentCareBenefits",children:"Box 11: Dependent care benefits"}),(0,r.jsx)(o.Input,{id:"dependentCareBenefits",type:"number",step:"0.01",value:Y.dependentCareBenefits,onChange:e=>V({...Y,dependentCareBenefits:e.target.value}),placeholder:"0.00"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Label,{htmlFor:"nonqualifiedPlans",children:"Box 12: Nonqualified plans"}),(0,r.jsx)(o.Input,{id:"nonqualifiedPlans",type:"number",step:"0.01",value:Y.nonqualifiedPlans,onChange:e=>V({...Y,nonqualifiedPlans:e.target.value}),placeholder:"0.00"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Label,{htmlFor:"box12Code",children:"Box 12 Code"}),(0,r.jsx)(o.Input,{id:"box12Code",value:Y.box12Code,onChange:e=>V({...Y,box12Code:e.target.value}),placeholder:"Code"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Label,{htmlFor:"box12Amount",children:"Box 12 Amount"}),(0,r.jsx)(o.Input,{id:"box12Amount",type:"number",step:"0.01",value:Y.box12Amount,onChange:e=>V({...Y,box12Amount:e.target.value}),placeholder:"0.00"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[(0,r.jsx)("div",{className:"h-8 w-1 bg-gradient-to-b from-purple-600 to-orange-600 rounded-full"}),"State and Local Information"]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Label,{htmlFor:"stateWages",children:"State wages, tips, etc."}),(0,r.jsx)(o.Input,{id:"stateWages",type:"number",step:"0.01",value:Y.stateWages,onChange:e=>V({...Y,stateWages:e.target.value}),placeholder:"75000.00"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Label,{htmlFor:"stateWithholding",children:"State income tax"}),(0,r.jsx)(o.Input,{id:"stateWithholding",type:"number",step:"0.01",value:Y.stateWithholding,onChange:e=>V({...Y,stateWithholding:e.target.value}),placeholder:"3750.00"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Label,{htmlFor:"localWages",children:"Local wages, tips, etc."}),(0,r.jsx)(o.Input,{id:"localWages",type:"number",step:"0.01",value:Y.localWages,onChange:e=>V({...Y,localWages:e.target.value}),placeholder:"0.00"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(n.Label,{htmlFor:"localWithholding",children:"Local income tax"}),(0,r.jsx)(o.Input,{id:"localWithholding",type:"number",step:"0.01",value:Y.localWithholding,onChange:e=>V({...Y,localWithholding:e.target.value}),placeholder:"0.00"})]})]})]}),P&&(0,r.jsxs)("div",{className:"space-y-3",children:[P.warnings?.filter(e=>"system"===e.field).map((e,t)=>(0,r.jsxs)(N.Alert,{className:"bg-blue-500/10 border-blue-500/20",children:[(0,r.jsx)(x.Info,{className:"h-4 w-4 text-blue-600"}),(0,r.jsx)(N.AlertTitle,{className:"text-blue-600 font-semibold",children:"Validation Status"}),(0,r.jsxs)(N.AlertDescription,{className:"text-sm",children:[e.message,e.message.includes("temporarily unavailable")&&(0,r.jsx)("span",{className:"block mt-2 text-xs text-muted-foreground",children:"Don't worry - your form has been checked with comprehensive rule-based validation. You can safely proceed with submission."})]})]},`system-warning-${t}`)),P.errors?.map((e,t)=>(0,r.jsxs)(N.Alert,{className:"bg-red-500/10 border-red-500/20",children:[(0,r.jsx)(y.AlertCircle,{className:"h-4 w-4 text-red-600"}),(0,r.jsxs)(N.AlertTitle,{className:"text-red-600 font-semibold",children:["Error: ",e.field]}),(0,r.jsx)(N.AlertDescription,{className:"text-sm",children:e.message})]},`error-${t}`)),P.warnings?.filter(e=>"system"!==e.field).map((e,t)=>(0,r.jsxs)(N.Alert,{className:"bg-orange-500/10 border-orange-500/20",children:[(0,r.jsx)(b.AlertTriangle,{className:"h-4 w-4 text-orange-600"}),(0,r.jsxs)(N.AlertTitle,{className:"text-orange-600 font-semibold",children:["Warning: ",e.field]}),(0,r.jsx)(N.AlertDescription,{className:"text-sm",children:e.message})]},`warning-${t}`)),P.suggestions?.map((e,t)=>(0,r.jsxs)(N.Alert,{className:"bg-blue-500/10 border-blue-500/20",children:[(0,r.jsx)(x.Info,{className:"h-4 w-4 text-blue-600"}),(0,r.jsxs)(N.AlertTitle,{className:"text-blue-600 font-semibold",children:["Suggestion: ",e.field]}),(0,r.jsx)(N.AlertDescription,{className:"text-sm",children:e.message})]},`suggestion-${t}`)),P.valid&&!P.errors?.length&&!P.warnings?.filter(e=>"system"!==e.field).length&&(0,r.jsxs)(N.Alert,{className:"bg-green-500/10 border-green-500/20",children:[(0,r.jsx)(v.CheckCircle2,{className:"h-4 w-4 text-green-600"}),(0,r.jsx)(N.AlertTitle,{className:"text-green-600 font-semibold",children:"All Clear!"}),(0,r.jsx)(N.AlertDescription,{className:"text-sm",children:"Your form passed all validation checks. Ready to submit!"})]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-4 pt-6 border-t border-border",children:[(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)(s.Button,{type:"button",variant:"outline",onClick:ei,disabled:L||I,className:"flex-1 bg-transparent border-blue-500/20",children:L?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Validating..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Sparkles,{className:"mr-2 h-4 w-4"}),"AI Validate Form"]})}),eo&&(0,r.jsxs)(s.Button,{type:"button",variant:"outline",onClick:()=>B(!0),className:"flex-1 bg-transparent border-orange-500/20",children:[(0,r.jsx)(f.FileText,{className:"mr-2 h-4 w-4"}),"Generate Penalty Letter ($19)"]})]}),(0,r.jsxs)(s.Button,{type:"submit",disabled:I||F||L,className:"w-full bg-gradient-to-r from-purple-600 to-orange-600 hover:from-purple-700 hover:to-orange-700 shadow-lg text-lg py-6",children:["Continue to Review",(0,r.jsx)(j.ArrowRight,{className:"ml-2 h-5 w-5"})]})]})]})]}),(0,r.jsx)(eD.FilingProgressDialog,{open:J,currentStep:Q,steps:[{id:"auth",title:"Authenticating",description:"Securely connecting to IRS e-filing system",icon:"ðŸ”"},{id:"business",title:"Verifying business entity",description:"Setting up your employer profile with the IRS",icon:"ðŸ¢"},{id:"submit",title:"Submitting W-2 form",description:"Transmitting your tax data securely to the IRS",icon:"ðŸ“„"}],isComplete:4===Q,isError:!1,onClose:()=>{H(!1),ee(0),4===Q&&S.push("/dashboard/filing")}}),(0,r.jsx)(eL.PenaltyAbatementDialog,{open:D,onOpenChange:B,businessName:Y.employerName,ein:Y.employerEIN,taxYear:Number.parseInt(Y.taxYear),formType:"W-2"})]})}],900042)}]);