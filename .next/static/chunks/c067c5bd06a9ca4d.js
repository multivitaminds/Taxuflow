(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,994179,e=>{"use strict";var a=e.i(878957),t=e.i(589944),r=e.i(294237),i=e.i(647163);let s=(0,r.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});e.s(["Badge",0,function({className:e,variant:r,asChild:n=!1,...l}){let o=n?t.Slot:"span";return(0,a.jsx)(o,{"data-slot":"badge",className:(0,i.cn)(s({variant:r}),e),...l})}])},469568,e=>{"use strict";let a=(0,e.i(197140).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["default",0,a])},189691,e=>{"use strict";var a=e.i(469568);e.s(["Plus",()=>a.default])},593446,e=>{"use strict";var a=e.i(821596);e.i(309235);var t=e.i(589944),r=e.i(878957),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,i)=>{let s=(0,t.createSlot)(`Primitive.${i}`),n=a.forwardRef((e,a)=>{let{asChild:t,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(t?s:i,{...n,ref:a})});return n.displayName=`Primitive.${i}`,{...e,[i]:n}},{});e.s(["Primitive",0,i])},10708,e=>{"use strict";var a=e.i(878957),t=e.i(821596),r=e.i(593446),i=t.forwardRef((e,t)=>(0,a.jsx)(r.Primitive.label,{...e,ref:t,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));i.displayName="Label";var s=e.i(647163);e.s(["Label",0,function({className:e,...t}){return(0,a.jsx)(i,{"data-slot":"label",className:(0,s.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}],10708)},870068,e=>{"use strict";let a=(0,e.i(197140).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);e.s(["Users",0,a],870068)},826717,e=>{"use strict";let a=(0,e.i(197140).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);e.s(["Mail",0,a],826717)},692626,e=>{"use strict";let a=(0,e.i(197140).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",0,a],692626)},827875,e=>{"use strict";var a=e.i(878957),t=e.i(821596);let r=(0,t.createContext)({user:null,profile:null,loading:!1,refreshProfile:async()=>{},features:{banking:!1,wallet:!1,accounting:!1,tax_filing:!1,api_access:!1,developer_portal:!1,employee_management:!1},userType:"regular",canAccess:()=>!1});e.s(["DashboardProvider",0,function({children:e,initialUser:i,initialProfile:s}){let[n]=(0,t.useState)(i),[l,o]=(0,t.useState)(s),[c]=(0,t.useState)(!1),d=l?.user_type||"regular",u=l?.subscription_tier||"free",m=function(e,a="free"){let t={banking:!1,wallet:!1,accounting:!1,tax_filing:!0,api_access:!1,developer_portal:!1,employee_management:!1};return"regular"===e?"pro-monthly"===a||"pro-yearly"===a?{...t,banking:!0,wallet:!0}:t:"business"===e?{...t,banking:!0,wallet:!0,accounting:!0,employee_management:a.includes("business")}:"developer"===e?{...t,banking:"free"!==a,wallet:"free"!==a,accounting:a.includes("business"),api_access:!0,developer_portal:!0}:t}(d,u),g=async()=>{console.log("[v0] Profile refresh requested - using initial server data")};return(0,t.useEffect)(()=>{console.log("[v0] DashboardProvider mounted",{hasUser:!!n,userType:d,subscriptionTier:u})},[n,d,u]),(0,a.jsx)(r.Provider,{value:{user:n,profile:l,loading:c,refreshProfile:g,features:m,userType:d,canAccess:e=>m[e]},children:e})},"useDashboard",0,function(){return(0,t.useContext)(r)}],827875)},477552,e=>{"use strict";let a=(0,e.i(197140).default)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);e.s(["UserPlus",0,a],477552)},123929,e=>{"use strict";let a=(0,e.i(197140).default)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);e.s(["MoreVertical",0,a],123929)},635707,e=>{"use strict";let a=(0,e.i(197140).default)("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);e.s(["Crown",0,a],635707)},871145,e=>{"use strict";var a=e.i(878957),t=e.i(821596),r=e.i(970065),i=e.i(167881),s=e.i(23750),n=e.i(10708),l=e.i(476725),o=e.i(189691),c=e.i(870068),d=e.i(327501),u=e.i(826717),m=e.i(123929),g=e.i(635707),h=e.i(477552),x=e.i(131841),p=e.i(692626),v=e.i(920755),b=e.i(827875),f=e.i(463415),y=e.i(994179);e.s(["OrganizationManagement",0,function(){let{user:e}=(0,b.useDashboard)(),j=(0,v.createClient)(),[w,N]=(0,t.useState)([]),[k,C]=(0,t.useState)(!0),[z,M]=(0,t.useState)(!1),[_,P]=(0,t.useState)(!1),[S,B]=(0,t.useState)(""),[D,L]=(0,t.useState)("");(0,t.useEffect)(()=>{O()},[]);let O=async()=>{try{let{data:a,error:t}=await j.from("org_members").select(`
          org_id,
          role,
          organizations (
            id,
            name,
            description,
            created_at,
            org_members (count)
          )
        `).eq("user_id",e?.id);if(t)throw t;let r=a?.map(e=>({id:e.organizations.id,name:e.organizations.name,description:e.organizations.description,role:e.role,memberCount:e.organizations.org_members?.[0]?.count||0,createdAt:e.organizations.created_at}));N(r||[])}catch(e){console.error("[v0] Error fetching organizations:",e)}finally{C(!1)}},U=async()=>{if(S.trim()){M(!0);try{let{data:a,error:t}=await j.from("organizations").insert({name:S,description:D,created_by:e?.id}).select().single();if(t)throw t;let{error:r}=await j.from("org_members").insert({org_id:a.id,user_id:e?.id,role:"owner"});if(r)throw r;await O(),P(!1),B(""),L("")}catch(e){console.error("[v0] Error creating organization:",e)}finally{M(!1)}}};return k?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)(p.Loader2,{className:"w-8 h-8 animate-spin text-indigo-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Organizations"}),(0,a.jsx)("p",{className:"text-slate-600 mt-1",children:"Manage your organizations and team memberships"})]}),(0,a.jsxs)(i.Button,{onClick:()=>P(!0),className:"bg-indigo-600 hover:bg-indigo-700",children:[(0,a.jsx)(o.Plus,{className:"w-4 h-4 mr-2"}),"Create Organization"]})]}),_&&(0,a.jsxs)(r.Card,{className:"p-6 bg-gradient-to-br from-indigo-50 to-white border-indigo-100",children:[(0,a.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Create New Organization"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(n.Label,{htmlFor:"orgName",children:"Organization Name"}),(0,a.jsx)(s.Input,{id:"orgName",value:S,onChange:e=>B(e.target.value),placeholder:"Acme Corp",className:"mt-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(n.Label,{htmlFor:"orgDescription",children:"Description (Optional)"}),(0,a.jsx)(s.Input,{id:"orgDescription",value:D,onChange:e=>L(e.target.value),placeholder:"Software company building the future",className:"mt-2"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(i.Button,{onClick:U,disabled:z||!S.trim(),className:"bg-indigo-600 hover:bg-indigo-700",children:z?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Building2,{className:"w-4 h-4 mr-2"}),"Create Organization"]})}),(0,a.jsx)(i.Button,{onClick:()=>P(!1),variant:"outline",children:"Cancel"})]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map(e=>(0,a.jsxs)(r.Card,{className:"p-6 hover:shadow-lg transition-shadow border-slate-200 bg-white relative group",children:[(0,a.jsx)("div",{className:"absolute top-4 right-4",children:(0,a.jsxs)(f.DropdownMenu,{children:[(0,a.jsx)(f.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(i.Button,{variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)(m.MoreVertical,{className:"w-4 h-4"})})}),(0,a.jsxs)(f.DropdownMenuContent,{align:"end",children:[(0,a.jsxs)(f.DropdownMenuItem,{children:[(0,a.jsx)(x.Settings,{className:"w-4 h-4 mr-2"}),"Settings"]}),(0,a.jsxs)(f.DropdownMenuItem,{children:[(0,a.jsx)(h.UserPlus,{className:"w-4 h-4 mr-2"}),"Invite Members"]})]})]})}),(0,a.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(l.Building2,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-900 truncate",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-slate-600 line-clamp-2 mt-1",children:e.description||"No description"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsxs)(y.Badge,{variant:"outline",className:"capitalize",children:["owner"===e.role&&(0,a.jsx)(g.Crown,{className:"w-3 h-3 mr-1 text-amber-500"}),e.role]}),(0,a.jsxs)(y.Badge,{variant:"outline",children:[(0,a.jsx)(c.Users,{className:"w-3 h-3 mr-1"}),e.memberCount," ",1===e.memberCount?"member":"members"]})]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-4 pt-4 border-t border-slate-100",children:[(0,a.jsxs)(i.Button,{variant:"outline",size:"sm",className:"flex-1 bg-transparent",children:[(0,a.jsx)(d.Shield,{className:"w-3 h-3 mr-2"}),"Roles"]}),(0,a.jsxs)(i.Button,{variant:"outline",size:"sm",className:"flex-1 bg-transparent",children:[(0,a.jsx)(u.Mail,{className:"w-3 h-3 mr-2"}),"Invite"]})]})]},e.id))}),0===w.length&&!_&&(0,a.jsxs)(r.Card,{className:"p-12 text-center border-dashed border-2",children:[(0,a.jsx)(l.Building2,{className:"w-16 h-16 mx-auto text-slate-300 mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"No Organizations Yet"}),(0,a.jsx)("p",{className:"text-slate-600 mb-6",children:"Create your first organization to collaborate with your team"}),(0,a.jsxs)(i.Button,{onClick:()=>P(!0),className:"bg-indigo-600 hover:bg-indigo-700",children:[(0,a.jsx)(o.Plus,{className:"w-4 h-4 mr-2"}),"Create Organization"]})]})]})}])}]);