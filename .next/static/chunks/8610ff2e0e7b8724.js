(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,874290,e=>{"use strict";let t=(0,e.i(197140).default)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);e.s(["LinkIcon",0,t],874290)},793188,e=>{"use strict";var t=e.i(878957),s=e.i(821596),a=e.i(167881),r=e.i(630374),n=e.i(10708),l=e.i(184762),i=e.i(62870),o=e.i(931454),c=e.i(692626),d=e.i(492313),m=e.i(893629),u=e.i(806746);function p({businessName:e,ein:p,taxYear:x,formType:h,open:g,onOpenChange:f}){let[b,j]=(0,s.useState)(!1),[y,v]=(0,s.useState)(""),[N,w]=(0,s.useState)(""),[C,S]=(0,s.useState)(!1),[k,T]=(0,s.useState)(""),D=[{value:"illness",label:"Serious illness or medical emergency"},{value:"death",label:"Death in family"},{value:"disaster",label:"Natural disaster or casualty"},{value:"records",label:"Loss of records due to circumstances beyond control"},{value:"advice",label:"Relied on incorrect advice from tax professional"},{value:"first-time",label:"First-time penalty and good compliance history"},{value:"system",label:"System or technical issues"},{value:"other",label:"Other reasonable cause"}],F=f||j,I=async()=>{if(!y)return void u.toast.error("Please select a reason for late filing");S(!0),console.log("[v0] Generating penalty letter with:",{businessName:e,ein:p,taxYear:x,formType:h,reason:y});try{let t=await fetch("/api/generate-abatement-letter",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({businessName:e,ein:p,taxYear:x,formType:h,reason:D.find(e=>e.value===y)?.label||y,additionalContext:N})});if(!t.ok){let e=await t.json().catch(()=>({error:"Unknown error"}));throw console.error("[v0] Letter generation failed:",e),Error(e.details||e.error||"Failed to generate letter")}let s=await t.json();console.log("[v0] Letter generated successfully"),T(s.letter),u.toast.success("Penalty abatement letter generated!",{description:"Review and download your letter below"})}catch(e){console.error("[v0] Letter generation error:",e),u.toast.error("Failed to generate letter",{description:e instanceof Error?e.message:"Please try again"})}finally{S(!1)}};return(0,t.jsxs)(r.Dialog,{open:void 0!==g?g:b,onOpenChange:F,children:[(0,t.jsx)(r.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(a.Button,{variant:"outline",className:"gap-2 bg-transparent",children:[(0,t.jsx)(m.Sparkles,{className:"h-4 w-4"}),"Generate Penalty Abatement Letter"]})}),(0,t.jsxs)(r.DialogContent,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,t.jsxs)(r.DialogHeader,{children:[(0,t.jsxs)(r.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(o.FileText,{className:"h-5 w-5"}),"AI Penalty Abatement Letter Generator"]}),(0,t.jsx)(r.DialogDescription,{children:"Generate a professional IRS penalty abatement request letter. This premium feature uses AI to create a persuasive letter based on your specific circumstances."})]}),k?(0,t.jsx)("div",{className:"space-y-4 py-4",children:(0,t.jsx)("div",{className:"rounded-lg border bg-muted p-4",children:(0,t.jsx)("pre",{className:"text-sm whitespace-pre-wrap font-mono",children:k})})}):(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"reason",children:"Reason for Late Filing *"}),(0,t.jsxs)(i.Select,{value:y,onValueChange:v,children:[(0,t.jsx)(i.SelectTrigger,{id:"reason",children:(0,t.jsx)(i.SelectValue,{placeholder:"Select a reason"})}),(0,t.jsx)(i.SelectContent,{children:D.map(e=>(0,t.jsx)(i.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"context",children:"Additional Context (Optional)"}),(0,t.jsx)(l.Textarea,{id:"context",placeholder:"Provide any additional details that support your reasonable cause argument...",value:N,onChange:e=>w(e.target.value),rows:4}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"The more specific details you provide, the more persuasive your letter will be."})]}),(0,t.jsxs)("div",{className:"rounded-lg border border-neon/20 bg-neon/5 p-4",children:[(0,t.jsx)("h4",{className:"font-semibold text-sm mb-2",children:"What you'll get:"}),(0,t.jsxs)("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[(0,t.jsx)("li",{children:"âœ“ Professional IRS-ready letter format"}),(0,t.jsx)("li",{children:"âœ“ References to IRC Section 6651 (reasonable cause)"}),(0,t.jsx)("li",{children:"âœ“ Persuasive arguments tailored to your situation"}),(0,t.jsx)("li",{children:"âœ“ Ready to print, sign, and mail"})]})]}),(0,t.jsx)("div",{className:"rounded-lg border border-orange-500/20 bg-orange-500/5 p-4",children:(0,t.jsxs)("p",{className:"text-sm text-orange-600 dark:text-orange-400",children:[(0,t.jsx)("strong",{children:"Premium Feature:"})," This service costs $19. The letter generation uses advanced AI and typically saves users hundreds or thousands in penalties."]})})]}),(0,t.jsx)(r.DialogFooter,{children:k?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Button,{variant:"outline",onClick:()=>T(""),children:"Generate Another"}),(0,t.jsxs)(a.Button,{onClick:()=>{let e=new Blob([k],{type:"text/plain"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download=`penalty-abatement-letter-${x}-${h}.txt`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t),u.toast.success("Letter downloaded successfully")},children:[(0,t.jsx)(d.Download,{className:"h-4 w-4 mr-2"}),"Download Letter"]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Button,{variant:"outline",onClick:()=>F(!1),children:"Cancel"}),(0,t.jsx)(a.Button,{onClick:I,disabled:C||!y,children:C?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.Sparkles,{className:"h-4 w-4 mr-2"}),"Generate Letter ($19)"]})})]})})]})]})}e.s(["PenaltyAbatementDialog",0,p,"default",0,p])},901309,973738,742210,e=>{"use strict";var t=e.i(878957),s=e.i(881660),a=e.i(647163);e.s(["ProgressStepper",0,function({steps:e,currentStep:r}){return(0,t.jsx)("div",{className:"w-full py-8",children:(0,t.jsx)("div",{className:"flex items-center justify-center",children:e.map((n,l)=>{let i=l+1,o=i<r,c=i===r,d=i>r;return(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("div",{className:(0,a.cn)("flex h-16 w-16 items-center justify-center rounded-full border-4 transition-all duration-300",o&&"border-[#005ea2] bg-[#005ea2]",c&&"border-[#162e51] bg-[#162e51]",d&&"border-gray-400 bg-white"),children:o?(0,t.jsx)(s.CheckCircle,{className:"h-8 w-8 text-white",strokeWidth:3}):(0,t.jsx)("span",{className:(0,a.cn)("text-2xl font-bold",c&&"text-white",d&&"text-gray-600"),children:i})}),(0,t.jsxs)("div",{className:"mt-3 flex flex-col items-center text-center",children:[(0,t.jsx)("p",{className:(0,a.cn)("font-semibold underline decoration-2 underline-offset-4",c&&"text-[#162e51] font-bold",o&&"text-[#005ea2]",d&&"text-gray-600 no-underline"),children:n.label}),n.sublabel&&(0,t.jsx)("p",{className:(0,a.cn)("text-sm mt-1",c||o?"text-gray-700":"text-gray-500"),children:n.sublabel})]})]}),l<e.length-1&&(0,t.jsx)("div",{className:(0,a.cn)("mx-4 h-1 w-24 transition-all duration-300",i<r?"bg-[#005ea2]":"bg-gray-300")})]},n.id)})})})}],901309);var r=e.i(970065),n=e.i(781947),l=e.i(490184);function i({label:e,value:s,sensitive:a}){let r=a?"â€¢".repeat(8):s;return(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 py-3 border-b border-gray-200 last:border-b-0",children:[(0,t.jsx)("dt",{className:"text-sm font-semibold text-gray-700",children:e}),(0,t.jsx)("dd",{className:"col-span-2 text-sm text-gray-900",children:r})]})}function o({title:e,fields:s}){return(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4 pb-2 border-b-2 border-[#005ea2]",children:e}),(0,t.jsx)("dl",{className:"space-y-0",children:s.map((e,s)=>(0,t.jsx)(i,{...e},s))})]})}e.s(["FilingReviewSection",0,function({sections:e,formType:s}){return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(n.Alert,{className:"bg-blue-50 border-blue-200 border-l-4",children:[(0,t.jsx)(l.Info,{className:"h-5 w-5 text-blue-800"}),(0,t.jsx)(n.AlertTitle,{className:"text-blue-900 font-bold text-lg",children:"Review your information before submitting."}),(0,t.jsxs)(n.AlertDescription,{className:"text-blue-800 mt-2 space-y-2",children:[(0,t.jsx)("p",{children:"Please review the information you are about to submit. If any of the information below is incorrect, you will need to go back and make corrections."}),(0,t.jsxs)("p",{className:"font-semibold",children:['Click the "Submit to IRS" button at the bottom of the page to send your ',s,". Once you submit, please wait while your application is being processed. It can take up to two minutes for your application to be processed."]})]})]}),(0,t.jsx)(r.Card,{className:"border-2 border-gray-300",children:(0,t.jsxs)(r.CardContent,{className:"p-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Review and Submit"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-8",children:"All fields marked with an asterisk (*) are required."}),(0,t.jsx)("div",{className:"space-y-6",children:e.map((e,s)=>(0,t.jsx)(o,{...e},s))})]})})]})}],973738);var c=e.i(630374),d=e.i(692626),m=e.i(829463),u=e.i(167881);e.s(["FilingProgressDialog",0,function({open:e,currentStep:r,steps:n,isComplete:l,isError:i,onClose:o}){return(0,t.jsx)(c.Dialog,{open:e,onOpenChange:e=>{!e&&o&&o()},children:(0,t.jsxs)(c.DialogContent,{className:"max-w-2xl",hideCloseButton:!l&&!i,children:[(l||i)&&o&&(0,t.jsxs)(u.Button,{variant:"ghost",size:"icon",className:"absolute right-4 top-4 rounded-full hover:bg-muted",onClick:o,children:[(0,t.jsx)(m.X,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]}),(0,t.jsxs)("div",{className:"py-8",children:[(0,t.jsx)("div",{className:"space-y-6",children:n.map((e,i)=>{let o=i+1,c=o===r,m=o<r||l,u=o>r;return(0,t.jsxs)("div",{className:(0,a.cn)("flex items-start gap-4 p-6 rounded-lg border-2 transition-all duration-300",c&&"bg-blue-50 border-blue-500 shadow-lg",m&&"bg-green-50 border-green-500",u&&"bg-gray-50 border-gray-300 opacity-50"),children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:m?(0,t.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-green-500",children:(0,t.jsx)(s.CheckCircle,{className:"h-7 w-7 text-white",strokeWidth:3})}):c?(0,t.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-blue-500",children:(0,t.jsx)(d.Loader2,{className:"h-7 w-7 text-white animate-spin",strokeWidth:3})}):(0,t.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-gray-300 text-2xl font-bold text-gray-600",children:e.icon})}),(0,t.jsxs)("div",{className:"flex-1 pt-1",children:[(0,t.jsxs)("h3",{className:(0,a.cn)("text-lg font-bold mb-1",c&&"text-blue-900",m&&"text-green-900",u&&"text-gray-600"),children:["Step ",o," of ",n.length,": ",e.title]}),(0,t.jsx)("p",{className:(0,a.cn)("text-sm",c&&"text-blue-800",m&&"text-green-800",u&&"text-gray-500"),children:e.description})]})]},e.id)})}),l&&!i&&(0,t.jsx)("div",{className:"mt-8 p-6 bg-green-50 border-2 border-green-500 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(s.CheckCircle,{className:"h-8 w-8 text-green-600",strokeWidth:3}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-green-900",children:"Submission Complete!"}),(0,t.jsx)("p",{className:"text-green-800 mt-1",children:"Your filing has been successfully submitted to the IRS."})]})]})}),i&&(0,t.jsxs)("div",{className:"mt-8 p-6 bg-red-50 border-2 border-red-500 rounded-lg",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-red-900",children:"Submission Failed"}),(0,t.jsx)("p",{className:"text-red-800 mt-1",children:"There was an error processing your submission. Please try again or contact support."})]})]})]})})}],742210)},386786,436248,921651,e=>{"use strict";e.s(["parseLastNameWithMiddleInitial",0,function(e){if(!e||"string"!=typeof e)return null;let t=e.trim();if(!t)return null;let s=t.split(/\s+/);if(1===s.length)return{middleInitial:"",lastName:s[0]};let a=s[0];return 1===a.length||2===a.length&&a.endsWith(".")?{middleInitial:a.replace(".","").toUpperCase(),lastName:s.slice(1).join(" ")}:{middleInitial:"",lastName:t}},"parseName",0,function(e){if(!e||"string"!=typeof e)return null;let t=e.trim();if(!t)return null;let s=t.split(/\s+/);if(1===s.length)return{firstName:s[0],middleInitial:"",lastName:""};if(2===s.length)return{firstName:s[0],middleInitial:"",lastName:s[1]};let a=s[0],r=s[s.length-1],n=s[1];return 1===n.length||2===n.length&&n.endsWith(".")?{firstName:a,middleInitial:n.replace(".","").toUpperCase(),lastName:r}:{firstName:a,middleInitial:n.charAt(0).toUpperCase(),lastName:r}}],386786);var t=e.i(271893),s=e.i(878957),a=e.i(821596),r=e.i(970065),n=e.i(167881),l=e.i(120682),i=e.i(338211),o=e.i(931454),c=e.i(692626),d=e.i(718633),m=e.i(829463),u=e.i(223711),p=e.i(958202);e.s(["DocumentUpload",0,function({userId:e,onExtractComplete:x,formType:h="all",expectedDocType:g,title:f="Upload Tax Documents",description:b="Upload W-2s, 1099s, receipts, and other tax documents for AI extraction"}){let[j,y]=(0,a.useState)([]),[v,N]=(0,a.useState)(!1),{toast:w}=(0,l.useToast)(),C=(0,p.useRouter)();console.log("[v0] DocumentUpload component mounted"),console.log("[v0] DocumentUpload props:",{userId:e,formType:h,expectedDocType:g});let S=(0,a.useCallback)(e=>{e.preventDefault(),N(!1),console.log("[v0] Files dropped via drag-and-drop");let t=Array.from(e.dataTransfer.files);console.log("[v0] Number of files dropped:",t.length),k(t)},[]),k=async s=>{if(console.log("[v0] handleFiles called with",s.length,"files"),console.log("[v0] Current userId:",e),console.log("[v0] File names:",s.map(e=>e.name)),!e){console.error("[v0] No userId provided, showing authentication error"),w({title:"Authentication Required",description:"Please wait for authentication to complete, then try uploading again.",variant:"destructive"});return}let a=[],r=[];for(let e of s){if(!["application/pdf","image/jpeg","image/jpg","image/png"].includes(e.type)&&!e.name.match(/\.(pdf|jpg|jpeg|png)$/i)){r.push(`${e.name} (invalid type)`);continue}if(e.size>0xa00000){r.push(`${e.name} (exceeds 10MB)`);continue}a.push(e)}if(r.length>0&&w({title:"Invalid Files",description:`The following files cannot be uploaded: ${r.join(", ")}`,variant:"destructive"}),0===a.length)return;let n=a.map(e=>({id:Date.now().toString()+Math.random(),name:e.name,size:e.size,type:e.type,status:"uploading"}));y(e=>[...e,...n]);for(let s=0;s<a.length;s++){let r=a[s],l=n[s].id;try{if(console.log("[v0] Starting AI extraction for:",r.name),console.log("[v0] File size:",r.size/1048576,"MB"),console.log("[v0] File type:",r.type),r.size/1048576>10)throw Error("File too large. Maximum size is 10MB. Please compress the document.");y(e=>e.map(e=>e.id===l?{...e,status:"processing"}:e)),console.log("[v0] Converting file to base64...");let s=await r.arrayBuffer(),a=t.Buffer.from(s).toString("base64");console.log("[v0] Base64 length:",a.length);let n=new AbortController,i=setTimeout(()=>n.abort(),45e3);try{console.log("[v0] Calling /api/filing/extract-document...");let t=await fetch("/api/filing/extract-document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileData:a,fileName:r.name,mimeType:r.type,userId:e}),signal:n.signal});clearTimeout(i),console.log("[v0] Extract API response status:",t.status);let s=await t.json();if(console.log("[v0] Extraction response success:",s.success),console.log("[v0] Extraction response data type:",s.data?.documentType),console.log("[v0] Full extraction response:",JSON.stringify(s).substring(0,300)),s.success&&s.data){if(console.log("[v0] Extraction successful, processing results..."),g&&s.data.documentType!==g){let e=(s.data.documentType||"unknown").toUpperCase(),t=g.toUpperCase();console.log("[v0] Form type mismatch:",{detected:e,expected:t}),w({title:"Different Form Type Detected",description:`Uploaded ${e} form to ${t} page. Please verify this is correct.`,variant:"default"})}y(e=>e.map(e=>e.id===l?{...e,status:"complete",extractedData:s.data}:e)),console.log("[v0] Calling onExtractComplete callback..."),console.log("[v0] Callback data:",JSON.stringify(s.data).substring(0,200)),"demo_mode"===s.warning?w({title:"Demo Mode Active",description:"AI service unavailable. Demo data provided - please verify all information.",variant:"default"}):"template_data_detected"===s.warning?w({title:"Demo Document Detected",description:`${r.name} appears to be a demo/template. Data extracted - please verify before submitting.`,variant:"default"}):w({title:"Document Processed",description:`Successfully extracted ${s.data.documentType?.toUpperCase()||"data"} from ${r.name}`}),x?(console.log("[v0] Executing onExtractComplete callback"),x(s.data,{warning:s.warning,message:s.message})):console.log("[v0] No onExtractComplete callback provided")}else throw console.error("[v0] Extraction failed:",s.error),Error(s.error||"Extraction failed")}catch(e){if(clearTimeout(i),console.error("[v0] Fetch error:",e),e instanceof Error&&"AbortError"===e.name)throw Error("Request timed out. The document may be too large or complex. Please try with a smaller/clearer document.");throw e}}catch(t){console.error("[v0] Processing error:",t);let e=t instanceof Error?t.message:"Failed to process document";y(t=>t.map(t=>t.id===l?{...t,status:"error",errorMessage:e}:t)),w({title:"Processing Failed",description:e,variant:"destructive"})}}},T=async()=>{console.log("[v0] handleSubmit called, files:",j.length);let t=j.filter(e=>"complete"===e.status);if(console.log("[v0] Completed files:",t.length),0===t.length)return void w({title:"No Documents Ready",description:"Please wait for documents to finish processing",variant:"destructive"});if("1099-nec"===g&&x){let e=t.map(e=>e.extractedData);w({title:"Documents Ready",description:`${t.length} contractor document${t.length>1?"s":""} extracted successfully`}),x({contractors:e},{isMultiple:!0});return}try{let s;console.log("[v0] Submitting to /api/filing/submit-extracted with userId:",e),console.log("[v0] Documents data:",JSON.stringify(t.map(e=>e.extractedData)).substring(0,500));let a=await fetch("/api/filing/submit-extracted",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,documents:t.map(e=>e.extractedData)})});console.log("[v0] Response status:",a.status);let r=a.headers.get("content-type");if(r&&r.includes("application/json"))s=await a.json(),console.log("[v0] Response data:",JSON.stringify(s).substring(0,300));else{let e=await a.text();throw console.error("[v0] Received non-JSON response:",e.substring(0,300)),Error("Server returned an invalid response. Please try again or contact support.")}if(s.success)w({title:"Filing Submitted",description:"Your tax documents have been filed successfully"}),C.push("/dashboard/filing");else throw Error(s.error||"Failed to submit filing")}catch(e){console.error("[v0] Submission error:",e),w({title:"Submission Failed",description:e instanceof Error?e.message:"Failed to submit tax filing",variant:"destructive"})}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(r.Card,{children:[(0,s.jsxs)(r.CardHeader,{children:[(0,s.jsx)(r.CardTitle,{children:f}),(0,s.jsx)(r.CardDescription,{children:b})]}),(0,s.jsx)(r.CardContent,{children:(0,s.jsxs)("div",{onDrop:S,onDragOver:e=>{e.preventDefault(),N(!0)},onDragLeave:()=>N(!1),className:`relative rounded-lg border-2 border-dashed p-12 text-center transition-colors ${v?"border-primary bg-primary/5":"border-muted-foreground/25"}`,children:[(0,s.jsx)("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png",onChange:e=>{if(console.log("[v0] File input changed"),e.target.files){let t=Array.from(e.target.files);console.log("[v0] Number of files selected:",t.length),k(t)}else console.log("[v0] No files selected")},className:"absolute inset-0 cursor-pointer opacity-0"}),(0,s.jsx)(i.Upload,{className:"mx-auto mb-4 h-12 w-12 text-muted-foreground"}),(0,s.jsx)("h3",{className:"mb-2 text-lg font-semibold",children:"Drop files here or click to upload"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Supports PDF, JPG, PNG (Max 10MB per file)"})]})})]}),j.length>0&&(0,s.jsxs)(r.Card,{children:[(0,s.jsx)(r.CardHeader,{children:(0,s.jsx)(r.CardTitle,{children:"Uploaded Documents"})}),(0,s.jsx)(r.CardContent,{className:"space-y-3",children:j.map(e=>{let t=(e=>{switch(e.status){case"uploading":return{icon:(0,s.jsx)(c.Loader2,{className:"h-5 w-5 animate-spin text-blue-600"}),text:"Uploading...",color:"text-blue-600"};case"processing":return{icon:(0,s.jsx)(c.Loader2,{className:"h-5 w-5 animate-spin text-yellow-600"}),text:"AI Extracting Data...",color:"text-yellow-600"};case"complete":return{icon:(0,s.jsx)(d.CheckCircle2,{className:"h-5 w-5 text-green-600"}),text:"âœ“ Extracted Successfully",color:"text-green-600"};case"error":return{icon:(0,s.jsx)(u.AlertCircle,{className:"h-5 w-5 text-red-600"}),text:e.errorMessage||"Processing Failed",color:"text-red-600"}}})(e);return(0,s.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,s.jsx)(o.FileText,{className:"h-8 w-8 text-muted-foreground flex-shrink-0"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"font-medium truncate",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(e.size/1024).toFixed(2)," KB"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 flex-shrink-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[t.icon,(0,s.jsx)("span",{className:`text-sm font-medium ${t.color}`,children:t.text})]}),(0,s.jsx)(n.Button,{variant:"ghost",size:"sm",onClick:()=>{var t;return t=e.id,void y(e=>e.filter(e=>e.id!==t))},children:(0,s.jsx)(m.X,{className:"h-4 w-4"})})]})]},e.id)})})]}),j.some(e=>"complete"===e.status)&&(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)(n.Button,{variant:"outline",onClick:()=>y([]),children:"Clear All"}),(0,s.jsx)(n.Button,{onClick:T,className:"bg-gradient-to-r from-purple-600 to-orange-600",children:"Submit Filing"})]})]})}],436248);var x=e.i(874290),h=e.i(487473),g=e.i(183533),f=e.i(850324);e.s(["QuickBooksSync",0,function({userId:e,onSyncComplete:t}){let[i,o]=(0,a.useState)(null),[m,b]=(0,a.useState)(!1),[j,y]=(0,a.useState)(!1),{toast:v}=(0,l.useToast)(),N=(0,p.useRouter)();(0,a.useEffect)(()=>{w()},[]);let w=async()=>{try{let t=await fetch(`/api/quickbooks/sync-status?userId=${e}`),s=await t.json();o(s)}catch(e){console.error("Failed to fetch sync status:",e)}},C=async()=>{b(!0);try{let s=await fetch("/api/quickbooks/sync",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})}),a=await s.json();a.success&&(v({title:"Sync Complete",description:`Synced ${a.transactionCount} transactions and categorized them for taxes`}),w(),t&&a.extractedData&&t(a.extractedData))}catch(e){v({title:"Sync Failed",description:"Failed to sync QuickBooks data",variant:"destructive"})}finally{b(!1)}},S=async()=>{y(!0);try{let t=await fetch("/api/filing/submit-quickbooks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})});(await t.json()).success&&(v({title:"Filing Submitted",description:"Your tax filing has been submitted successfully"}),N.push("/dashboard/filing"))}catch(e){v({title:"Submission Failed",description:"Failed to submit tax filing",variant:"destructive"})}finally{y(!1)}};return i?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(r.Card,{className:"border-purple-500/20 bg-gradient-to-br from-purple-500/5 to-orange-500/5 backdrop-blur-sm",children:[(0,s.jsxs)(r.CardHeader,{children:[(0,s.jsx)(r.CardTitle,{className:"bg-gradient-to-r from-purple-600 to-orange-600 bg-clip-text text-transparent",children:"QuickBooks Integration"}),(0,s.jsx)(r.CardDescription,{children:"Sync your QuickBooks data to automatically categorize transactions for taxes using AI"})]}),(0,s.jsx)(r.CardContent,{className:"space-y-6",children:i.connected?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-green-500/20 bg-gradient-to-r from-green-500/10 to-emerald-500/10 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"rounded-full bg-green-500/20 p-2",children:(0,s.jsx)(d.CheckCircle2,{className:"h-6 w-6 text-green-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold",children:"QuickBooks Connected"}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Last synced: ",i.lastSync?new Date(i.lastSync).toLocaleString():"Never"]})]})]}),(0,s.jsxs)(n.Button,{onClick:C,disabled:m,variant:"outline",className:"border-green-500/20 bg-transparent",children:[m?(0,s.jsx)(c.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(h.RefreshCw,{className:"mr-2 h-4 w-4"}),"Sync Now"]})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)(r.Card,{className:"border-blue-500/20 bg-gradient-to-br from-blue-500/10 to-cyan-500/10",children:[(0,s.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,s.jsx)(r.CardTitle,{className:"text-sm font-medium",children:"Total Transactions"}),(0,s.jsx)(g.TrendingUp,{className:"h-4 w-4 text-blue-600"})]}),(0,s.jsxs)(r.CardContent,{children:[(0,s.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:i.transactionCount}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Synced from QuickBooks"})]})]}),(0,s.jsxs)(r.Card,{className:"border-purple-500/20 bg-gradient-to-br from-purple-500/10 to-pink-500/10",children:[(0,s.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,s.jsx)(r.CardTitle,{className:"text-sm font-medium",children:"AI Categorized"}),(0,s.jsx)(f.TrendingDown,{className:"h-4 w-4 text-purple-600"})]}),(0,s.jsxs)(r.CardContent,{children:[(0,s.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:i.categorizedCount}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Ready for tax filing"})]})]})]}),i.categorizedCount>0&&(0,s.jsx)("div",{className:"rounded-lg border border-green-500/20 bg-gradient-to-r from-green-500/10 to-emerald-500/10 p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d.CheckCircle2,{className:"h-5 w-5 text-green-600"}),(0,s.jsx)("p",{className:"text-sm font-medium text-green-900 dark:text-green-100",children:"Ready to file! Your transactions have been categorized and are ready for tax filing."})]})})]}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-8",children:[(0,s.jsx)("div",{className:"mb-4 rounded-full bg-purple-500/10 p-4",children:(0,s.jsx)(u.AlertCircle,{className:"h-12 w-12 text-purple-600"})}),(0,s.jsx)("h3",{className:"mb-2 text-lg font-semibold",children:"QuickBooks Not Connected"}),(0,s.jsx)("p",{className:"mb-4 text-center text-sm text-muted-foreground",children:"Connect your QuickBooks account to automatically import and categorize transactions"}),(0,s.jsxs)(n.Button,{onClick:()=>{window.location.href=`/api/quickbooks/connect?userId=${e}`},className:"bg-gradient-to-r from-purple-600 to-orange-600 hover:from-purple-700 hover:to-orange-700",children:[(0,s.jsx)(x.LinkIcon,{className:"mr-2 h-4 w-4"}),"Connect QuickBooks"]})]})})]}),i.connected&&i.categorizedCount>0&&(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsxs)(n.Button,{onClick:S,disabled:j,className:"bg-gradient-to-r from-purple-600 to-orange-600 hover:from-purple-700 hover:to-orange-700",children:[j&&(0,s.jsx)(c.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Submit Tax Filing"]})})]}):(0,s.jsx)(r.Card,{className:"border-purple-500/20 bg-gradient-to-br from-purple-500/5 to-orange-500/5",children:(0,s.jsx)(r.CardContent,{className:"flex items-center justify-center py-12",children:(0,s.jsx)(c.Loader2,{className:"h-8 w-8 animate-spin text-purple-600"})})})}],921651)},144819,174117,e=>{"use strict";var t=e.i(878957),s=e.i(821596),a=e.i(970065),r=e.i(167881),n=e.i(994179),l=e.i(692626),i=e.i(874290),o=e.i(487473),c=e.i(718633),d=e.i(476725),m=e.i(120682);e.s(["PayrollIntegration",0,function(){let{toast:e}=(0,m.useToast)(),[u,p]=(0,s.useState)(!1),[x,h]=(0,s.useState)(!1),[g,f]=(0,s.useState)([]);(0,s.useEffect)(()=>{b()},[]);let b=async()=>{try{let e=await fetch("/api/payroll/connections"),t=await e.json();f(t.connections||[])}catch(e){console.error("[v0] Failed to load connections:",e)}},j=async t=>{p(!0);try{let s=await fetch("/api/plaid/create-link-token",{method:"POST"}),{linkToken:a}=await s.json(),r=await fetch("/api/plaid/exchange-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({publicToken:"simulated-public-token",providerName:t})});(await r.json()).success&&(e({title:"Payroll Connected",description:`Successfully connected to ${t}`}),b())}catch(t){e({title:"Connection Failed",description:t.message,variant:"destructive"})}finally{p(!1)}},y=async t=>{h(!0);try{let s=await fetch("/api/payroll/sync",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectionId:t})}),a=await s.json();a.success&&(e({title:"Sync Complete",description:`Created ${a.formsCreated} W-2 form(s)`}),b())}catch(t){e({title:"Sync Failed",description:t.message,variant:"destructive"})}finally{h(!1)}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(a.Card,{className:"border-purple-200 bg-purple-50/50",children:(0,t.jsx)(a.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,t.jsx)(d.Building2,{className:"h-5 w-5 text-purple-600"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-purple-900 mb-1",children:"Business Financial Management"}),(0,t.jsx)("p",{className:"text-sm text-purple-700",children:"Taxu uses Plaid's Business Financial Management platform to securely connect your payroll provider and automatically import employee W-2 data, tax withholdings, and retirement contributions. All connections are encrypted and comply with SOC 2 Type II standards."})]})]})})}),(0,t.jsxs)(a.Card,{children:[(0,t.jsxs)(a.CardHeader,{children:[(0,t.jsx)(a.CardTitle,{children:"Connect Payroll Provider"}),(0,t.jsx)(a.CardDescription,{children:"Automatically import employee W-2 data from your payroll system"})]}),(0,t.jsx)(a.CardContent,{children:(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[{id:"gusto",name:"Gusto",logo:"ðŸŸ¢"},{id:"adp",name:"ADP",logo:"ðŸ”µ"},{id:"paychex",name:"Paychex",logo:"ðŸŸ¡"},{id:"quickbooks_payroll",name:"QuickBooks Payroll",logo:"ðŸŸ¢"},{id:"square_payroll",name:"Square Payroll",logo:"â¬›"}].map(e=>{let s=g.find(t=>t.provider_name===e.id),d=s?.connection_status==="active";return(0,t.jsx)(a.Card,{className:"relative",children:(0,t.jsxs)(a.CardContent,{className:"pt-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"text-3xl",children:e.logo}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold",children:e.name}),d&&(0,t.jsxs)(n.Badge,{variant:"outline",className:"mt-1",children:[(0,t.jsx)(c.CheckCircle2,{className:"h-3 w-3 mr-1 text-green-500"}),"Connected"]})]})]})}),d?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Last synced: ",new Date(s.last_synced_at).toLocaleDateString()]}),(0,t.jsx)(r.Button,{size:"sm",variant:"outline",onClick:()=>y(s.id),disabled:x,className:"w-full",children:x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Syncing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.RefreshCw,{className:"h-4 w-4 mr-2"}),"Sync Now"]})})]}):(0,t.jsx)(r.Button,{size:"sm",onClick:()=>j(e.id),disabled:u,className:"w-full",children:u?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Connecting..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.LinkIcon,{className:"h-4 w-4 mr-2"}),"Connect"]})})]})},e.id)})})})]})]})}],144819);let u=0,p=new Map,x=e=>{if(p.has(e))return;let t=setTimeout(()=>{p.delete(e),f({type:"REMOVE_TOAST",toastId:e})},1e6);p.set(e,t)},h=[],g={toasts:[]};function f(e){g=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?x(s):e.toasts.forEach(e=>{x(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(g,e),h.forEach(e=>{e(g)})}e.s(["toast",0,function({...e}){let t=(u=(u+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>f({type:"DISMISS_TOAST",toastId:t});return f({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>f({type:"UPDATE_TOAST",toast:{...e,id:t}})}}],174117)}]);