(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,644167,e=>{"use strict";var t=e.i(437322),s=e.i(621914),i=e.i(864159),r=e.i(333642);let a=(0,i.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});e.s(["Badge",0,function({className:e,variant:i,asChild:n=!1,...c}){let l=n?s.Slot:"span";return(0,t.jsx)(l,{"data-slot":"badge",className:(0,r.cn)(a({variant:i}),e),...c})}])},904697,e=>{"use strict";let t=(0,e.i(40530).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",0,t],904697)},341497,e=>{"use strict";let t=(0,e.i(40530).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["default",0,t])},305682,e=>{"use strict";var t=e.i(341497);e.s(["ArrowRight",()=>t.default])},406780,e=>{"use strict";var t=e.i(226966);e.s(["Check",()=>t.default])},187189,e=>{"use strict";let t=(0,e.i(40530).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",0,t],187189)},230692,e=>{"use strict";var t=e.i(949161);let s=0,i=new Map,r=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},a=[],n={toasts:[]};function c(e){n=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?r(s):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(n,e),a.forEach(e=>{e(n)})}function l({...e}){let t=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),i=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||i()}}}),{id:t,dismiss:i,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}e.s(["toast",0,l,"useToast",0,function(){let[e,s]=t.useState(n);return t.useEffect(()=>(a.push(s),()=>{let e=a.indexOf(s);e>-1&&a.splice(e,1)}),[e]),{...e,toast:l,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}])},908695,e=>{"use strict";let t=(0,e.i(40530).default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["default",0,t])},103276,e=>{"use strict";var t=e.i(908695);e.s(["User",()=>t.default])},416082,e=>{"use strict";let t=(0,e.i(40530).default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",0,t],416082)},386611,e=>{"use strict";var t=e.i(437322),s=e.i(949161),i=e.i(363284),r=e.i(187189),a=e.i(416082),n=e.i(230692);e.s(["SubscriptionCheckoutButton",0,function({planId:e,children:c,className:l,variant:o="default",disabled:d=!1}){let[u,m]=(0,s.useState)(!1),{toast:p}=(0,n.useToast)(),h=async()=>{try{m(!0),console.log("[v0] Starting checkout for plan:",e);let t=await fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:e})}),s=await t.json();if(console.log("[v0] Checkout response:",s),!t.ok){let e=s.details||s.error||"Failed to create checkout session";console.error("[v0] Checkout failed:",e),p({title:"Checkout Failed",description:e,variant:"destructive"}),m(!1);return}if(s.url)console.log("[v0] Redirecting to checkout:",s.url),window.open(s.url,"_blank","noopener,noreferrer")?(p({title:"Checkout Opened",description:"Please complete your purchase in the new tab that just opened."}),m(!1)):(p({title:"Popup Blocked",description:"Please allow popups for this site and try again. Or copy the checkout link.",variant:"destructive"}),window.location.href=s.url);else throw Error("No checkout URL returned")}catch(e){console.error("[v0] Checkout error:",e),p({title:"Error",description:e instanceof Error?e.message:"Failed to start checkout",variant:"destructive"}),m(!1)}};return(0,t.jsx)(i.Button,{onClick:h,disabled:u||d,className:l,variant:o,children:u?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading..."]}):(0,t.jsxs)(t.Fragment,{children:[c,(0,t.jsx)(a.ExternalLink,{className:"ml-2 h-4 w-4"})]})})}])},475637,e=>{"use strict";var t=e.i(437322),s=e.i(949161),i=e.i(616861),r=e.i(363284),a=e.i(594950),n=e.i(644167),c=e.i(406780),l=e.i(305682),o=e.i(187189),d=e.i(904697),u=e.i(103276),m=e.i(518756),p=e.i(818626);let h=[{id:"basic-w2",name:"Basic / Simple (W-2 Only)",price:49,priceId:"price_basic_w2_49",interval:"one-time",category:"individual",description:"W-2 filing with AI error checking",comparePrice:89,savings:"Save $40 vs TurboTax Deluxe",features:["W-2 filing and import","AI-powered error checking","Federal e-file included","Standard deduction","Refund tracking","Email support","IRS accuracy guarantee"]},{id:"plus-families",name:"Plus (Families, Homeowners, Investors)",price:99,priceId:"price_plus_99",interval:"one-time",category:"individual",description:"For complex returns with deductions and investments",popular:!0,comparePrice:149,savings:"Save $50 vs TurboTax Premier",features:["Everything in Basic","Itemized deductions","Mortgage interest deduction","Multiple W-2s and 1099s","Investment income (stocks, crypto)","Dependent management","Child tax credits","State filing included","Priority email support","Audit risk assessment"]},{id:"self-employed",name:"Self-Employed / Gig Worker",price:179,priceId:"price_self_employed_179",interval:"one-time",category:"individual",description:"1099 filing with AI bookkeeping and write-offs",comparePrice:249,savings:"Save $70 vs TurboTax Self-Employed",features:["Everything in Plus","Schedule C filing","1099-NEC and 1099-K filing","AI-powered expense tracking","Business write-offs maximizer","Mileage tracking and logging","Home office deduction","Quarterly tax estimates","Self-employment tax optimization","AI bookkeeping assistant","Unlimited tax questions"]},{id:"cpa-assisted",name:"Full CPA Assisted (Live Help)",price:299,priceId:"price_cpa_assisted_299",interval:"one-time",category:"individual",description:"CPA review with audit protection and unlimited support",comparePrice:499,savings:"Save $200 vs TurboTax Live Full Service",features:["Everything in Self-Employed","Dedicated CPA review","Unlimited tax expert consultations","Phone and video support","Audit defense and representation","IRS correspondence handling","Year-round tax planning","Priority filing (24-hour turnaround)","Tax strategy consultation","Peace of mind guarantee"]},{id:"business-basic",name:"Business Basic (Single-Member LLC)",price:399,priceId:"price_business_basic_399",interval:"one-time",category:"business",description:"Schedule C and LLC filing with AI bookkeeping",comparePrice:650,savings:"Save $251 vs traditional CPA",features:["Schedule C filing","Single-member LLC support","1099 contractor management","AI bookkeeping guidance","Quarterly estimated taxes","Expense categorization","Profit & loss statements","State business filing","Business deduction maximizer"]},{id:"business-pro",name:"Business Pro (S-Corp, Partnership)",price:799,priceId:"price_business_pro_799",interval:"one-time",category:"business",description:"S-Corp, Partnership with payroll and AI cleanup",comparePrice:1500,savings:"Save $701 vs traditional CPA",features:["Everything in Business Basic","Form 1120S (S-Corp filing)","Form 1065 (Partnership filing)","K-1 generation for partners","Payroll tax filing (Form 941)","W-2 and 1099 bulk filing","AI bookkeeping cleanup","QuickBooks integration","Monthly financial close assistance","Multi-state nexus analysis","Dedicated business advisor"]},{id:"enterprise",name:"Enterprise (Multi-State, Complex)",price:1499,priceId:"price_enterprise_1499",interval:"one-time",category:"business",description:"Corporate filings with dedicated support",comparePrice:5e3,savings:"Save $3,501 vs traditional CPA firm",features:["Everything in Business Pro","Form 1120 (C-Corp filing)","Multi-state tax compliance","Sales tax nexus analysis","International tax considerations","R&D tax credit analysis","Corporate structure optimization","Monthly bookkeeping service","Dedicated CFO-level advisor","24/7 priority support","Custom integrations","White-glove onboarding"]}];function x(e){return h.find(t=>t.id===e)}var g=e.i(285937),f=e.i(386611),v=e.i(511531);function b({profile:e}){let i=(0,g.useRouter)(),b=(0,g.useSearchParams)(),[j,y]=(0,s.useState)(null),[k,w]=(0,s.useState)(null),[C,N]=(0,s.useState)(!1),[S,P]=(0,s.useState)(!0),T="true"===b.get("success"),A="true"===b.get("canceled"),I="true"===b.get("demo"),_=b.get("plan"),E=b.get("addon");if((0,s.useEffect)(()=>{let e=setTimeout(()=>{P(!1)},1e3);return()=>clearTimeout(e)},[]),(0,s.useEffect)(()=>{if(T&&!I){let e=setTimeout(()=>{i.refresh()},2e3);return()=>clearTimeout(e)}},[T,I,i]),S&&T)return(0,t.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(o.Loader2,{className:"w-12 h-12 animate-spin text-primary mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Processing your subscription..."}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Please wait while we activate your account."})]})});let B=e?.subscription_tier?.toLowerCase()||"free",F=x(B),M=async()=>{if(confirm("Are you sure you want to cancel your subscription? You will retain access until the end of your billing period.")){y("cancel"),w(null);try{let e=await fetch("/api/subscriptions/cancel",{method:"POST"}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to cancel subscription");i.refresh()}catch(e){w(e.message),y(null)}}},D=async()=>{N(!0),w(null);try{let e=await fetch("/api/sync-subscription",{method:"POST"}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to sync subscription");console.log("[v0] Subscription synced:",t),i.refresh(),window.location.reload()}catch(e){console.error("[v0] Sync error:",e),w(e.message||"Failed to sync subscription")}finally{N(!1)}},L=h.filter(e=>"individual"===e.category),O=h.filter(e=>"business"===e.category);return(0,t.jsx)("div",{className:"min-h-screen bg-background p-6",children:(0,t.jsxs)("div",{className:"container mx-auto max-w-7xl",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"Manage Subscription"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Upgrade, downgrade, or cancel your subscription"})]}),A&&(0,t.jsx)(a.Card,{className:"mb-6 border-amber-500 bg-amber-50 dark:bg-amber-950",children:(0,t.jsx)(a.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)(l.ArrowRight,{className:"w-6 h-6 text-amber-600 flex-shrink-0 mt-1"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-amber-900 dark:text-amber-100 mb-2",children:"Checkout Canceled"}),(0,t.jsx)("p",{className:"text-amber-800 dark:text-amber-200 mb-4",children:"You canceled the checkout process. No charges were made. Feel free to try again when you're ready."})]})]})})}),T&&(0,t.jsx)(a.Card,{className:"mb-6 border-green-500 bg-green-50 dark:bg-green-950",children:(0,t.jsx)(a.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)(d.CheckCircle,{className:"w-6 h-6 text-green-600 flex-shrink-0 mt-1"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-green-900 dark:text-green-100 mb-2",children:I?"Demo Mode Active":"Payment Successful!"}),(0,t.jsx)("p",{className:"text-green-800 dark:text-green-200 mb-4",children:I?(0,t.jsxs)(t.Fragment,{children:["You're viewing a demo of the"," ",_?x(_)?.name:E||"subscription"," ","features. To activate real billing, connect your Stripe account."]}):(0,t.jsxs)(t.Fragment,{children:["Your subscription to"," ",_?x(_)?.name:E||"the plan"," has been activated. Your account will be updated shortly."]})}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(r.Button,{asChild:!0,variant:"default",children:(0,t.jsxs)(v.default,{href:"/dashboard",children:[(0,t.jsx)(m.LayoutDashboard,{className:"mr-2 h-4 w-4"}),"Go to Dashboard"]})}),(0,t.jsx)(r.Button,{asChild:!0,variant:"outline",children:(0,t.jsxs)(v.default,{href:"/dashboard/settings",children:[(0,t.jsx)(u.User,{className:"mr-2 h-4 w-4"}),"View Profile"]})}),!I&&(0,t.jsx)(r.Button,{onClick:D,variant:"outline",disabled:C,children:C?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Syncing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.RefreshCw,{className:"w-4 h-4 mr-2"}),"Sync Now"]})})]})]})]})})}),k&&(0,t.jsx)("div",{className:"mb-6 p-4 rounded-lg bg-destructive/10 border border-destructive text-destructive",children:k}),(0,t.jsxs)(a.Card,{className:"mb-8",children:[(0,t.jsxs)(a.CardHeader,{children:[(0,t.jsx)(a.CardTitle,{children:"Current Plan"}),(0,t.jsx)(a.CardDescription,{children:"Your active subscription"})]}),(0,t.jsxs)(a.CardContent,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-2xl font-bold",children:F?.name||"Free"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:F?.description}),F&&F.price>0&&(0,t.jsxs)("p",{className:"text-lg font-semibold mt-2",children:["$",F.price,F.interval&&`/${F.interval}`]})]}),(0,t.jsx)(n.Badge,{variant:e?.subscription_status==="active"?"default":"secondary",children:e?.subscription_status||"active"})]}),e?.stripe_subscription_id&&(0,t.jsx)(r.Button,{variant:"destructive",className:"mt-4",onClick:M,disabled:"cancel"===j,children:"cancel"===j?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Canceling..."]}):"Cancel Subscription"})]})]}),(0,t.jsxs)("div",{className:"mb-12",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold mb-6",children:"Individual Plans"}),(0,t.jsx)("div",{className:"grid md:grid-cols-3 gap-6",children:L.map(e=>{let s=e.id===B,i=!s&&e.price>(F?.price||0),n=!s&&e.price<(F?.price||0);return(0,t.jsxs)(a.Card,{className:`relative ${e.popular?"border-accent shadow-lg":""} ${s?"bg-accent/5":""}`,children:[e.popular&&(0,t.jsx)("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 rounded-full bg-accent text-accent-foreground text-sm font-semibold",children:"Most Popular"}),(0,t.jsxs)(a.CardHeader,{children:[(0,t.jsx)(a.CardTitle,{children:e.name}),(0,t.jsx)(a.CardDescription,{children:e.description}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("span",{className:"text-4xl font-bold",children:["$",e.price]}),e.interval&&(0,t.jsxs)("span",{className:"text-muted-foreground",children:["/",e.interval]})]})]}),(0,t.jsxs)(a.CardContent,{children:[(0,t.jsx)("ul",{className:"space-y-2 mb-6",children:e.features.map((e,s)=>(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)(c.Check,{className:"w-5 h-5 text-accent flex-shrink-0 mt-0.5"}),(0,t.jsx)("span",{className:"text-sm",children:e})]},s))}),s?(0,t.jsx)(r.Button,{className:"w-full",disabled:!0,children:"Current Plan"}):e.priceId?(0,t.jsxs)(f.SubscriptionCheckoutButton,{planId:e.id,className:"w-full",variant:i?"default":"outline",children:[i?"Upgrade":n?"Downgrade":"Subscribe",(0,t.jsx)(l.ArrowRight,{className:"ml-2 h-4 w-4"})]}):(0,t.jsx)(r.Button,{className:"w-full bg-transparent",variant:"outline",disabled:!0,children:"Free Plan"})]})]},e.id)})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-3xl font-bold mb-6",children:"Business Plans"}),(0,t.jsx)("div",{className:"grid md:grid-cols-2 gap-6 max-w-4xl",children:O.map(e=>{let s=e.id===B;return(0,t.jsxs)(a.Card,{className:s?"bg-accent/5":"",children:[(0,t.jsxs)(a.CardHeader,{children:[(0,t.jsx)(a.CardTitle,{children:e.name}),(0,t.jsx)(a.CardDescription,{children:e.description}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("span",{className:"text-4xl font-bold",children:["$",e.price]}),e.interval&&(0,t.jsxs)("span",{className:"text-muted-foreground",children:["/",e.interval]})]})]}),(0,t.jsxs)(a.CardContent,{children:[(0,t.jsx)("ul",{className:"space-y-2 mb-6",children:e.features.map((e,s)=>(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)(c.Check,{className:"w-5 h-5 text-accent flex-shrink-0 mt-0.5"}),(0,t.jsx)("span",{className:"text-sm",children:e})]},s))}),s?(0,t.jsx)(r.Button,{className:"w-full",disabled:!0,children:"Current Plan"}):(0,t.jsxs)(f.SubscriptionCheckoutButton,{planId:e.id,className:"w-full",children:["Subscribe",(0,t.jsx)(l.ArrowRight,{className:"ml-2 h-4 w-4"})]})]})]},e.id)})})]})]})})}var j=e.i(421443);function y(){let{profile:e}=(0,i.useDashboard)();return(0,t.jsx)(b,{profile:e})}e.s(["default",0,function(){return(0,t.jsx)(j.ErrorBoundary,{children:(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)(o.Loader2,{className:"w-8 h-8 animate-spin text-primary"})}),children:(0,t.jsx)(y,{})})})}],475637)}]);