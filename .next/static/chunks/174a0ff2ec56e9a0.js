(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,969430,e=>{"use strict";let s=(0,e.i(197140).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["default",0,s])},179311,e=>{"use strict";var s=e.i(969430);e.s(["DollarSign",()=>s.default])},801412,e=>{"use strict";let s=(0,e.i(197140).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",0,s],801412)},223711,e=>{"use strict";let s=(0,e.i(197140).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",0,s],223711)},870068,e=>{"use strict";let s=(0,e.i(197140).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);e.s(["Users",0,s],870068)},881660,e=>{"use strict";let s=(0,e.i(197140).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",0,s],881660)},41108,e=>{"use strict";let s=(0,e.i(197140).default)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);e.s(["default",0,s])},87041,e=>{"use strict";var s=e.i(41108);e.s(["Activity",()=>s.default])},851767,e=>{"use strict";let s=(0,e.i(197140).default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);e.s(["LogOut",0,s],851767)},723261,e=>{"use strict";var s=e.i(878957),t=e.i(821596),a=e.i(958202),r=e.i(920755),l=e.i(702542),i=e.i(167881),c=e.i(970065),n=e.i(327501),o=e.i(870068),d=e.i(931454),x=e.i(179311),h=e.i(87041),m=e.i(131841),g=e.i(851767),u=e.i(183533),p=e.i(223711),b=e.i(881660),f=e.i(801412),j=e.i(985183);function w({adminUser:e}){(0,a.useRouter)();let[w,y]=(0,t.useState)({totalUsers:0,activeUsers:0,totalFilings:0,successfulFilings:0,failedFilings:0,pendingFilings:0,totalRevenue:0,apiCalls:0}),[N,v]=(0,t.useState)(!0);(0,t.useEffect)(()=>{k()},[]);let k=async()=>{try{let e=(0,r.getSupabaseBrowserClient)(),{count:s}=await e.from("user_profiles").select("*",{count:"exact",head:!0}),{data:t}=await e.from("tax_filings").select("status"),a=t?.filter(e=>"accepted"===e.status).length||0,l=t?.filter(e=>"rejected"===e.status).length||0,i=t?.filter(e=>"pending"===e.status).length||0;y({totalUsers:s||0,activeUsers:Math.floor(.6*(s||0)),totalFilings:t?.length||0,successfulFilings:a,failedFilings:l,pendingFilings:i,totalRevenue:29.99*(t?.length||0),apiCalls:15*(t?.length||0)})}catch(e){console.error("[v0] Failed to load stats:",e)}finally{v(!1)}},C=async()=>{try{if(!(await fetch("/api/auth/signout",{method:"POST",credentials:"include"})).ok)throw Error("Sign out failed");localStorage.clear(),sessionStorage.clear(),window.location.href="/admin/login"}catch(e){console.error("[v0] Sign out error:",e),localStorage.clear(),sessionStorage.clear(),window.location.href="/admin/login"}};return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-purple-950 to-slate-950",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-[url('/grid.svg')] opacity-10"}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsx)("header",{className:"border-b border-white/10 bg-black/20 backdrop-blur-xl",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-600 to-blue-600 rounded-lg flex items-center justify-center",children:(0,s.jsx)(n.Shield,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl font-bold text-white",children:"Taxu Admin"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:e.email})]})]}),(0,s.jsxs)(i.Button,{onClick:C,variant:"ghost",className:"text-gray-400 hover:text-white",children:[(0,s.jsx)(g.LogOut,{className:"w-4 h-4 mr-2"}),"Logout"]})]})})}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,s.jsxs)(c.Card,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)(o.Users,{className:"w-8 h-8 text-blue-400"}),(0,s.jsx)(u.TrendingUp,{className:"w-5 h-5 text-green-400"})]}),(0,s.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Total Users"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-white",children:N?"...":w.totalUsers.toLocaleString()}),(0,s.jsxs)("p",{className:"text-xs text-green-400 mt-2",children:[w.activeUsers," active"]})]}),(0,s.jsxs)(c.Card,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)(d.FileText,{className:"w-8 h-8 text-purple-400"}),(0,s.jsx)(b.CheckCircle,{className:"w-5 h-5 text-green-400"})]}),(0,s.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Total Filings"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-white",children:N?"...":w.totalFilings.toLocaleString()}),(0,s.jsxs)("p",{className:"text-xs text-green-400 mt-2",children:[w.successfulFilings," successful"]})]}),(0,s.jsxs)(c.Card,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)(x.DollarSign,{className:"w-8 h-8 text-green-400"}),(0,s.jsx)(u.TrendingUp,{className:"w-5 h-5 text-green-400"})]}),(0,s.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Revenue"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-white",children:N?"...":`$${w.totalRevenue.toLocaleString()}`}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"This month"})]}),(0,s.jsxs)(c.Card,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)(h.Activity,{className:"w-8 h-8 text-orange-400"}),(0,s.jsx)(j.BarChart3,{className:"w-5 h-5 text-blue-400"})]}),(0,s.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"API Calls"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-white",children:N?"...":w.apiCalls.toLocaleString()}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Last 24 hours"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,s.jsx)(l.default,{href:"/admin/users",children:(0,s.jsxs)(c.Card,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6 hover:bg-white/10 transition-colors cursor-pointer group",children:[(0,s.jsx)(o.Users,{className:"w-10 h-10 text-blue-400 mb-4 group-hover:scale-110 transition-transform"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"User Management"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"View and manage all platform users"})]})}),(0,s.jsx)(l.default,{href:"/admin/filings",children:(0,s.jsxs)(c.Card,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6 hover:bg-white/10 transition-colors cursor-pointer group",children:[(0,s.jsx)(d.FileText,{className:"w-10 h-10 text-purple-400 mb-4 group-hover:scale-110 transition-transform"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"Filing Management"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Monitor and manage tax filings"})]})}),(0,s.jsx)(l.default,{href:"/admin/analytics",children:(0,s.jsxs)(c.Card,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6 hover:bg-white/10 transition-colors cursor-pointer group",children:[(0,s.jsx)(j.BarChart3,{className:"w-10 h-10 text-green-400 mb-4 group-hover:scale-110 transition-transform"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"Analytics"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"View platform analytics and insights"})]})}),(0,s.jsx)(l.default,{href:"/admin/diagnostics",children:(0,s.jsxs)(c.Card,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6 hover:bg-white/10 transition-colors cursor-pointer group",children:[(0,s.jsx)(h.Activity,{className:"w-10 h-10 text-orange-400 mb-4 group-hover:scale-110 transition-transform"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"System Diagnostics"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Monitor system health and performance"})]})}),(0,s.jsx)(l.default,{href:"/admin/support",children:(0,s.jsxs)(c.Card,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6 hover:bg-white/10 transition-colors cursor-pointer group",children:[(0,s.jsx)(p.AlertCircle,{className:"w-10 h-10 text-yellow-400 mb-4 group-hover:scale-110 transition-transform"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"Support Tickets"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Manage user support requests"})]})}),(0,s.jsx)(l.default,{href:"/admin/settings",children:(0,s.jsxs)(c.Card,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6 hover:bg-white/10 transition-colors cursor-pointer group",children:[(0,s.jsx)(m.Settings,{className:"w-10 h-10 text-gray-400 mb-4 group-hover:scale-110 transition-transform"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"Admin Settings"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Change password and manage account"})]})})]}),(0,s.jsxs)(c.Card,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6 mt-8",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Filing Status Overview"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-green-500/10 border border-green-500/20 rounded-lg",children:[(0,s.jsx)(b.CheckCircle,{className:"w-8 h-8 text-green-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-white",children:w.successfulFilings}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Successful"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:[(0,s.jsx)(f.Clock,{className:"w-8 h-8 text-yellow-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-white",children:w.pendingFilings}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Pending"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-red-500/10 border border-red-500/20 rounded-lg",children:[(0,s.jsx)(p.AlertCircle,{className:"w-8 h-8 text-red-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-white",children:w.failedFilings}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Failed"})]})]})]})]})]})]})]})}e.s(["default",0,function(){let e=(0,a.useRouter)(),[l,i]=(0,t.useState)(null),[c,n]=(0,t.useState)(!0);return((0,t.useEffect)(()=>{!async function(){let s=(0,r.createBrowserClient)();if(!s)return e.push("/admin/login");try{let{data:{session:t}}=await s.auth.getSession();if(!t)return void e.push("/admin/login");let{data:a}=await s.from("admin_users").select("*").eq("user_id",t.user.id).single();if(!a)return void e.push("/admin/unauthorized");i(a)}catch(s){console.log("[v0] Admin page: Error during auth check",s),e.push("/admin/login")}finally{n(!1)}}()},[e]),c)?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Loading admin dashboard..."})]})}):l?(0,s.jsx)(w,{adminUser:l}):null}],723261)}]);