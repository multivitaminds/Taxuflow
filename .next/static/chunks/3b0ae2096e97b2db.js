(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,593950,e=>{"use strict";let t=(0,e.i(40530).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["default",0,t])},314741,e=>{"use strict";var t=e.i(593950);e.s(["Calendar",()=>t.default])},145327,e=>{"use strict";let t=(0,e.i(40530).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["default",0,t])},965957,e=>{"use strict";var t=e.i(145327);e.s(["CheckCircle2",()=>t.default])},176359,e=>{"use strict";let t=(0,e.i(40530).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",0,t],176359)},341497,e=>{"use strict";let t=(0,e.i(40530).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["default",0,t])},305682,e=>{"use strict";var t=e.i(341497);e.s(["ArrowRight",()=>t.default])},561383,e=>{"use strict";let t=(0,e.i(40530).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",0,t],561383)},406780,e=>{"use strict";var t=e.i(226966);e.s(["Check",()=>t.default])},413724,e=>{"use strict";let t=(0,e.i(40530).default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",0,t],413724)},187189,e=>{"use strict";let t=(0,e.i(40530).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",0,t],187189)},793311,e=>{"use strict";let t=(0,e.i(40530).default)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);e.s(["ArrowUpRight",0,t],793311)},193199,e=>{"use strict";let t=(0,e.i(40530).default)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);e.s(["Key",0,t],193199)},145570,e=>{"use strict";let t=(0,e.i(40530).default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);e.s(["MessageSquare",0,t],145570)},405787,e=>{"use strict";let t=(0,e.i(40530).default)("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]);e.s(["Webhook",0,t],405787)},355948,e=>{"use strict";var t=e.i(437322),r=e.i(949161),s=e.i(780212),a=e.i(363284),o=e.i(679411),l=e.i(109540),i=e.i(187189),c=e.i(176359),n=e.i(965957),d=e.i(669980),u=e.i(594950);e.s(["DocumentUpload",0,function({onUploadComplete:e}){let[p,m]=(0,r.useState)([]),[g,h]=(0,r.useState)(!1),x=(0,s.createClient)(),f=async(t,r)=>{console.log("[v0] Starting file upload:",t.name);try{let s,a=t.size>0xa00000?"File size must be less than 10MB":["application/pdf","image/jpeg","image/jpg","image/png","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(t.type)?null:"Only PDF, JPG, PNG, and DOCX files are allowed";if(a){console.error("[v0] Validation failed:",a),m(e=>e.map((e,t)=>t===r?{...e,status:"error",error:a}:e));return}let{data:{user:o},error:l}=await x.auth.getUser();if(l||!o){console.error("[v0] User error:",l),m(e=>e.map((e,t)=>t===r?{...e,status:"error",error:"Please sign in to upload documents"}:e));return}console.log("[v0] User authenticated:",o.id);let i=Date.now(),c=t.name.replace(/[^a-zA-Z0-9.-]/g,"_"),n=`${o.id}/${i}-${c}`;console.log("[v0] Uploading to storage..."),m(e=>e.map((e,t)=>t===r?{...e,progress:"Uploading to secure storage..."}:e));let{data:d,error:u}=await x.storage.from("tax-documents").upload(n,t,{cacheControl:"3600",upsert:!1});if(u){console.error("[v0] Upload error:",u);let e=`Upload failed: ${u.message}`;(u.message.includes("not found")||u.message.includes("does not exist"))&&(e="Storage bucket not set up. Please run the database setup scripts first."),m(t=>t.map((t,s)=>s===r?{...t,status:"error",error:e}:t));return}console.log("[v0] File uploaded to storage successfully");let{data:{publicUrl:g}}=x.storage.from("tax-documents").getPublicUrl(n),h=(s=t.name.toLowerCase()).includes("w-2")||s.includes("w2")?"w2":s.includes("1099")?"1099":s.includes("receipt")?"receipt":"other",f=new Date().getFullYear();console.log("[v0] Saving document metadata..."),m(e=>e.map((e,t)=>t===r?{...e,progress:"Saving document information..."}:e));let{data:y,error:v}=await x.from("documents").insert({user_id:o.id,file_name:t.name,file_path:n,file_url:g,file_size:t.size,file_type:t.type,document_type:h,tax_year:f}).select().single();if(v){console.error("[v0] Database error:",v);let e=`Failed to save document info: ${v.message}`;v.message.includes("relation")&&v.message.includes("does not exist")&&(e="Database table not set up. Please run the database setup scripts first."),m(t=>t.map((t,s)=>s===r?{...t,status:"error",error:e}:t));return}console.log("[v0] Document saved successfully:",y.id),console.log("[v0] Starting AI document processing..."),m(e=>e.map((e,t)=>t===r?{...e,status:"processing",progress:"Sophie is analyzing with AI vision...",documentId:y.id}:e));try{let t=await fetch("/api/process-document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({documentId:y.id})});if(console.log("[v0] Process document response status:",t.status),!t.ok){let e=await t.json();throw console.error("[v0] Processing API error:",e),Error(e.error||"Processing failed")}let s=await t.json();console.log("[v0] Document processing complete:",s),m(e=>e.map((e,t)=>t===r?{...e,status:"complete",progress:`All 5 AI agents analyzed your ${s.documentType?.toUpperCase()||"document"}!`}:e)),setTimeout(()=>{m(e=>e.filter((e,t)=>t!==r)),1===p.filter(e=>"complete"!==e.status).length&&(console.log("[v0] All files processed, refreshing dashboard"),e&&e())},3e3)}catch(e){console.error("[v0] Processing error:",e),m(e=>e.map((e,t)=>t===r?{...e,status:"error",error:"Document uploaded but AI processing failed"}:e))}}catch(e){console.error("[v0] Unexpected error:",e),m(e=>e.map((e,t)=>t===r?{...e,status:"error",error:"An unexpected error occurred"}:e))}},y=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?h(!0):"dragleave"===e.type&&h(!1)};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:`relative border-2 border-dashed rounded-lg p-8 text-center transition-colors ${g?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onDragEnter:y,onDragLeave:y,onDragOver:y,onDrop:e=>{e.preventDefault(),e.stopPropagation(),h(!1);let t=Array.from(e.dataTransfer.files||[]);if(t.length>0){console.log("[v0] Dropped",t.length,"files");let e=t.map(e=>({file:e,status:"uploading",progress:"Starting upload..."}));m(t=>[...t,...e]),t.forEach((e,t)=>{f(e,p.length+t)})}},children:[(0,t.jsx)("input",{type:"file",id:"file-upload",className:"hidden",onChange:e=>{let t=Array.from(e.target.files||[]);if(t.length>0){console.log("[v0] Selected",t.length,"files for upload");let e=t.map(e=>({file:e,status:"uploading",progress:"Starting upload..."}));m(t=>[...t,...e]),t.forEach((e,t)=>{f(e,p.length+t)})}e.target.value=""},accept:".pdf,.jpg,.jpeg,.png,.docx",multiple:!0}),(0,t.jsxs)("label",{htmlFor:"file-upload",className:"cursor-pointer flex flex-col items-center gap-2",children:[(0,t.jsx)(o.Upload,{className:"h-12 w-12 text-muted-foreground"}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Drop your tax documents here"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"or click to browse (PDF, JPG, PNG, DOCX - max 10MB each)"}),(0,t.jsx)("p",{className:"text-xs text-primary font-medium mt-2",children:"You can upload multiple files at once"})]})]})]}),p.map((e,r)=>(0,t.jsx)(u.Card,{className:`p-4 ${"complete"===e.status?"bg-green-500/10 border-green-500":"error"===e.status?"bg-destructive/10 border-destructive":"bg-primary/10 border-primary"}`,children:(0,t.jsxs)("div",{className:"flex items-start gap-2",children:["complete"===e.status?(0,t.jsx)(n.CheckCircle2,{className:"h-5 w-5 text-green-500 mt-0.5 flex-shrink-0"}):"error"===e.status?(0,t.jsx)(c.AlertCircle,{className:"h-5 w-5 text-destructive mt-0.5 flex-shrink-0"}):(0,t.jsx)(i.Loader2,{className:"h-5 w-5 text-primary mt-0.5 flex-shrink-0 animate-spin"}),(0,t.jsx)(d.FileText,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:`text-sm font-medium truncate ${"complete"===e.status?"text-green-500":"error"===e.status?"text-destructive":"text-primary"}`,children:e.file.name}),(0,t.jsx)("p",{className:`text-xs mt-1 ${"complete"===e.status?"text-green-500/80":"error"===e.status?"text-destructive/80":"text-primary/80"}`,children:"error"===e.status?e.error:e.progress}),"processing"===e.status&&(0,t.jsxs)("div",{className:"mt-3 space-y-1",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"• Sophie: Document analysis"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"• Leo: Tax calculations"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"• Riley: Deduction discovery"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"• Kai: Audit risk assessment"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"• Jordan: Tax strategy"})]})]}),"error"===e.status&&(0,t.jsx)(a.Button,{variant:"ghost",size:"sm",onClick:()=>{m(e=>e.filter((e,t)=>t!==r))},className:"h-6 w-6 p-0 flex-shrink-0",children:(0,t.jsx)(l.X,{className:"h-4 w-4"})})]})},r))]})}])}]);