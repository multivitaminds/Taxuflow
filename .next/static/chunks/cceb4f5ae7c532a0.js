(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,127531,e=>{"use strict";var t=e.i(878957),a=e.i(821596),i=e.i(970065),s=e.i(167881),r=e.i(23750),l=e.i(10708),n=e.i(120682),o=e.i(692626),d=e.i(66401),c=e.i(718633),m=e.i(223711),p=e.i(405857),h=e.i(893629),u=e.i(931454),x=e.i(396210),g=e.i(619020),N=e.i(488651),f=e.i(958202),b=e.i(62870),v=e.i(386786),j=e.i(793188),y=e.i(781947),C=e.i(901309),S=e.i(973738),$=e.i(742210);e.s(["Form1099NEC",0,function({userId:e,extractedData:w}){let[T,F]=(0,a.useState)([{id:"1",firstName:"",middleInitial:"",lastName:"",ssn:"",ein:"",address:"",city:"",state:"",zipCode:"",compensation:"",email:"",accountNumber:"",secondTinNotification:!1,directSales5000Plus:!1,federalTaxWithheld:"",stateTaxWithheld:"",statePayerNumber:"",stateIncome:"",isVoid:!1,isCorrected:!1,isFatcaFiling:!1}]),[I,A]=(0,a.useState)(!1),[E,P]=(0,a.useState)({}),[k,D]=(0,a.useState)(!1),[W,L]=(0,a.useState)(null),[V,R]=(0,a.useState)(!1),[z,B]=(0,a.useState)(1),[O,U]=(0,a.useState)(!1),[X,M]=(0,a.useState)(0),[Y,q]=(0,a.useState)(!1),[J,K]=(0,a.useState)(null),{toast:H}=(0,n.useToast)(),Z=(0,f.useRouter)(),G=new Date().getFullYear(),_=G-1,Q=1!=G-_,ee=(e,t,a)=>{let i=a;if("ssn"===t?i=eo(a):"ein"===t?i=ed(a):"state"===t?i=a.toUpperCase():"federalTaxWithheld"===t||"stateTaxWithheld"===t||"stateIncome"===t?i=a.replace(/[^0-9.]/g,""):("secondTinNotification"===t||"directSales5000Plus"===t||"isVoid"===t||"isCorrected"===t||"isFatcaFiling"===t)&&(i=("true"===a).toString()),"city"===t&&a.includes(" ")){let t=function(e){if(!e)return null;let t=e.trim().replace(/\s+/g," ").match(/^(.+?)\s+([A-Z]{2})\s+(\d{5}(?:-\d{4})?)$/i);return t?{city:t[1].trim(),state:t[2].toUpperCase(),zipCode:t[3]}:null}(a);if(t.city&&t.state&&t.zipCode)return void F(T.map(a=>a.id===e?{...a,city:t.city,state:t.state,zipCode:t.zipCode}:a))}if("lastName"===t&&a.includes(" ")){let t=(0,v.parseName)("",a);if(t.middleInitial&&t.lastName)return void F(T.map(a=>a.id===e?{...a,middleInitial:t.middleInitial,lastName:t.lastName}:a))}F(T.map(a=>a.id===e?{...a,[t]:i}:a)),E[`${e}-${t}`]&&P({...E,[`${e}-${t}`]:""})},et=()=>{let e={};return T.forEach(t=>{t.firstName.trim()||(e[`${t.id}-firstName`]="First name is required"),t.lastName.trim()||(e[`${t.id}-lastName`]="Last name is required"),t.ssn||t.ein||(e[`${t.id}-ssn`]="Either SSN or EIN is required"),t.ssn&&!ec(t.ssn)&&(e[`${t.id}-ssn`]="Invalid SSN format"),t.ein&&!em(t.ein)&&(e[`${t.id}-ein`]="Invalid EIN format"),t.address.trim()||(e[`${t.id}-address`]="Address is required"),t.city.trim()||(e[`${t.id}-city`]="City is required"),t.state&&en.includes(t.state)||(e[`${t.id}-state`]="Valid state is required"),t.zipCode&&/^\d{5}(-\d{4})?$/.test(t.zipCode)||(e[`${t.id}-zipCode`]="Valid ZIP code is required");let a=Number.parseFloat(t.compensation);(!t.compensation||isNaN(a)||a<600)&&(e[`${t.id}-compensation`]="Compensation must be at least $600");let i=Number.parseFloat(t.federalTaxWithheld);t.federalTaxWithheld&&(isNaN(i)||i<0)&&(e[`${t.id}-federalTaxWithheld`]="Federal tax withheld must be a non-negative number");let s=Number.parseFloat(t.stateTaxWithheld);t.stateTaxWithheld&&(isNaN(s)||s<0)&&(e[`${t.id}-stateTaxWithheld`]="State tax withheld must be a non-negative number");let r=Number.parseFloat(t.stateIncome);t.stateIncome&&(isNaN(r)||r<0)&&(e[`${t.id}-stateIncome`]="State income must be a non-negative number")}),P(e),0===Object.keys(e).length},ea=async()=>{D(!0),L(null);try{let e=await fetch("/api/validate-form",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formType:"1099-nec",formData:{contractors:T}})}),t=await e.json();if(t.success&&t.validation){L(t.validation);let e=t.validation.warnings?.find(e=>"system"===e.field),a=e&&e.message.includes("temporarily unavailable");H({title:a?"Basic Validation Complete":"AI Validation Complete",description:`Found ${t.validation.errors.length} errors, ${t.validation.warnings.length} warnings, ${t.validation.suggestions.length} suggestions`})}else throw Error(t.error||"Validation failed")}catch(e){H({title:"Validation Failed",description:e instanceof Error?e.message:"An error occurred",variant:"destructive"})}finally{D(!1)}},ei=async(e,t)=>{K(e);try{let a=new FormData;a.append("file",t);let i=await fetch("/api/upload",{method:"POST",body:a});if(!i.ok)throw Error("Upload failed");let{url:s}=await i.json(),r=await fetch("/api/filing/extract-document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileId:s})}),l=await r.json();if(l.success&&"1099-nec"===l.data.documentType){let t,a=l.data,i=(a.recipient?.name||"").split(" "),s=i[0]||"",r=i.length>1?i[i.length-1]:"",n=i.length>2?i[1].charAt(0).toUpperCase():"",o={street:(t=(a.recipient?.address||"").split(",").map(e=>e.trim()))[0]||"",city:t[1]||"",state:t[2]||"",zip:t[3]||""};F(t=>t.map(t=>t.id===e?{...t,firstName:s,middleInitial:n,lastName:r,ssn:a.recipient?.ssn||a.recipient?.tin||"",ein:a.recipient?.ein||"",address:o.street,city:o.city,state:o.state,zipCode:o.zip,compensation:a.nonemployeeCompensation?.toString()||a.compensation?.toString()||"",email:a.recipient?.email||"",federalTaxWithheld:a.federalTaxWithheld?.toString()||"",stateTaxWithheld:a.stateTaxWithheld?.toString()||"",stateIncome:a.stateIncome?.toString()||"",directSales5000Plus:a.directSales5000Plus||!1,isCorrected:a.isCorrected||!1,isVoid:a.isVoid||!1,secondTinNotification:a.secondTinNotification||!1,accountNumber:a.accountNumber||""}:t)),H({title:"âœ¨ Contractor Data Auto-Filled",description:`${s} ${r}'s information has been extracted. Please review before submitting.`})}else throw Error("Could not extract 1099-NEC data from document")}catch(e){H({title:"Extraction Failed",description:e.message,variant:"destructive"})}finally{K(null)}},es=async e=>{let t=e.target.files?.[0];if(t){q(!0);try{let e=new FormData;e.append("file",t);let a=await fetch("/api/upload",{method:"POST",body:e});if(!a.ok)throw Error("Upload failed");let{url:i}=await a.json(),s=await fetch("/api/filing/extract-document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileId:i})}),r=await s.json();if(r.success&&"1099-nec"===r.data.documentType)H({title:"âœ¨ AI Extraction Complete",description:"Your 1099-NEC has been automatically filled. Please review the data."});else throw Error("Could not extract 1099-NEC data from document")}catch(e){H({title:"Extraction Failed",description:e.message,variant:"destructive"})}finally{q(!1)}}},er=async t=>{if(t.preventDefault(),console.log("[v0] handleSubmit called, currentFormStep:",z),1===z)return et()?(W||await ea(),B(2),void window.scrollTo({top:0,behavior:"smooth"})):void H({title:"Validation Error",description:"Please fix the errors in the form before continuing",variant:"destructive"});if(console.log("[v0] Attempting to submit to IRS..."),console.log("[v0] Validation results:",W),!W){H({title:"Please Validate Form",description:"Click 'AI Validate Form' before submitting",variant:"destructive"}),await ea();return}if(W.errors&&W.errors.length>0){let e=W.errors.map(e=>e.message||e.field).join(", ");H({title:"Please Fix Errors",description:`Your form has validation errors: ${e.substring(0,100)}...`,variant:"destructive"}),B(1);return}if(!et()){H({title:"Validation Error",description:"Please fix the errors in the form",variant:"destructive"}),B(1);return}A(!0),U(!0),M(1),console.log("[v0] Starting IRS submission...");try{console.log("[v0] Step 1/3: Authenticating with IRS e-filing system"),await new Promise(e=>setTimeout(e,1500)),M(2),console.log("[v0] Step 2/3: Verifying business entity with IRS"),await new Promise(e=>setTimeout(e,1500)),M(3),console.log("[v0] Step 3/3: Submitting 1099-NEC forms to IRS"),console.log("[v0] Calling /api/filing/submit-1099...");let t=await fetch("/api/filing/submit-1099",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,taxYear:new Date().getFullYear()-1,contractors:T.map(e=>({firstName:e.firstName,middleInitial:e.middleInitial,lastName:e.lastName,ssn:e.ssn.replace(/\D/g,""),ein:e.ein.replace(/\D/g,""),email:e.email,address:{street:e.address,city:e.city,state:e.state,zipCode:e.zipCode},compensation:Number.parseFloat(e.compensation),accountNumber:e.accountNumber,secondTinNotification:e.secondTinNotification,directSales5000Plus:e.directSales5000Plus,federalTaxWithheld:Number.parseFloat(e.federalTaxWithheld||"0"),stateTaxWithheld:Number.parseFloat(e.stateTaxWithheld||"0"),statePayerNumber:e.statePayerNumber,stateIncome:Number.parseFloat(e.stateIncome||"0"),isVoid:e.isVoid,isCorrected:e.isCorrected,isFatcaFiling:e.isFatcaFiling}))})});console.log("[v0] API response status:",t.status);let a=await t.json();if(console.log("[v0] API response data:",a),await new Promise(e=>setTimeout(e,1e3)),a.isDemoMode){H({title:"Demo Mode Restriction",description:a.error,variant:"destructive"}),A(!1),U(!1),M(0);return}if(a.success)console.log("[v0] âœ… 1099-NEC SUBMITTED SUCCESSFULLY!"),M(4),H({title:"1099-NEC Successfully Submitted to IRS",description:`Submission IDs: ${a.submissionIds?.join(", ")||"N/A"}. The IRS will process your filing within 24-48 hours.`,duration:5e3}),localStorage.removeItem("1099_draft"),setTimeout(()=>{Z.push(a.filingId?`/dashboard/filing/${a.filingId}`:"/dashboard/filing")},3e3);else throw M(0),U(!1),Error(a.error||"Failed to submit filing")}catch(e){console.error("[v0] SUBMISSION ERROR:",e),U(!1),M(0),H({title:"Submission Failed",description:e instanceof Error?e.message:"An error occurred",variant:"destructive"})}finally{A(!1)}},el=T.map((e,t)=>{let a=[{label:"Full Name",value:`${e.firstName} ${e.middleInitial?e.middleInitial+". ":""}${e.lastName}`},{label:"Social Security Number",value:e.ssn,sensitive:!0},{label:"EIN (if business)",value:e.ein,sensitive:!0},{label:"Email",value:e.email||"Not provided"},{label:"Address",value:e.address.includes(",")?e.address:`${e.address}, ${e.city}, ${e.state} ${e.zipCode}`},{label:"Nonemployee Compensation",value:`$${Number.parseFloat(e.compensation||"0").toFixed(2)}`}];return e.accountNumber&&a.push({label:"Account Number",value:e.accountNumber}),e.directSales5000Plus&&a.push({label:"Direct Sales (Box 2)",value:"Yes"}),Number.parseFloat(e.federalTaxWithheld||"0")>0&&a.push({label:"Federal Tax Withheld (Box 4)",value:`$${Number.parseFloat(e.federalTaxWithheld).toFixed(2)}`}),Number.parseFloat(e.stateTaxWithheld||"0")>0&&a.push({label:"State Tax Withheld (Box 5)",value:`$${Number.parseFloat(e.stateTaxWithheld).toFixed(2)}`}),e.statePayerNumber&&a.push({label:"State/Payer's State No. (Box 6)",value:e.statePayerNumber}),Number.parseFloat(e.stateIncome||"0")>0&&a.push({label:"State Income (Box 7)",value:`$${Number.parseFloat(e.stateIncome).toFixed(2)}`}),e.isVoid&&a.push({label:"Form Status",value:"VOID"}),e.isCorrected&&a.push({label:"Form Status",value:"CORRECTED"}),e.secondTinNotification&&a.push({label:"2nd TIN Notification",value:"Yes"}),e.isFatcaFiling&&a.push({label:"FATCA Filing",value:"Yes"}),{title:`Contractor ${t+1}: ${e.firstName} ${e.lastName}`,fields:a}});(0,a.useEffect)(()=>{if(w){if(console.log("[v0] Auto-filling 1099-NEC form with extracted data:",w),!0===w.isTemplateData&&(console.log("[v0] Detected template data in form initialization, showing warning."),H({title:"âš ï¸ Template Document Detected",description:"The uploaded document appears to be a sample/demo form. Please upload real tax documents with actual taxpayer information. Data may be inaccurate.",variant:"warning"})),w.contractors&&Array.isArray(w.contractors)){console.log("[v0] Processing multiple contractors:",w.contractors.length);let e=w.contractors.filter(e=>(!0===e.isTemplateData&&(console.log("[v0] Including template contractor data for testing:",e.recipient?.name),H({title:"âš ï¸ Template Contractor Data Included",description:`Contractor ${e.recipient?.name||"Unknown"} appears to be from a template. Data accuracy is not guaranteed.`,variant:"warning"})),"1099-nec"===e.documentType)).map((e,t)=>{let a=(e.recipient?.name||"").split(" "),i=a[0]||"",s=a.length>1?a[a.length-1]:"",r=a.length>2?a[1].charAt(0).toUpperCase():"",l=e.recipient?.address||"",n=e.recipient?.city||"",o=e.recipient?.state||"",d=e.recipient?.zipCode||"";return{id:`${Date.now()}-${t}`,firstName:i,middleInitial:r,lastName:s,ssn:e.recipient?.ssn||e.recipient?.tin||"",ein:e.recipient?.ein||"",address:l,city:n,state:o,zipCode:d,compensation:e.income?.nonemployeeCompensation?.toString()||e.nonemployeeCompensation?.toString()||e.compensation?.toString()||"",email:e.recipient?.email||"",accountNumber:e.accountNumber||"",secondTinNotification:e.secondTinNotification||!1,directSales5000Plus:e.directSales5000Plus||!1,federalTaxWithheld:e.federalTaxWithheld?.toString()||"",stateTaxWithheld:e.stateTaxWithheld?.toString()||"",statePayerNumber:e.statePayerNumber||"",stateIncome:e.stateIncome?.toString()||"",isVoid:e.isVoid||!1,isCorrected:e.isCorrected||!1,isFatcaFiling:e.isFatcaFiling||!1}});return 0===e.length?void H({title:"âš ï¸ No Valid 1099-NEC Forms",description:"The uploaded documents are not 1099-NEC forms. Please upload valid 1099-NEC tax documents.",variant:"destructive"}):(F(e),void H({title:"âœ¨ Multiple Contractors Auto-Filled",description:`${e.length} contractor form${e.length>1?"s":""} populated. Please review before submitting.`}))}let e=(w.recipient?.name||"").split(" "),t=e[0]||"",a=e.length>1?e[e.length-1]:"",i=e.length>2?e[1].charAt(0).toUpperCase():"",s={id:Date.now().toString(),firstName:t,middleInitial:i,lastName:a,ssn:w.recipient?.ssn||w.recipient?.tin||"",ein:w.recipient?.ein||"",address:w.recipient?.street||"",city:w.recipient?.city||"",state:w.recipient?.state||"",zipCode:w.recipient?.zipCode||"",compensation:w.income?.nonemployeeCompensation?.toString()||w.nonemployeeCompensation?.toString()||w.compensation?.toString()||"",email:w.recipient?.email||"",accountNumber:w.accountNumber||"",secondTinNotification:w.secondTinNotification||!1,directSales5000Plus:w.directSales5000Plus||!1,federalTaxWithheld:w.federalTaxWithheld?.toString()||"",stateTaxWithheld:w.stateTaxWithheld?.toString()||"",statePayerNumber:w.statePayerNumber||"",stateIncome:w.stateIncome?.toString()||"",isVoid:w.isVoid||!1,isCorrected:w.isCorrected||!1,isFatcaFiling:w.isFatcaFiling||!1};F(e=>{if(!e.some(e=>!e.firstName&&!e.lastName&&!e.ssn&&!e.compensation))return[...e,s];{let t=[...e],a=t.findIndex(e=>!e.firstName&&!e.lastName&&!e.ssn&&!e.compensation);return t[a]=s,t}}),H({title:"âœ¨ Contractor Auto-Filled",description:`${t} ${a}'s information has been extracted. Please review before submitting.`})}},[w]);let en=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"],eo=e=>{let t=e.replace(/\D/g,"");return t.length<=3?t:t.length<=5?`${t.slice(0,3)}-${t.slice(3)}`:`${t.slice(0,3)}-${t.slice(3,5)}-${t.slice(5,9)}`},ed=e=>{let t=e.replace(/\D/g,"");return t.length<=2?t:`${t.slice(0,2)}-${t.slice(2,9)}`},ec=e=>9===e.replace(/\D/g,"").length,em=e=>9===e.replace(/\D/g,"").length;return(0,t.jsxs)("form",{onSubmit:er,className:"space-y-6",children:[(0,t.jsx)(C.ProgressStepper,{steps:[{id:"fill",label:"Fill Form",sublabel:"Enter Information"},{id:"review",label:"Review & Submit",sublabel:"Verify Details"}],currentStep:z}),2===z?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.FilingReviewSection,{sections:el,formType:"1099-NEC"}),(0,t.jsxs)("div",{className:"flex gap-4 pt-6",children:[(0,t.jsxs)(s.Button,{type:"button",variant:"outline",onClick:()=>B(1),className:"flex-1",disabled:I,children:[(0,t.jsx)(x.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Back to Edit"]}),(0,t.jsxs)(s.Button,{type:"submit",disabled:I,className:"flex-1 bg-gradient-to-r from-[#005ea2] to-[#162e51] hover:opacity-90 text-white text-lg py-6",children:[I&&(0,t.jsx)(o.Loader2,{className:"mr-2 h-5 w-5 animate-spin"}),(0,t.jsx)(N.Send,{className:"mr-2 h-5 w-5"}),"Submit to IRS"]})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.Card,{className:"relative overflow-hidden border-2 border-purple-500/20 bg-gradient-to-br from-background via-background to-purple-500/5",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/5 via-transparent to-orange-500/5 pointer-events-none"}),(0,t.jsxs)(i.CardHeader,{className:"relative",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4 mb-4",children:[(0,t.jsxs)(s.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>Z.push("/dashboard/filing/new"),className:"hover:scale-105 transition-transform bg-transparent",children:[(0,t.jsx)(x.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:es,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",disabled:Y}),(0,t.jsxs)(s.Button,{type:"button",size:"sm",disabled:Y,className:"relative overflow-hidden bg-gradient-to-r from-purple-600 via-purple-500 to-pink-500 hover:from-purple-700 hover:via-purple-600 hover:to-pink-600 text-white font-semibold shadow-lg hover:shadow-xl hover:shadow-purple-500/50 transition-all duration-300 border-0 group",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-200%] group-hover:translate-x-[200%] transition-transform duration-1000"}),Y?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Extracting..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Sparkles,{className:"h-4 w-4 mr-2 animate-pulse"}),"Upload 1099-NEC (AI Extract)"]})]})]})]}),(0,t.jsx)(i.CardTitle,{className:"text-2xl bg-gradient-to-r from-purple-600 to-orange-600 bg-clip-text text-transparent",children:"Form 1099-NEC - Nonemployee Compensation"}),(0,t.jsx)(i.CardDescription,{children:(0,t.jsxs)("div",{className:"space-y-4 mt-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-sm",children:"Report contractor payments for"}),(0,t.jsxs)(b.Select,{value:_.toString(),onValueChange:e=>{},children:[(0,t.jsx)(b.SelectTrigger,{className:"w-[120px] h-8 bg-background/80 border-purple-500/20",children:(0,t.jsx)(b.SelectValue,{placeholder:"Select year"})}),(0,t.jsx)(b.SelectContent,{children:Array.from({length:10},(e,t)=>G-t-1).map(e=>(0,t.jsx)(b.SelectItem,{value:e.toString(),children:e},e))})]})]}),Q?(0,t.jsxs)(y.Alert,{className:"bg-orange-500/10 border-orange-500/20",children:[(0,t.jsx)(m.AlertCircle,{className:"h-4 w-4 text-orange-600"}),(0,t.jsx)(y.AlertTitle,{className:"text-orange-600 font-semibold",children:"Late 1099-NEC Filing - Paper Filing Required"}),(0,t.jsxs)(y.AlertDescription,{className:"text-sm space-y-2 mt-2",children:[(0,t.jsxs)("p",{children:[(0,t.jsxs)("strong",{children:["Tax year ",_]})," is beyond the IRS e-filing deadline (January 31st)."]}),(0,t.jsx)("p",{children:"You'll need to:"}),(0,t.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[(0,t.jsx)("li",{children:"Complete paper 1099-NEC forms"}),(0,t.jsx)("li",{children:"Submit via mail to the IRS"}),(0,t.jsx)("li",{children:"Include a cover letter explaining the late filing"}),(0,t.jsx)("li",{children:"Be prepared for potential late filing penalties"})]}),(0,t.jsxs)("div",{className:"mt-3 p-3 bg-background/50 rounded border border-orange-500/20",children:[(0,t.jsx)("p",{className:"font-semibold text-orange-600 mb-1",children:"ðŸ“¦ Paper Filing Package - $29"}),(0,t.jsx)("p",{className:"text-xs",children:"We'll generate pre-filled 1099-NEC forms, cover letter template, IRS mailing labels, and filing instructions."})]})]})]}):(0,t.jsxs)(y.Alert,{className:"bg-green-500/10 border-green-500/20",children:[(0,t.jsx)(c.CheckCircle2,{className:"h-4 w-4 text-green-600"}),(0,t.jsx)(y.AlertTitle,{className:"text-green-600 font-semibold",children:"E-Filing Available"}),(0,t.jsxs)(y.AlertDescription,{className:"text-sm",children:["Tax year ",_," is eligible for electronic filing. Complete the form below and we'll submit it directly to the IRS.",(0,t.jsx)("span",{className:"block mt-2 text-purple-600 font-medium",children:'ðŸ’¡ Tip: Use the "Upload 1099-NEC" button to auto-fill with AI!'})]})]})]})})]})]}),W&&(0,t.jsxs)("div",{className:"space-y-3",children:[W.errors?.map((e,a)=>(0,t.jsxs)(y.Alert,{className:"bg-red-500/10 border-red-500/20",children:[(0,t.jsx)(m.AlertCircle,{className:"h-4 w-4 text-red-600"}),(0,t.jsxs)(y.AlertTitle,{className:"text-red-600 font-semibold",children:["Error: ",e.field||"Validation"]}),(0,t.jsx)(y.AlertDescription,{className:"text-sm",children:"string"==typeof e?e:e.message})]},`error-${a}`)),W.warnings?.map((e,a)=>(0,t.jsxs)(y.Alert,{className:"system"===e.field?"bg-blue-500/10 border-blue-500/20":"bg-orange-500/10 border-orange-500/20",children:[(0,t.jsx)(m.AlertCircle,{className:`h-4 w-4 ${"system"===e.field?"text-blue-600":"text-orange-600"}`}),(0,t.jsx)(y.AlertTitle,{className:`${"system"===e.field?"text-blue-600":"text-orange-600"} font-semibold`,children:"system"===e.field?"Information":"Warning"}),(0,t.jsx)(y.AlertDescription,{className:"text-sm",children:"string"==typeof e?e:e.message})]},`warning-${a}`)),W.suggestions?.map((e,a)=>(0,t.jsxs)(y.Alert,{className:"bg-blue-500/10 border-blue-500/20",children:[(0,t.jsx)(h.Sparkles,{className:"h-4 w-4 text-blue-600"}),(0,t.jsx)(y.AlertTitle,{className:"text-blue-600 font-semibold",children:"Suggestion"}),(0,t.jsx)(y.AlertDescription,{className:"text-sm",children:"string"==typeof e?e:e.message})]},`suggestion-${a}`)),W.valid&&!W.errors?.length&&(0,t.jsxs)(y.Alert,{className:"bg-green-500/10 border-green-500/20",children:[(0,t.jsx)(c.CheckCircle2,{className:"h-4 w-4 text-green-600"}),(0,t.jsx)(y.AlertTitle,{className:"text-green-600 font-semibold",children:"All Clear!"}),(0,t.jsx)(y.AlertDescription,{className:"text-sm",children:"Your form passed all validation checks. Ready to submit!"})]})]}),T.map((e,a)=>(0,t.jsxs)(i.Card,{className:"relative overflow-hidden border-white/10 bg-white/5 backdrop-blur-xl",children:[(0,t.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-purple-600 to-orange-600"}),(0,t.jsx)(i.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-purple-600 to-pink-500 text-white font-semibold shadow-lg",children:a+1}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(i.CardTitle,{className:"text-lg",children:["Contractor ",a+1]}),(0,t.jsx)(i.CardDescription,{children:"Enter contractor information"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:t=>{let a=t.target.files?.[0];a&&ei(e.id,a),t.target.value=""},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",disabled:null!==J}),(0,t.jsxs)(s.Button,{type:"button",size:"sm",disabled:null!==J,className:"relative overflow-hidden bg-gradient-to-r from-purple-600 via-purple-500 to-pink-500 hover:from-purple-700 hover:via-purple-600 hover:to-pink-600 text-white font-semibold shadow-lg hover:shadow-xl hover:shadow-purple-500/50 transition-all duration-300 border-0 group",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-200%] group-hover:translate-x-[200%] transition-transform duration-1000"}),J===e.id?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Extracting..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Sparkles,{className:"h-4 w-4 mr-2 animate-pulse"}),"Upload 1099-NEC (AI Extract)"]})]})]}),T.length>1&&(0,t.jsx)(s.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>{var t;return t=e.id,void F(T.filter(e=>e.id!==t))},className:"hover:bg-red-500/10 hover:text-red-500",children:(0,t.jsx)(d.Trash2,{className:"h-4 w-4"})})]})]})}),(0,t.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.Label,{htmlFor:`firstName-${e.id}`,children:"First Name *"}),(0,t.jsx)(r.Input,{id:`firstName-${e.id}`,value:e.firstName,onChange:t=>ee(e.id,"firstName",t.target.value),className:E[`${e.id}-firstName`]?"border-red-500":"",placeholder:"John"}),E[`${e.id}-firstName`]&&(0,t.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,t.jsx)(m.AlertCircle,{className:"h-3 w-3"}),E[`${e.id}-firstName`]]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.Label,{htmlFor:`middleInitial-${e.id}`,children:"Middle Initial"}),(0,t.jsx)(r.Input,{id:`middleInitial-${e.id}`,value:e.middleInitial,onChange:t=>ee(e.id,"middleInitial",t.target.value.toUpperCase()),maxLength:1,placeholder:"M"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.Label,{htmlFor:`lastName-${e.id}`,children:"Last Name *"}),(0,t.jsx)(r.Input,{id:`lastName-${e.id}`,value:e.lastName,onChange:t=>ee(e.id,"lastName",t.target.value),className:E[`${e.id}-lastName`]?"border-red-500":"",placeholder:"Doe"}),E[`${e.id}-lastName`]&&(0,t.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,t.jsx)(m.AlertCircle,{className:"h-3 w-3"}),E[`${e.id}-lastName`]]})]})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(l.Label,{htmlFor:`ssn-${e.id}`,className:"flex items-center gap-2",children:["SSN *",(0,t.jsx)(p.Lock,{className:"h-3 w-3 text-green-500"})]}),(0,t.jsx)(r.Input,{id:`ssn-${e.id}`,value:e.ssn,onChange:t=>ee(e.id,"ssn",t.target.value),className:E[`${e.id}-ssn`]?"border-red-500":"",placeholder:"XXX-XX-XXXX",maxLength:11}),E[`${e.id}-ssn`]&&(0,t.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,t.jsx)(m.AlertCircle,{className:"h-3 w-3"}),E[`${e.id}-ssn`]]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,t.jsx)(p.Lock,{className:"h-3 w-3"}),"AES-256 encrypted at rest"]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(l.Label,{htmlFor:`ein-${e.id}`,className:"flex items-center gap-2",children:["EIN (if business)",(0,t.jsx)(p.Lock,{className:"h-3 w-3 text-green-500"})]}),(0,t.jsx)(r.Input,{id:`ein-${e.id}`,value:e.ein,onChange:t=>ee(e.id,"ein",t.target.value),className:E[`${e.id}-ein`]?"border-red-500":"",placeholder:"XX-XXXXXXX",maxLength:10}),E[`${e.id}-ein`]&&(0,t.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,t.jsx)(m.AlertCircle,{className:"h-4 w-4"}),E[`${e.id}-ein`]]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,t.jsx)(p.Lock,{className:"h-3 w-3"}),"Encrypted and secure"]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.Label,{htmlFor:`email-${e.id}`,children:"Email"}),(0,t.jsx)(r.Input,{id:`email-${e.id}`,type:"email",value:e.email,onChange:t=>ee(e.id,"email",t.target.value),placeholder:"contractor@example.com"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.Label,{htmlFor:`address-${e.id}`,children:"Street Address *"}),(0,t.jsx)(r.Input,{id:`address-${e.id}`,value:e.address,onChange:t=>ee(e.id,"address",t.target.value),className:E[`${e.id}-address`]?"border-red-500":"",placeholder:"123 Main Street"}),E[`${e.id}-address`]&&(0,t.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,t.jsx)(m.AlertCircle,{className:"h-4 w-4"}),E[`${e.id}-address`]]})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.Label,{htmlFor:`city-${e.id}`,children:"City *"}),(0,t.jsx)(r.Input,{id:`city-${e.id}`,value:e.city,onChange:t=>ee(e.id,"city",t.target.value),className:E[`${e.id}-city`]?"border-red-500":"",placeholder:"San Francisco"}),E[`${e.id}-city`]&&(0,t.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,t.jsx)(m.AlertCircle,{className:"h-4 w-4"}),E[`${e.id}-city`]]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.Label,{htmlFor:`state-${e.id}`,children:"State *"}),(0,t.jsxs)(b.Select,{value:e.state,onValueChange:t=>ee(e.id,"state",t),children:[(0,t.jsx)(b.SelectTrigger,{className:E[`${e.id}-state`]?"border-red-500":"",children:(0,t.jsx)(b.SelectValue,{placeholder:"Select state"})}),(0,t.jsx)(b.SelectContent,{children:en.map(e=>(0,t.jsx)(b.SelectItem,{value:e,children:e},e))})]}),E[`${e.id}-state`]&&(0,t.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,t.jsx)(m.AlertCircle,{className:"h-4 w-4"}),E[`${e.id}-state`]]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.Label,{htmlFor:`zipCode-${e.id}`,children:"ZIP Code *"}),(0,t.jsx)(r.Input,{id:`zipCode-${e.id}`,value:e.zipCode,onChange:t=>ee(e.id,"zipCode",t.target.value),className:E[`${e.id}-zipCode`]?"border-red-500":"",placeholder:"94102",maxLength:10}),E[`${e.id}-zipCode`]&&(0,t.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,t.jsx)(m.AlertCircle,{className:"h-4 w-4"}),E[`${e.id}-zipCode`]]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.Label,{htmlFor:`compensation-${e.id}`,children:"Nonemployee Compensation (Box 1) *"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"$"}),(0,t.jsx)(r.Input,{id:`compensation-${e.id}`,type:"number",step:"0.01",value:e.compensation,onChange:t=>ee(e.id,"compensation",t.target.value),className:`pl-7 ${E[`${e.id}-compensation`]?"border-red-500":""}`,placeholder:"0.00"})]}),E[`${e.id}-compensation`]&&(0,t.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,t.jsx)(m.AlertCircle,{className:"h-4 w-4"}),E[`${e.id}-compensation`]]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Minimum $600 required for 1099-NEC filing"})]}),(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",id:`directSales-${e.id}`,checked:e.directSales5000Plus,onChange:t=>ee(e.id,"directSales5000Plus",t.target.checked.toString()),className:"h-4 w-4 rounded border-gray-300"}),(0,t.jsx)(l.Label,{htmlFor:`directSales-${e.id}`,className:"text-sm font-normal",children:"Payer made direct sales totaling $5,000 or more of consumer products to recipient for resale (Box 2)"})]})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.Label,{htmlFor:`federalTaxWithheld-${e.id}`,children:"Federal Income Tax Withheld (Box 4)"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"$"}),(0,t.jsx)(r.Input,{id:`federalTaxWithheld-${e.id}`,type:"number",step:"0.01",value:e.federalTaxWithheld,onChange:t=>ee(e.id,"federalTaxWithheld",t.target.value),className:"pl-7",placeholder:"0.00"})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Backup withholding or voluntary federal tax withheld"})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.Label,{htmlFor:`stateTaxWithheld-${e.id}`,children:"State Tax Withheld (Box 5)"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"$"}),(0,t.jsx)(r.Input,{id:`stateTaxWithheld-${e.id}`,type:"number",step:"0.01",value:e.stateTaxWithheld,onChange:t=>ee(e.id,"stateTaxWithheld",t.target.value),className:"pl-7",placeholder:"0.00"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.Label,{htmlFor:`statePayerNumber-${e.id}`,children:"State/Payer's State No. (Box 6)"}),(0,t.jsx)(r.Input,{id:`statePayerNumber-${e.id}`,value:e.statePayerNumber,onChange:t=>ee(e.id,"statePayerNumber",t.target.value),placeholder:"State ID number"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.Label,{htmlFor:`stateIncome-${e.id}`,children:"State Income (Box 7)"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"$"}),(0,t.jsx)(r.Input,{id:`stateIncome-${e.id}`,type:"number",step:"0.01",value:e.stateIncome,onChange:t=>ee(e.id,"stateIncome",t.target.value),className:"pl-7",placeholder:"0.00"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.Label,{htmlFor:`accountNumber-${e.id}`,children:"Account Number (optional)"}),(0,t.jsx)(r.Input,{id:`accountNumber-${e.id}`,value:e.accountNumber,onChange:t=>ee(e.id,"accountNumber",t.target.value),placeholder:"For internal tracking"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Use if you file multiple 1099s for this contractor"})]}),(0,t.jsxs)("div",{className:"space-y-3 pt-4 border-t border-border",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Additional Options"}),(0,t.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",id:`void-${e.id}`,checked:e.isVoid,onChange:t=>ee(e.id,"isVoid",t.target.checked.toString()),className:"h-4 w-4 rounded border-gray-300"}),(0,t.jsx)(l.Label,{htmlFor:`void-${e.id}`,className:"text-sm font-normal",children:"VOID (mark if this form should be voided)"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",id:`corrected-${e.id}`,checked:e.isCorrected,onChange:t=>ee(e.id,"isCorrected",t.target.checked.toString()),className:"h-4 w-4 rounded border-gray-300"}),(0,t.jsx)(l.Label,{htmlFor:`corrected-${e.id}`,className:"text-sm font-normal",children:"CORRECTED (mark if correcting a previously filed form)"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",id:`secondTin-${e.id}`,checked:e.secondTinNotification,onChange:t=>ee(e.id,"secondTinNotification",t.target.checked.toString()),className:"h-4 w-4 rounded border-gray-300"}),(0,t.jsx)(l.Label,{htmlFor:`secondTin-${e.id}`,className:"text-sm font-normal",children:"2nd TIN not. (IRS notified twice about incorrect TIN)"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",id:`fatca-${e.id}`,checked:e.isFatcaFiling,onChange:t=>ee(e.id,"isFatcaFiling",t.target.checked.toString()),className:"h-4 w-4 rounded border-gray-300"}),(0,t.jsx)(l.Label,{htmlFor:`fatca-${e.id}`,className:"text-sm font-normal",children:"FATCA filing requirement"})]})]})]})]})]},e.id)),(0,t.jsxs)(s.Button,{type:"button",variant:"outline",onClick:()=>{F([...T,{id:Date.now().toString(),firstName:"",middleInitial:"",lastName:"",ssn:"",ein:"",address:"",city:"",state:"",zipCode:"",compensation:"",email:"",accountNumber:"",secondTinNotification:!1,directSales5000Plus:!1,federalTaxWithheld:"",stateTaxWithheld:"",statePayerNumber:"",stateIncome:"",isVoid:!1,isCorrected:!1,isFatcaFiling:!1}])},className:"w-full border-purple-500/20 hover:border-purple-500/50 bg-purple-500/5 hover:bg-purple-500/10",children:[(0,t.jsx)(h.Sparkles,{className:"mr-2 h-4 w-4"}),"Add Another Contractor"]}),(0,t.jsxs)("div",{className:"flex flex-col gap-4 pt-6 border-t border-border",children:[(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)(s.Button,{type:"button",variant:"outline",onClick:ea,disabled:k||I,className:"flex-1 bg-transparent border-blue-500/20",children:k?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Validating..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Sparkles,{className:"mr-2 h-4 w-4"}),"AI Validate Form"]})}),Q&&(0,t.jsxs)(s.Button,{type:"button",variant:"outline",onClick:()=>R(!0),className:"flex-1 bg-transparent border-orange-500/20",children:[(0,t.jsx)(u.FileText,{className:"mr-2 h-4 w-4"}),"Generate Penalty Letter ($19)"]})]}),(0,t.jsxs)(s.Button,{type:"submit",disabled:I||k,className:"w-full bg-gradient-to-r from-purple-600 to-orange-600 hover:from-purple-700 hover:to-orange-700 shadow-lg text-lg py-6",children:["Continue to Review",(0,t.jsx)(g.ArrowRight,{className:"ml-2 h-5 w-5"})]})]})]}),(0,t.jsx)($.FilingProgressDialog,{open:O,currentStep:X,steps:[{id:"auth",title:"Authenticating",description:"Securely connecting to IRS e-filing system",icon:"ðŸ”"},{id:"business",title:"Verifying business entity",description:"Setting up your business profile with the IRS",icon:"ðŸ¢"},{id:"submit",title:"Submitting 1099-NEC forms",description:"Transmitting contractor payment data to the IRS",icon:"ðŸ“„"}],isComplete:4===X,isError:!1,onClose:()=>{U(!1),M(0),4===X&&Z.push("/dashboard/filing")}}),(0,t.jsx)(j.PenaltyAbatementDialog,{open:V,onOpenChange:R,formType:"1099-NEC",taxYear:_,businessName:"",ein:""})]})}],127531)}]);